"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[3482],{3482:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(65043),n=t(35475),r=t(34535),i=t(19252),o=t(96446),l=t(85865),d=t(42518),u=t(43629),c=t(48407),m=t(96221),h=t(53387),w=t(99522),p=t(70579);const x=(0,r.Ay)(m.A)(e=>{let{theme:s}=e;return{display:"flex",minHeight:"100%",alignItems:"center",justifyContent:"center",padding:s.spacing(12,0)}});function f(){const[e,s]=(0,a.useState)(""),[t,r]=(0,a.useState)(!1);return(0,p.jsxs)(x,{title:"Reset Password | Minimal UI",children:[(0,p.jsx)(u.A,{}),(0,p.jsx)(i.A,{children:(0,p.jsx)(o.A,{sx:{maxWidth:480,mx:"auto"},children:t?(0,p.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,p.jsx)(w.m1,{sx:{mb:5,mx:"auto",height:160}}),(0,p.jsx)(l.A,{variant:"h3",gutterBottom:!0,children:"Password reset is done"}),(0,p.jsx)(l.A,{children:"Now you can login with new credentials."}),(0,p.jsx)(d.A,{size:"large",variant:"contained",component:n.N_,to:c.pi.login,sx:{mt:5},children:"Back"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.A,{variant:"h3",paragraph:!0,children:"Reset your password"}),(0,p.jsx)(l.A,{sx:{color:"text.secondary",mb:5},children:"Please enter the current password associated with your account and enter new password."}),(0,p.jsx)(h.Y,{onSent:()=>r(!0),onGetEmail:e=>s(e)}),(0,p.jsx)(d.A,{fullWidth:!0,size:"large",component:n.N_,to:c.pi.login,sx:{mt:1},children:"Back"})]})})})]})}},53387:(e,s,t)=>{t.d(s,{F:()=>P,Y:()=>b});var a=t(80899),n=t(73216),r=t(65043),i=t(5748),o=t(86897),l=t(91698),d=t(80586),u=t(88911),c=t(67254),m=t(67784),h=t(51787),w=t(17392),p=t(72812),x=t(80916),f=t(88930),g=t(77137),j=t(30342),v=t(43409),A=t(70579);function b(e){let{onSent:s,onGetEmail:t}=e;const{resetToken:b,userId:S}=(0,n.g)(),[y,P]=(0,r.useState)(!1),C=(0,v.A)(),[k,E]=(0,r.useState)(!0),{logout:I}=(0,j.A)(),_=a.Ik().shape({newPassword:a.Yj().required("Enter New Password"),passwordConfirmation:a.Yj().oneOf([a.KR("newPassword"),null],"Confrmation password doesn't match with new password")}),W=(0,o.Wx)({initialValues:{email:""},validationSchema:_,onSubmit:async(e,a)=>{let{setErrors:n,setSubmitting:r}=a;try{(async()=>{const{newPassword:e}=W.values,t={Token:b,password:e,userId:S};try{const e=await(0,x.EM)(g.p3.POST,`${f.A.auth.resetPassword}?bypass=true`,t);200===parseInt(e.status,10)?s(!0):s(!1)}catch(a){console.log("err",a)}})(),C.current&&(s(),t(W.values.email),r(!1))}catch(i){C.current&&(n({afterSubmit:i.message}),r(!1))}}}),{errors:V,touched:T,isSubmitting:B,values:F,setFieldValue:N,handleSubmit:R,getFieldProps:Y}=W,z=(0,r.useCallback)(async()=>{try{await I()}catch(e){console.error(e)}},[I]);return(0,r.useEffect)(()=>{z()},[z]),(0,A.jsx)(o.QI,{value:W,children:(0,A.jsx)(o.lV,{autoComplete:"off",noValidate:!0,onSubmit:R,children:(0,A.jsxs)(u.A,{spacing:3,children:[V.afterSubmit&&(0,A.jsx)(c.A,{severity:"error",children:V.afterSubmit}),(0,A.jsx)(m.A,{fullWidth:!0,...Y("newPassword"),type:y?"text":"password",label:"New Password",onChange:e=>{const{value:s}=e.target,{passwordConfirmation:t}=F;N("newPassword",s),E(t!==s)},value:(null===F||void 0===F?void 0:F.newPassword)||"",error:Boolean(T.newPassword&&V.newPassword),helperText:T.newPassword&&V.newPassword,InputProps:{endAdornment:(0,A.jsx)(h.A,{position:"end",children:(0,A.jsx)(w.A,{onClick:()=>{P(e=>!e)},edge:"end",children:(0,A.jsx)(i.In,{icon:y?l.A:d.A})})})}}),(0,A.jsx)(m.A,{fullWidth:!0,...Y("passwordConfirmation"),type:"password",label:"Confirm Password",value:(null===F||void 0===F?void 0:F.passwordConfirmation)||"",onChange:e=>{const{value:s}=e.target,{newPassword:t}=F;N("passwordConfirmation",s),E(t!==s)},error:Boolean(T.passwordConfirmation&&V.passwordConfirmation),helperText:T.passwordConfirmation&&V.passwordConfirmation}),(0,A.jsx)(p.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:B,disabled:k,children:"Reset Password"})]})})})}var S=t(15285),y=t(31802);function P(e){let{onSent:s,onGetEmail:t}=e;const n=(0,v.A)(),i=(0,S.wA)(),{userList:l}=(0,S.d4)(e=>e.user),[d,h]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!0),b=a.Ik().shape({email:a.Yj().email("Email must be a valid email address").required("Email is required")});(0,r.useEffect)(()=>{h(!0),i((0,y.lo)()),h(!1)},[i]);const P=(0,o.Wx)({initialValues:{email:""},validationSchema:b,onSubmit:async(e,a)=>{let{setErrors:r,setSubmitting:i}=a;try{(async()=>{const{email:e}=P.values,t={Email:e};try{const e=await(0,x.EM)(g.p3.POST,`${f.A.auth.forgotPassword}?bypass=true`,t);200===parseInt(e.status,10)?s(!0):s(!1)}catch(a){console.log("err",a)}})(),n.current&&(s(),t(P.values.email),i(!1))}catch(o){n.current&&(r({afterSubmit:o.message}),i(!1))}}}),{errors:C,touched:k,isSubmitting:E,setFieldValue:I,handleSubmit:_,getFieldProps:W}=P;return(0,A.jsx)(o.QI,{value:P,children:(0,A.jsx)(o.lV,{autoComplete:"off",noValidate:!0,onSubmit:_,children:(0,A.jsxs)(u.A,{spacing:3,children:[C.afterSubmit&&(0,A.jsx)(c.A,{severity:"error",children:C.afterSubmit}),(0,A.jsx)(m.A,{fullWidth:!0,...W("email"),type:"email",label:"Email address",onChange:e=>{const{value:s}=e.target;I("email",s);const t=null===l||void 0===l?void 0:l.find(e=>(null===e||void 0===e?void 0:e.email)===s);j(!t)},error:Boolean(k.email&&C.email),helperText:k.email&&C.email}),(0,A.jsx)(p.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:w,loading:E,children:"Reset Password"})]})})})}}}]);
//# sourceMappingURL=3482.bc6aca6a.chunk.js.map