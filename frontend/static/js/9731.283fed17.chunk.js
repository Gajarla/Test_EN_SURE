(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[9731],{11892:(e,l)=>{l.A={width:24,height:24,body:'<g id="evaInfoOutline0"><g id="evaInfoOutline1"><g id="evaInfoOutline2" fill="currentColor"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8a8 8 0 0 1-8 8Z"/><circle cx="12" cy="8" r="1"/><path d="M12 10a1 1 0 0 0-1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-1-1Z"/></g></g></g>'}},36880:(e,l,i)=>{"use strict";i.d(l,{A:()=>h});var n=i(53536),s=i(5748),t=i(11892),o=i(96446),r=i(85865),a=i(77739),d=i(17392),c=i(88446),u=i(76412),v=i(70579);function h(e){let{links:l,action:i,heading:h,info:x,moreLink:m=[],sx:f,...j}=e;return(0,v.jsxs)(o.A,{sx:{mb:5,...f},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,v.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,v.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:h}),(0,v.jsx)(a.A,{title:x,placement:"bottom",arrow:!0,children:(0,v.jsx)(d.A,{children:(0,v.jsx)(s.In,{icon:t.A,width:25,height:25})})})]}),(0,v.jsx)(u._5,{links:l,...j})]}),i&&(0,v.jsx)(o.A,{sx:{flexShrink:0},children:i})]}),(0,v.jsx)(o.A,{sx:{mt:2},children:(0,n.isString)(m)?(0,v.jsx)(c.A,{href:m,target:"_blank",variant:"body2",children:m}):m.map(e=>(0,v.jsx)(c.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e))})]})}},69731:(e,l,i)=>{"use strict";i.r(l),i.d(l,{default:()=>L});var n=i(65043),s=i(80899),t=i(73216),o=(i(1547),i(5748)),r=i(46987),a=i(19252),d=i(12110),c=i(88911),u=i(67784),v=i(90889),h=i(86605),x=i(85865),m=i(40710),f=i(96446),j=i(74605),p=i(51962),g=i(72812),b=i(39487),A=i(86897),y=i(15285),k=i(31802),w=i(49849),C=i(70370),_=i(48407),I=i(11737),S=i(96221),R=i(36880),O=i(70579);function L(){var e;const{themeStretch:l}=(0,I.A)(),{enqueueSnackbar:i}=(0,r.dh)(),L=(0,t.Zp)(),T=(0,y.wA)(),{userList:z,appendUrl:E}=(0,y.d4)(e=>e.user),{rolesList:F,filteredRoleList:H,clientsRoleConfigList:U,error:q}=(0,y.d4)(e=>e.role),{roleConfig:B,defaultRoleConfig:V,currentRole:W}=(0,y.d4)(e=>e.role),Z=e=>{L((e=>{let l=e;return E&&(l=`${e}?${E}`),l})(e))},P=(e,l)=>{const i={...B};if(B&&e&&l&&"all"===l){var n;const l=M(e,""),s={...i[e]};null===(n=Object.keys(s))||void 0===n||n.forEach(e=>{s[e]=!l}),i[e]=s,(0,w.H1)(T,i)}else if(B&&e&&l&&"all"!==l){const n={...i[e]};n[l]=!B[e][l];const s={...n};delete s.view;0!==Object.values(s).reduce((e,l)=>e+l,0)&&(n.view=!0),i[e]=n,(0,w.H1)(T,i)}},D=(e,l)=>{let i=!1;return B&&e&&l&&(i=B[e][l]),i},M=e=>{let l=!1,i=0;return e?(Object.keys(B[e]).forEach(n=>{var s;n&&B[e][n]&&(i+=1),parseInt(null===(s=Object.keys(B[e]))||void 0===s?void 0:s.length,10)===parseInt(i,10)&&(l=!0)}),l):null},$=async()=>{(0,w.d8)(T,Y),q?i(q,{variant:"error"}):i("Update success",{variant:"success"})},G=s.Ik().shape({role:s.Yj().required("Role is required")}),N=(0,A.Wx)({enableReinitialize:!0,initialValues:{role:null===W||void 0===W?void 0:W._id,components:B&&[B]},validationSchema:G,onSubmit:async(e,l)=>{let{setSubmitting:n,setErrors:s}=l;try{await $(),n(!1);(null===z||void 0===z?void 0:z.find(l=>l.email.toLowerCase()===e.email.toLowerCase()))||(i("Create success",{variant:"success"}),Z(_.nB.user.allUsers))}catch(q){n(!1),s(q)}}}),{errors:Q,values:Y,touched:J,handleSubmit:K,isSubmitting:X,setFieldValue:ee,getFieldProps:le}=N,ie=(0,n.useCallback)(async(e,l,i)=>{const n=await(0,C.Fj)();(0,w.RL)(T,n);const s=null===e||void 0===e?void 0:e.filter(e=>!["R0001","R0002"].includes(e.roleID));if((0,w.dS)(T,s),(null===s||void 0===s?void 0:s.length)>0&&i&&(ee("role",s[0]._id),(0,w.Al)(T,s[0])),(null===n||void 0===n?void 0:n.length)>0){var t,o;let e=null===n||void 0===n?void 0:n.find(e=>{var l;return(null===e||void 0===e?void 0:e.rid)===(null===(l=s[0])||void 0===l?void 0:l._id)});l&&(ee("role",l),e=null===n||void 0===n?void 0:n.find(e=>(null===e||void 0===e?void 0:e.rid)===l)),null!==(t=e)&&void 0!==t&&t.components&&(0,w.H1)(T,null===(o=e)||void 0===o?void 0:o.components[0])}},[T,ee]),ne=(e,l)=>{const i=Object.values(B.releases).every(e=>!1===e||"false"===e),n=Object.values(B.testRuns).every(e=>!1===e||"false"===e);return"projects"===e&&"view"===l||"releaseTestCases"===e&&i||"testRunsTestCases"===e&&n};return(0,n.useEffect)(()=>{T((0,k.aU)());F||(async()=>{const e=await(0,C.Up)();(0,w.qs)(T,e),await ie(e,null,!0)})()},[T,ie,F]),(0,O.jsx)(S.A,{title:"Test Ensure",children:(0,O.jsxs)(a.A,{maxWidth:!l&&"xl",children:[(0,O.jsx)(R.A,{heading:"Role Configurator",links:[{name:"Configurator"}],info:"Test modules allow you to organize test cases inside a project just like you would organize documents using folders and sub-folders."}),(0,O.jsx)(A.QI,{value:N,children:(0,O.jsx)(A.lV,{noValidate:!0,autoComplete:"off",onSubmit:K,children:(0,O.jsxs)(d.A,{alignItems:"center",sx:{p:3,width:"100%",alignItems:"center",boxShadow:e=>e.customShadows.z8},children:[(0,O.jsx)(c.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:(0,O.jsxs)(u.A,{select:!0,fullWidth:!0,label:"Role",InputLabelProps:{shrink:!0},value:(null===W||void 0===W?void 0:W._id)||"",...le("role"),onChange:async e=>{var l,i;const n=(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)||Y.role||(null===(i=H[0])||void 0===i?void 0:i._id),s=null===F||void 0===F?void 0:F.filter(e=>e._id===n)[0];(0,w.Al)(T,s),ie(F,n);const t=null===U||void 0===U?void 0:U.find(e=>e.rid===n);t?(0,w.H1)(T,null===t||void 0===t?void 0:t.components[0]):(0,w.H1)(T,null===V||void 0===V?void 0:V.components[0])},SelectProps:{native:!0},error:Boolean(J.role&&Q.role),helperText:J.role&&Q.role,children:[(0,O.jsx)("option",{value:""},""),H&&(null===H||void 0===H?void 0:H.map(e=>(0,O.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.roleName},null===e||void 0===e?void 0:e._id)))]})}),B&&(null===(e=Object.keys(B))||void 0===e?void 0:e.map((e,l)=>{var i;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(v.A,{style:{width:"100%"},defaultExpanded:!0,classes:{root:{height:"15px"}},children:[(0,O.jsx)(h.A,{expandIcon:(0,O.jsx)(o.In,{icon:b.A,width:20,height:20}),style:{background:"#ebf8ef",borderRadius:4,marginBottom:"5px"},children:(0,O.jsx)(x.A,{variant:"subtitle1",style:{textTransform:"capitalize"},children:e})}),(0,O.jsx)(m.A,{children:(0,O.jsxs)(f.A,{sx:{display:"flex",flexDirection:"row",ml:3},children:[(0,O.jsx)(j.A,{label:"All",control:(0,O.jsx)(p.A,{disabled:"projects"===e||ne(e,null),checked:M(e,l),onChange:()=>P(e,"all")})}),B&&(null===(i=Object.keys(B[e]))||void 0===i?void 0:i.map(l=>(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(j.A,{label:l,style:{textTransform:"capitalize"},disabled:ne(e,l),control:(0,O.jsx)(p.A,{checked:D(e,l),onChange:()=>P(e,l)})})})))]})})]},e)})})),(0,O.jsx)(f.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,O.jsx)(g.A,{type:"submit",variant:"contained",loading:X,children:"Save Changes"})})]})})})]})})}}}]);
//# sourceMappingURL=9731.283fed17.chunk.js.map