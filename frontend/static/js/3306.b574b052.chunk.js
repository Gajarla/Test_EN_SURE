(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[3306],{6379:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Ie});var l=s(65043),i=s(73216),n=s(1547),o=s(30279),d=s(19252),a=s(42518),r=s(68903),u=s(79190),c=s(77739),v=s(12110),h=s(79958),m=s(96446),p=s(13559),f=s(40626),x=s(34535),g=s(90310),A=s(21454),E=s(23860),S=s(5748),C=s(15285),R=s(1068),T=s(68780),j=s(49849),b=s(98636),y=s(63257),k=s(99429),I=s(48407),N=s(11737),_=s(96221),w=s(36880),D=s(83613),U=s(53536),L=s(86178),F=s.n(L),O=s(33691),M=s(85865),$=s(67784),P=s(83462),B=s(26600),z=s(35316),H=s(29347),V=s(94109),W=s(86897),Y=s(18205),q=s(92103),Z=s(96799),G=s(41028),K=s(96094),J=s(39155),Q=s(86064),X=s(24909),ee=s(59512),te=s(86213),se=s(80899),le=s(99144),ie=s(80916),ne=s(50467),oe=s(17065),de=s(88930),ae=s(5963),re=s(56635),ue=s(77137),ce=s(95683),ve=s(70579);const he=[{id:"UNTESTED",label:"UNTESTED"},{id:"PASSED",label:"PASSED"},{id:"SKIPPED",label:"SKIPPED"},{id:"FAILED",label:"FAILED"}];function me(e){var t,s;let{testCases:n}=e;const{pathname:o}=(0,i.zy)(),d=(0,C.wA)(),{testRunId:r}=(0,i.g)(),u=o.includes("testRuns"),v=o.includes("module"),h=(0,C.d4)(e=>e.testRun),{defectList:p}=(0,C.d4)(e=>e.defect),f=null===h||void 0===h?void 0:h.rows,x=((0,C.d4)(e=>e.release),(0,C.d4)(e=>e.user.userList)),g=(0,i.g)(),{pageConfig:A,testCasesConfig:E}=(0,C.d4)(e=>e.role),[R,j]=(0,l.useState)(!1),b={...(0,C.d4)(e=>{var t;return null===(t=e.testRun)||void 0===t?void 0:t.updatedTestCases})},y=(0,C.d4)(e=>e.testRun.testCaseDetails);const k=e=>(0,ve.jsx)(c.A,{title:e,children:(0,ve.jsx)(M.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem",paddingLeft:"30%",textAlign:"center"},children:e})}),I=e=>(0,ve.jsx)(c.A,{title:e,children:(0,ve.jsx)(M.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem",textAlign:"center"},children:e})}),N=[{field:"id",hide:!0},{field:"testCaseId",headerName:"ID",disableColumnMenu:!0,align:"center",valueGetter:e=>e.getValue(e.id,"testCaseID"),flex:0,renderHeader:()=>k("ID"),renderCell:e=>{const t=e.getValue(e.id,"testCaseID"),s=e.getValue(e.id,"_id");return(0,ve.jsx)(M.A,{variant:"body2",sx:{color:"#0045ff",fontWeight:"600",cursor:"pointer"},noWrap:!0,onClick:()=>{Ae(s),Ee(s),me()},children:t})}},{field:"testCaseTitle",headerName:"Test Case",flex:1.25,disableColumnMenu:!0,align:"center",renderHeader:()=>I("Test Case"),renderCell:e=>{const t=e.getValue(e.id,"testCaseTitle");return(0,ve.jsx)(c.A,{title:t,placement:"left-start",children:(0,ve.jsxs)(M.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[t," "]})})}},{field:"suiteName",headerName:"Module",flex:1,disableColumnResize:!0,align:"center",renderHeader:()=>(0,ve.jsx)(c.A,{title:"Module",children:(0,ve.jsx)(M.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem"},children:"Module"})}),disableColumnMenu:!0,renderCell:e=>{const t=e.getValue(e.id,"suiteName");return(0,ve.jsx)(c.A,{title:t,placement:"left-start",children:(0,ve.jsxs)(M.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[t," "]})})}},{field:"priority",headerName:"Priority",disableColumnMenu:!0,renderHeader:()=>k("Priority"),flex:1,align:"center",renderCell:e=>function(e){return(0,ve.jsxs)("div",{sx:{textTransform:"capitalize",mx:"auto"},children:[(0,ve.jsx)(S.In,{icon:ee.A,color:("P1"===e?"red":"P2"===e&&"orange")||"green"}),e]})}(e.getValue(e.id,"priority")||(0,U.sample)(["P1","P2","P3"]))},{field:"automationStatus",headerName:"Automated?",flex:1,renderHeader:()=>I("Automated?"),disableColumnMenu:!0,align:"center",renderCell:e=>e.getValue(e.id,"automationStatus")?(0,ve.jsx)(m.A,{component:S.In,icon:le.A,sx:{width:20,height:20,color:"primary.main"}}):"No"},{field:"status",headerName:"Status",flex:1.25,hide:v,disableColumnMenu:!0,editable:!0,headerAlign:"center",align:"center",renderHeader:()=>k("Status"),renderCell:e=>{const t=e.getValue(e.id,"status"),s=e.getValue(e.id,"id"),l=t!==ue.Pm.UNTESTED?(0,ve.jsx)(ne.A,{variant:"ghost",color:(t===ue.Pm.FAILED?"error":t===ue.Pm.SKIPPED&&"warning")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:t}):(0,ve.jsx)(ne.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:t});return u&&null!==A&&void 0!==A&&A.edit?(0,ve.jsx)($.A,{select:!0,fullWidth:!0,value:t,SelectProps:{native:!0},onChange:e=>{j(!0),ge(e,s)},sx:{"& fieldset":{border:"0 !important"},"& select":{pl:1,py:.5,pr:"20px !important",typography:"subtitle2"},"& .MuiOutlinedInput-root":{borderRadius:.75,bgcolor:"background.neutral"},"& .MuiNativeSelect-icon":{top:4,right:0,width:20,height:20}},children:he.map(e=>(0,ve.jsx)("option",{value:e.label,children:e.label},e.id))}):l}},{field:"executionDuration",headerName:"Execution Time",renderHeader:()=>I("Execution Time"),flex:1.25,align:"center",hide:v||(null===f||void 0===f||null===(t=f.filter(e=>e.status===ue.Pm.UNTESTED))||void 0===t?void 0:t.length)===(null===f||void 0===f?void 0:f.length)||(null===f||void 0===f||null===(s=f.filter(e=>!1===e.automationStatus))||void 0===s?void 0:s.length)===(null===f||void 0===f?void 0:f.length),disableColumnMenu:!0,renderCell:e=>e.getValue(e.id,"executionDuration")}],[_,w]=(0,l.useState)(!1),[D,L]=(0,l.useState)(null),me=()=>{w(!0)},pe=se.Ik().shape({status:se.Yj().required("Status is required"),images:se.YO().min(1,"Images is required")}),fe=(0,W.Wx)({enableReinitialize:!0,initialValues:{images:[]},validationSchema:pe,onSubmit:async(e,t)=>{let{setSubmitting:s,resetForm:l,setErrors:i}=t;try{l(),s(!1)}catch(n){console.error(n),s(!1),i(n)}}}),{setFieldValue:xe}=fe,ge=(e,t)=>{const s=f.findIndex(e=>e.id===t),l=f[s];d((0,T.tv)({testcaseevidences:[],testCaseEvidencesFetched:!1})),Ee(null===l||void 0===l?void 0:l._id),xe("status",null===y||void 0===y?void 0:y.status),d((0,T.N9)({...y,testNodeID:null===l||void 0===l?void 0:l.id,testCaseId:null===l||void 0===l?void 0:l._id,moduleId:null===l||void 0===l?void 0:l.moduleId,screenShotComments:null===l||void 0===l?void 0:l.screenShotComments,status:null===l||void 0===l?void 0:l.status,testCaseResultsFile:null===l||void 0===l?void 0:l.testCaseResultsFile,selectedTestCaseStatus:e.target.value}))},Ae=e=>{const t=null===f||void 0===f?void 0:f.find(t=>t._id===e);L(t),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.SELECTED_TESTCASE,t);d((0,T.tv)({testcaseevidences:[],testCaseEvidencesFetched:!1}))},Ee=e=>{var t,s,l,i,o,a,r,u;const c=n.filter(t=>t._id===e),h=f.filter(t=>(null===t||void 0===t?void 0:t._id)===e),m={},p=[];let x,g=null;var A,E,S,C,R;if(d((0,T.h_)({})),d((0,T.Mm)({})),v||null!==(t=c[0])&&void 0!==t&&t.testStepStatuses)x=null===(A=c[0])||void 0===A?void 0:A.testStepStatuses,null===(E=c[0])||void 0===E||null===(S=E.testStepStatuses)||void 0===S||S.forEach(e=>{null!==e&&void 0!==e&&e.testStepLogsFile&&(g=null===e||void 0===e?void 0:e.testStepLogsFile),null!==e&&void 0!==e&&e.testStepResultsFile&&(g=null===e||void 0===e?void 0:e.testStepResultsFile)});else if(null!==(C=c[0])&&void 0!==C&&C.testCaseSteps)if((null===(R=c[0])||void 0===R?void 0:R.testCaseSteps.constructor)===Array){var j;const e=[];null===(j=c[0])||void 0===j||j.testCaseSteps.forEach(t=>{e.push({_id:null===t||void 0===t?void 0:t._id,status:ue.Pm.UNTESTED})}),x=e}else{var k,I;x=[{_id:null===(k=c[0])||void 0===k||null===(I=k.testCaseSteps)||void 0===I?void 0:I._id,status:ue.Pm.UNTESTED}]}const N=f.findIndex(t=>t._id===e);let _=f[N].testCaseSteps;if(v){var w;if(_)if(_ instanceof Array)_=_.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),_.forEach(e=>{p.push({_id:null===e||void 0===e?void 0:e._id,name:Re(e),description:Ce(e)})});else if(_=!Object.keys(_).includes("sleep")&&!Object.keys(_).includes("frameSwitch")&&!Object.keys(_).includes("keyBoardEvent")||Object.keys(_).includes("manual")&&_,_)p.push({_id:null===(w=_)||void 0===w?void 0:w._id,name:Re(_),description:Ce(_)});d((0,T.ZK)(p))}else{var D,U,L;if(_){var F,O,M;if(_ instanceof Array)_=_.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),_.forEach(e=>{var t;const s=null===(t=x)||void 0===t?void 0:t.findIndex(t=>t._id===(null===e||void 0===e?void 0:e._id));if(s||0===s){const t=x[s];p.push({_id:null===e||void 0===e?void 0:e._id,name:Re(e),description:Ce(e),status:null===t||void 0===t?void 0:t.status})}});else if(_=!Object.keys(_).includes("sleep")&&!Object.keys(_).includes("frameSwitch")&&!Object.keys(_).includes("keyBoardEvent")||Object.keys(_).includes("manual")&&_,_)p.push({_id:null===(O=_)||void 0===O?void 0:O._id,name:Re(_),description:Ce(_),status:null===(M=_)||void 0===M?void 0:M.status});if(p){var $;const e=null===($=h[0])||void 0===$?void 0:$.testStepStatuses;var P;if(p.constructor===Array)null===(P=Object.keys(e))||void 0===P||P.forEach(t=>{const s=p.findIndex(e=>(null===e||void 0===e?void 0:e._id)===t);s>=0&&(p[s]={...p[s],status:e[t]})})}d((0,T.ZK)(p)),null===(F=x)||void 0===F||F.forEach(e=>{m[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.log}),d((0,T.Mm)(m))}let t,s;var B,z,H;if(null!==(D=c[0])&&void 0!==D&&D.testCaseResultsFile)t=null===(B=c[0])||void 0===B?void 0:B.testCaseResultsFile;else b&&b[e]&&(t=b[e]);if(null!==(U=c[0])&&void 0!==U&&U.testCaseLogsFile)s=null===(z=c[0])||void 0===z?void 0:z.testCaseLogsFile;else b&&b[e]&&(s=b[e]);if(null!==(L=c[0])&&void 0!==L&&L.testCaseLogsFile)s=null===(H=c[0])||void 0===H?void 0:H.testCaseLogsFile;if(d((0,T.h_)({})),t)je(t),s&&be(s);else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};d((0,T.tv)(e))}}if(g){var V;const e=null===(V=g)||void 0===V?void 0:V.split(/[\\/]/),t=e[1],s=e[2],l=e[3];Te({jobId:t,moduleId:s,testNodeId:l})}d((0,T.N9)({...y,testNodeID:null===(s=c[0])||void 0===s?void 0:s.id,testCaseId:null===(l=c[0])||void 0===l?void 0:l._id,moduleId:null===(i=c[0])||void 0===i?void 0:i.moduleId,screenShotComments:null===(o=c[0])||void 0===o?void 0:o.screenShotComments,status:null===(a=h[0])||void 0===a?void 0:a.status,testCaseResultsFile:null===(r=c[0])||void 0===r?void 0:r.testCaseResultsFile,dateStatusLastUpdated:null===(u=h[0])||void 0===u?void 0:u.dateStatusLastUpdated}))},Se=(e,t)=>{let s;return Object.keys(e).some(l=>l===t?(s=e[l],!0):e[l]&&"object"===typeof e[l]?(s=Se(e[l],t),void 0!==s):s),s},Ce=e=>{let t;const s=Object.keys(e)[1],l=Se(e,"testStepDescription"),i=Se(e,"expected");return t=l||(i||s),t},Re=e=>Object.keys(e)[1],Te=async e=>{if(e){const o={},a={};d((0,T.ag)(!1));try{var t;const n=await(0,te.A)({method:"post",url:`${de.A.testRun.getTestResultFiles}`,data:e,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}});if(200===(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.status)){var s,l,i;const e=null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data;null===e||void 0===e||null===(l=e.screens)||void 0===l||l.forEach(e=>{null!==e&&void 0!==e&&e.testscreenshotfile&&(o[null===e||void 0===e?void 0:e.testStepId]=null===e||void 0===e?void 0:e.testscreenshotfile)}),null===e||void 0===e||null===(i=e.logs)||void 0===i||i.forEach(e=>{null!==e&&void 0!==e&&e.testlogfile&&(a[null===e||void 0===e?void 0:e.testStepId]=[null===e||void 0===e?void 0:e.testlogfile])})}0!==(null===o||void 0===o?void 0:o.length)&&d((0,T.h_)(o)),0!==(null===a||void 0===a?void 0:a.length)&&d((0,T.Mm)(a)),d((0,T.ag)(!0))}catch(n){d((0,T.ag)(!0))}}},je=async e=>{const t={};if(e)try{var s;const n=await(0,te.A)({method:"get",url:`${de.A.testRun.getTestCaseResults(e)}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}});let o,a,r,u=[];if((null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.length)>0){var l,i;if(o=null===n||void 0===n?void 0:n.data.split("**TestResults**"),o&&(a=o[0].split(" "),a=a.filter(e=>""!==e.trim()),o[1]&&(r=o[1].split("&&"),r=r.filter(e=>""!==e.trim()))),(null===(l=a)||void 0===l?void 0:l.length)>0){u=[],a.forEach(e=>{e.trim()&&u.push(e.trim())});const e={testcaseevidences:u,testCaseEvidencesFetched:!0};d((0,T.tv)(e))}if((null===(i=r)||void 0===i?void 0:i.length)>0){r.filter(e=>""!==e.trim()).forEach(e=>{const s=e.split(" ").filter(e=>""!==e.trim()),l=s[0].trim(),i=s.slice(1).map(e=>e.trim());if(t[l]){if(i.constructor===Array&&t[l].constructor===Array)t[l]=[...t[l],...i];else if(i.constructor===Array&&t[l].constructor!==Array){const e=[...i];e.push(t[l]),t[l]=e}else if(i.constructor!==Array&&t[l].constructor===Array){const e=[...t[l]];e.push(i),t[l]=e}}else t[l]=i}),d((0,T.h_)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};d((0,T.tv)(e))}}catch(n){console.log("error = ",n)}},be=async e=>{const t={};if(e)try{var s;const l=await(0,te.A)({method:"get",url:`${de.A.testRun.getTestCaseLogs(e)}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}});let i,n,o,a=[];if((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.length)>0){if(i=null===l||void 0===l?void 0:l.data.split("**TestResults**"),i&&(n=i[0].split(" "),n=n.filter(e=>""!==e.trim()),i[1]&&(o=i[1].split("&&"),o=o.filter(e=>""!==e.trim()))),n){a=[],n.forEach(e=>{e.trim()&&a.push(e.trim())});const e={testcaseevidences:a,testCaseEvidencesFetched:!0};d((0,T.Mm)(e))}if(o){o.filter(e=>""!==e.trim()).forEach(e=>{const s=e.split(" ").filter(e=>""!==e.trim()),l=s[0].trim(),i=s.slice(1).map(e=>e.trim());if(t[l]){if(i.constructor===Array&&t[l].constructor===Array)t[l]=[...t[l],...i];else if(i.constructor===Array&&t[l].constructor!==Array){const e=[...i];e.push(t[l]),t[l]=e}else if(i.constructor!==Array&&t[l].constructor===Array){const e=[...t[l]];e.push(i),t[l]=e}}else t[l]=i}),d((0,T.Mm)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};d((0,T.tv)(e))}}catch(l){console.log("error = ",l)}};(0,l.useEffect)(()=>{d((0,T.mU)(""))},[d]);const ye=()=>{const[e,t]=(0,l.useState)(!1),[s,i]=(0,l.useState)({includeLogs:!0,includeScreenshots:!0});return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(a.A,{onClick:async()=>{var e,l,i,n,o,d,a,r,u,c,v;let m,A,E,S={};const C=(e=>{const t=[];let s,l,i;for(let C=0;C<e.length;C+=1){var n,o,d,a,r,u,c,v,h;const R=[],T=[],j=[],b=[];if(i=0,(null===(n=e[C])||void 0===n?void 0:n.testCaseSteps.length)>0)for(let t=0;t<e[C].testCaseSteps.length;t+=1){var m,f,x,g,A,E,S;s=Se(e[C].testCaseSteps[t],"testStepDescription"),void 0!==s&&(R.push(s),i+=1,b.push(i),(null===(m=e[C])||void 0===m||null===(f=m.testStepStatuses)||void 0===f?void 0:f.length)>0&&(null!==(x=e[C].testStepStatuses[t])&&void 0!==x&&x.status&&T.push(e[C].testStepStatuses[t].status),(null===(g=e[C].testStepStatuses[t])||void 0===g?void 0:g.status)===ue.Pm.FAILED?j.push({text:`View Issue - ${null===(A=p[0])||void 0===A||null===(E=A.defectTrack)||void 0===E?void 0:E.key}`,hyperlink:null===(S=p[0])||void 0===S?void 0:S.defectUrl}):j.push("")))}l={testCaseID:null===(o=e[C])||void 0===o?void 0:o.testCaseID,testCaseTitle:null===(d=e[C])||void 0===d?void 0:d.testCaseTitle,testCaseDescription:null===(a=e[C])||void 0===a?void 0:a.testCaseDescription,suiteName:null===(r=e[C])||void 0===r?void 0:r.suiteName,status:null===(u=e[C])||void 0===u?void 0:u.status,executionDuration:null===(c=e[C])||void 0===c?void 0:c.executionDuration,tags:null===(v=e[C])||void 0===v?void 0:v.tags,automationStatus:null===(h=e[C])||void 0===h?void 0:h.automationStatus,testCaseSteps:R,testStepStatuses:T,stepNumbers:b,issueLink:j},t.push(l)}return t})(f);if(g.releaseId)try{var R,T;const[e,t]=await Promise.all([(0,te.A)({method:"get",url:`${de.A.releases.getExecutingReleasesData(g.releaseId)}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}}),(0,te.A)({method:"get",url:`${de.A.testRun.getLatestTestRunUser(g.releaseId,"release")}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}})]);m=null===e||void 0===e||null===(R=e.data)||void 0===R?void 0:R.data[0],A=null===t||void 0===t||null===(T=t.data)||void 0===T?void 0:T.data,E=m.runningStatus}catch(y){console.log("error = ",y)}if(g.testRunId){if(m=null===h||void 0===h?void 0:h.currentTestRun,m)A=x.find(e=>{var t;return(null===e||void 0===e?void 0:e._id)===(null===(t=m)||void 0===t?void 0:t.createdBy)}),A=`${A.firstName} ${A.lastName}`;else try{var j,b;const[e,t]=await Promise.all([(0,te.A)({method:"get",url:`${de.A.testRun.getJiraJobsStatusUpdate(g.testRunId)}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}}),(0,te.A)({method:"get",url:`${de.A.testRun.getLatestTestRunUser(g.testRunId,"job")}`,headers:{Authorization:`Bearer ${(0,ae.qt)("accessToken")}`}})]);m=null===e||void 0===e||null===(j=e.data)||void 0===j?void 0:j.data[0],A=null===t||void 0===t||null===(b=t.data)||void 0===b?void 0:b.data}catch(y){console.log("error = ",y)}E=m.runningStatus}if(S={releaseName:null===(e=m)||void 0===e?void 0:e.releaseName,testRunName:null===(l=m)||void 0===l?void 0:l.testRun,user:A||"",total:(null===(i=m)||void 0===i?void 0:i.total)||0,passed:(null===(n=m)||void 0===n?void 0:n.passed)||0,failed:(null===(o=m)||void 0===o?void 0:o.failed)||0,untested:(null===(d=m)||void 0===d?void 0:d.untested)||0,skipped:(null===(a=m)||void 0===a?void 0:a.skipped)||0,blocked:(null===(r=m)||void 0===r?void 0:r.blocked)||0,executionDuration:(null===(u=m)||void 0===u?void 0:u.executionDuration)||"",executionStart:F()(null===(c=m)||void 0===c?void 0:c.executionStart).format("MMMM Do YYYY, h:mm:ss A")||"",executionEnd:F()(null===(v=m)||void 0===v?void 0:v.executionEnd).format("MMMM Do YYYY, h:mm:ss A")||"",jobStatus:E},"Completed"===S.jobStatus){const e={details:C,summary:S,defectList:p};(0,ie.p3)(e,s)}else t(!0)},variant:"text",startIcon:(0,ve.jsx)(G.U_,{}),children:"Export"}),(0,ve.jsxs)(P.A,{open:e,onClose:()=>t(!1),children:[(0,ve.jsx)(B.A,{style:{marginBottom:"16px"},children:"Cannot Download"}),(0,ve.jsxs)(z.A,{children:[(0,ve.jsx)("span",{role:"img","aria-label":"warning",style:{color:"red",fontWeight:"bold"},children:"\u26a0\ufe0f"})," ",(0,ve.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:"Test Run is still under execution. Please wait until it completes."})]}),(0,ve.jsx)(H.A,{children:(0,ve.jsx)(a.A,{onClick:()=>t(!1),color:"secondary",children:"Ok"})})]})]})};return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(X.z,{rows:f,columns:N,pagination:!0,pageSize:10,components:{Toolbar:()=>(0,ve.jsxs)(K.b,{children:[(0,ve.jsx)(J.j,{}),(0,ve.jsx)(Q.Q,{}),(0,ve.jsx)(ye,{})," "]}),Pagination:function(){const e=(0,Y.h)(),t=(0,q.N)(e,Z.$i),s=(0,q.N)(e,Z.ij),l=(0,q.N)(e,Z.O),i=e.current.getAllRowIds(),n=new Set;i.forEach(t=>{const s=e.current.getRow(t);null!==s&&void 0!==s&&s.testCaseID&&n.add(s.testCaseID)});const o=n.size;let d=l;return o>0&&(d=Math.ceil(o/s)),(0,ve.jsx)(O.A,{color:"primary",count:d,page:t+1,onChange:(t,s)=>e.current.setPage(s-1)})}}}),(0,ve.jsx)(V.Ay,{open:_,onClose:()=>{w(!1)},anchor:"right",PaperProps:{sx:{width:{xs:1,sm:"60%"}}},children:(0,ve.jsx)(oe.default,{testCase:D,testRunId:r,fromModules:v,getTestCaseResults:je,setOpenDetails:w,rows:f})}),R&&(0,ve.jsx)(re.A,{open:R,setOpen:j,testCase:D,getTestCaseResults:je,testRunId:r})]})}var pe=s(22019),fe=s(88911),xe=s(26240),ge=s(69092),Ae=s(73338),Ee=s(66247);const Se=(0,x.Ay)(v.A)(e=>{let{theme:t}=e;return{padding:t.spacing(2.3,2.5),backgroundColor:"#f4f6f8"}});const Ce=[20,10,50,10,10];function Re(e){let{label:t,number:s,total:l,color:i}=e;return(0,ve.jsxs)(fe.A,{direction:"row",alignItems:"center",spacing:1,sx:{mt:"8px !important"},children:[(0,ve.jsx)(m.A,{sx:{width:25,height:25,bgcolor:"grey.50016",borderRadius:.75,bgcolor:i}}),(0,ve.jsxs)(m.A,{sx:{flexGrow:1},children:[(0,ve.jsxs)(M.A,{variant:"subtitle2",children:[s,"\xa0",t]}),(0,ve.jsxs)(M.A,{variant:"caption",sx:{mt:0,display:"flex",alignItems:"center",color:"text.secondary"},children:[0===l?0:parseInt(s/l*100,10),"% set to be ",t]})]})]})}function Te(e){let{executionDuration:t}=e;const s=(0,xe.A)(),[i,n]=(0,l.useState)([]),[o,d]=(0,l.useState)(),{currentGraphTestCounts:a}=(0,C.d4)(e=>e.release),u=(0,U.merge)((0,Ee.jY)(),{colors:["#36AB51","#F44B25","#9A9B9C","#16ABC5","#FFAA00"],labels:["Passed","Failed","Untested","Blocked","Skipped"],stroke:{colors:[s.palette.background.paper],width:0},legend:{show:!1},dataLabels:{enabled:!0,dropShadow:{enabled:!1}},tooltip:{fillSeriesColor:!1,y:{formatter:e=>(0,Ae.kB)(e),title:{formatter:e=>`${e}`}}},plotOptions:{pie:{donut:{labels:{show:!1}}}},chart:{id:"testCaseCounts"}});(0,l.useEffect)(()=>{const e={};e.passed=parseInt(null===a||void 0===a?void 0:a.passed,10),e.failed=parseInt(null===a||void 0===a?void 0:a.failed,10),e.untested=parseInt(null===a||void 0===a?void 0:a.untested,10),e.blocked=parseInt(null===a||void 0===a?void 0:a.blocked,10),e.skipped=parseInt(null===a||void 0===a?void 0:a.skipped,10),e.total=parseInt(null===a||void 0===a?void 0:a.total,10),d(e);const t=[parseInt(null===a||void 0===a?void 0:a.passed,10),parseInt(null===a||void 0===a?void 0:a.failed,10),parseInt(null===a||void 0===a?void 0:a.untested,10),parseInt(null===a||void 0===a?void 0:a.blocked,10),parseInt(null===a||void 0===a?void 0:a.skipped,10)];n(t)},[a]),(0,l.useEffect)(()=>{u.chart.id=Math.random},[u]);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(Se,{children:(0,ve.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,ve.jsx)(r.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,ve.jsx)(M.A,{variant:"overline",sx:{color:"text.secondary"},children:"Run Status"})}),(0,ve.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,ve.jsx)(pe.A,{type:"pie",series:i||Ce,options:u,height:320,width:320})}),(0,ve.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,ve.jsx)(ge.A,{children:(0,ve.jsxs)(fe.A,{spacing:3,sx:{p:3},children:[(0,ve.jsxs)(m.A,{sx:{flexGrow:1},children:[(0,ve.jsxs)(M.A,{variant:"subtitle2",sx:{fontSize:"1.2rem",fontWeight:"700",lineHeight:"1"},children:[(c=null===o||void 0===o?void 0:o.passed,v=null===o||void 0===o?void 0:o.total,parseInt(c/v*100,10)),"% Completed",t?`(${t})`:""]}),(0,ve.jsxs)(M.A,{variant:"caption",sx:{ml:1,display:"flex",alignItems:"center",color:"text.secondary"},children:[((e,t)=>parseInt(t-e,10))(null===o||void 0===o?void 0:o.passed,null===o||void 0===o?void 0:o.total)," of ",null===o||void 0===o?void 0:o.total," remaining"]})]}),(0,ve.jsx)(Re,{label:"Passed",number:null===o||void 0===o?void 0:o.passed,total:null===o||void 0===o?void 0:o.total,color:"#36AB51"}),(0,ve.jsx)(Re,{label:"Failed",number:null===o||void 0===o?void 0:o.failed,total:null===o||void 0===o?void 0:o.total,color:"#F44B25"}),(0,ve.jsx)(Re,{label:"Untested",number:null===o||void 0===o?void 0:o.untested,total:null===o||void 0===o?void 0:o.total,color:"#9A9B9C"}),(0,ve.jsx)(Re,{label:"Blocked",number:null===o||void 0===o?void 0:o.blocked,total:null===o||void 0===o?void 0:o.total,color:"#16ABC5"}),(0,ve.jsx)(Re,{label:"Skipped",number:null===o||void 0===o?void 0:o.skipped,total:null===o||void 0===o?void 0:o.total,color:"#FFAA00"})]})})})]})})});var c,v}var je=s(32393);const be=(0,x.Ay)(p.G)({height:240,flexGrow:1,maxWidth:400});function ye(e){const t=(0,n.zh)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:`translate3d(${e.in?0:20}px,0,0)`}});return(0,ve.jsx)(n.CS.div,{style:t,children:(0,ve.jsx)(o.A,{...e})})}const ke=(0,x.Ay)(e=>(0,ve.jsx)(f.y,{...e,TransitionComponent:ye}))(e=>{let{theme:t}=e;return{iconContainer:{"& .close":{opacity:.3}},group:{marginLeft:15,paddingLeft:18,borderLeft:`1px dashed ${(0,g.X4)(t.palette.text.primary,.4)}`},label:{whiteSpace:"nowrap",width:"auto",overflow:"hidden",textOverflow:"ellipsis",fontSize:"1rem !important",lineHeight:"2 !important",fontWeight:"500 !important"}}});function Ie(){const e=(0,i.Zp)(),{themeStretch:t}=(0,N.A)(),s=(0,C.wA)(),{pathname:n}=(0,i.zy)(),o=n.includes("testRuns"),{releaseId:p,testRunId:f}=(0,i.g)(),{appendUrl:x}=(0,C.d4)(e=>e.user),{executionDuration:g,moduleData:U,fetchReleaseData:L}=(0,C.d4)(e=>e.release),{roleConfig:F}=(0,C.d4)(e=>e.role),{currentTestRun:O,testRunList:M}=(0,C.d4)(e=>e.testRun),[$,P]=(0,l.useState)([]),[B,z]=(0,l.useState)(null),[H,V]=(0,l.useState)("Test Cases"),[W]=(0,l.useState)(!1),Y=(0,l.useRef)(null),q=(0,l.useRef)(null),Z=(0,l.useRef)(null),G=e=>x?`${e}?${x}`:e,K=t=>{e(G(t))},J=(0,l.useCallback)(async e=>{try{s((0,T.rT)(e))}catch(t){console.error(t)}},[s]),Q=(0,l.useCallback)(async e=>{try{s((0,R.ir)(e))}catch(t){console.error(t)}},[s]),X=(0,l.useCallback)(async e=>{try{s((0,R.aK)(e))}catch(t){console.error(t)}},[s]),ee=(0,l.useCallback)((e,t)=>{if(!e)return;let l=t,i=null;t.includes("_")&&([l,i]=t.split("_"));const n=e.find(e=>e._id.toString()===l.toString());if(!n)return;let o=[],d=[];if(i){var a;const e=null===(a=n.testPlaceholders)||void 0===a?void 0:a.find(e=>e.tpId===i);e&&(o=e.testNodes||[],d=e.testNodes||[])}else o=n.testNodes||[],d=n.testNodes||[];(0,R.h9)(s,n.executionDuration),P(o),s((0,R.lq)(d)),s((0,R.Wt)([])),J(d),z(n),Q(n.graphTestCases),X(n.graphTestCases)},[s,J,Q,X]),te=(0,l.useCallback)(async()=>{var e,t,l;let i;if(L){var n,o,d,a;if((0,R.UE)(s,!1),p)i=await(0,y.A0)(p);else if(f){i=await(0,k.qp)(f);const e=null===M||void 0===M?void 0:M.find(e=>e._id===f);(0,T.TV)(s,e)}Y.current=i,null!==(n=i)&&void 0!==n&&n.releaseName&&V(null===(o=i)||void 0===o?void 0:o.releaseName),(0,R.B$)(s,null===(d=i)||void 0===d?void 0:d.modules),Z.current=null===(a=i)||void 0===a?void 0:a.releaseId}Y.current=i,null!==(e=i)&&void 0!==e&&e.releaseName&&V(null===(t=i)||void 0===t?void 0:t.releaseName),(0,R.B$)(s,(null===(l=i)||void 0===l?void 0:l.modules)||[])},[]),se=(0,l.useCallback)(()=>{n.includes("testCaseDetails")||((0,ce.n5)(ue.mc.TESTRUN,ue.Rk.TESTSTEP_RESULTS),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.EVIDENCES_FETCHED),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.TESTSTEP_DETAILS),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.TESTSTEP_LOGS),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.CURRENT_FUNCTION),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.TESTCASE_EVIDENCES_FECTHED),s((0,T.tv)({testcaseevidences:[],testCaseEvidencesFetched:!1})))},[s,n]);(0,l.useEffect)(()=>{F&&0!==Object.keys(F).length&&(o?((0,j.Cr)(s,F.testRuns),(0,j.mj)(s,F.testRunsTestCases)):((0,j.Cr)(s,F.releases),(0,j.mj)(s,F.releaseTestCases)))},[s,F,o]),(0,l.useEffect)(()=>{se(),(0,R.h9)(s,null),te()},[s,te]),(0,l.useEffect)(()=>{U&&(p?(ee(U,p),(0,ce.n5)(ue.mc.MODULE,ue.Rk.CURRENT_MODULE,null),(0,ce.n5)(ue.mc.RELEASE,ue.Rk.CURRENT_RELEASE,{_id:p}),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.CURRENT_TESTRUN,null),(0,ae.ou)(ue.Rk.CURRENT_MODULE,null),(0,ae.ou)(ue.Rk.CURRENT_RELEASE,JSON.stringify({_id:p})),(0,ae.ou)(ue.Rk.CURRENT_TESTRUN,null)):f&&(ee(U,f),(0,ce.n5)(ue.mc.MODULE,ue.Rk.CURRENT_MODULE,null),(0,ce.n5)(ue.mc.RELEASE,ue.Rk.CURRENT_RELEASE,null),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.CURRENT_TESTRUN,{_id:f}),(0,ae.ou)(ue.Rk.CURRENT_MODULE,null),(0,ae.ou)(ue.Rk.CURRENT_RELEASE,null),(0,ae.ou)(ue.Rk.CURRENT_TESTRUN,JSON.stringify({_id:f}))))},[U,p,f,ee]),(0,l.useEffect)(()=>{p&&(0,b.wm)(s,p,null),f&&(0,b.wm)(s,null===O||void 0===O?void 0:O.releaseID,f)},[s,p,null===O||void 0===O?void 0:O.releaseID,f]),(0,l.useEffect)(()=>{const e=["completed","aborted","manual"],t=setInterval(()=>{var t,s,l;null!==(t=Y.current)&&void 0!==t&&t.runningStatus&&!e.includes(null===(s=Y.current)||void 0===s||null===(l=s.runningStatus)||void 0===l?void 0:l.toLowerCase())&&q.current&&q.current.click()},"15000");return()=>clearInterval(t)},[Y]);return(0,ve.jsx)(_.A,{title:"Test Ensure",children:(0,ve.jsxs)(d.A,{maxWidth:!t&&"xl",children:[(0,ve.jsx)(w.A,{heading:o?"Test Runs - Test Cases":"Release - Test Cases",links:[{name:o?"Test Runs":"All Releases",href:G(o?I.nB.testRuns.allTestRuns:I.nB.release.allReleases)},{name:H}],info:o?"Test Runs- This has the details of the the particular test run with the testcase status, screenshots and logs":"Release-TestCases-This has the details of particular release with number of modules added and the testcases",action:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(a.A,{ref:q,onClick:()=>{(0,R.h9)(s,null),(0,R.UE)(s,!0),te(),p?(ee(U,p),(0,ce.n5)(ue.mc.MODULE,ue.Rk.CURRENT_MODULE,null),(0,ce.n5)(ue.mc.RELEASE,ue.Rk.CURRENT_RELEASE,{_id:p}),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.CURRENT_TESTRUN,null)):f&&(ee(U,f),(0,ce.n5)(ue.mc.MODULE,ue.Rk.CURRENT_MODULE,null),(0,ce.n5)(ue.mc.RELEASE,ue.Rk.CURRENT_RELEASE,null),(0,ce.n5)(ue.mc.TESTRUN,ue.Rk.CURRENT_TESTRUN,{_id:f}))},variant:"contained",size:"small",startIcon:(0,ve.jsx)(S.In,{icon:E.A}),children:"Refresh"})," ",(0,ve.jsx)(a.A,{disabled:W,onClick:()=>{O?K(`${I.nB.release.root}/${null===O||void 0===O?void 0:O.releaseID}/releaseDashboard`):(p&&K(`${I.nB.release.root}/${p}/releaseDashboard`),Z.current&&K(`${I.nB.release.root}/${Z.current}/releaseDashboard`))},variant:"contained",startIcon:(0,ve.jsx)(S.In,{icon:A.A}),sx:{backgroundColor:"#0027b7"},size:"small",children:"Dashboard"})]})}),("Test Cases"===H||0===parseInt(null===$||void 0===$?void 0:$.length,10))&&(0,ve.jsx)(je.A,{}),"Test Cases"!==H&&0!==parseInt(null===$||void 0===$?void 0:$.length,10)&&(0,ve.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,ve.jsx)(r.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,ve.jsx)(Te,{executionDuration:g})}),(0,ve.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,ve.jsx)(D.e,{title:"Modules",sx:{minHeight:"745px"},children:(0,ve.jsx)(r.Ay,{sx:{overflow:"hidden",overflowY:""+((null===U||void 0===U?void 0:U.length)>13?"scroll":"hidden"),scrollbarWidth:""+((null===U||void 0===U?void 0:U.length)>13?"thin":"none")},children:(0,ve.jsx)(be,{defaultExpanded:["1"],defaultSelected:"moduleId",style:{minHeight:"700px"},children:(0,ve.jsx)(ke,{nodeId:"1",label:"All modules",onClick:()=>ee(U,p||f),children:null===U||void 0===U?void 0:U.map(e=>{var t;return e.suiteName&&(0,ve.jsx)(ke,{nodeId:e._id,label:e.suiteName,onClick:()=>ee(U,e._id),children:n.includes("release")&&(null===e||void 0===e||null===(t=e.testPlaceholders)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e?void 0:e.testPlaceholders.map((t,s)=>{const l=Object.keys(t).map(e=>(0,ve.jsx)(u.A,{sx:{"& .MuiInputBase-input":{overflow:"hidden",textOverflow:"ellipsis"}},children:`${e} :${t[e]}`},`${e} :${t[e]}`));return(0,ve.jsx)(c.A,{title:l,placement:"left-start",children:(0,ve.jsx)("div",{children:(0,ve.jsx)(ke,{nodeId:null===t||void 0===t?void 0:t.tpId,label:`TestData ${s+1}`,onClick:()=>ee(U,`${e._id}_${null===t||void 0===t?void 0:t.tpId}`)},`${s+1}`)})},`${s+1}`)}))},e._id)})})})})})}),(0,ve.jsx)(r.Ay,{item:!0,xs:12,md:9,children:(0,ve.jsxs)(v.A,{sx:{p:1},children:[(0,ve.jsx)(h.A,{title:(null===B||void 0===B?void 0:B.suiteName)||(null===B||void 0===B?void 0:B.moduleName)||"All Modules",sx:{mb:1}}),$&&(0,ve.jsx)(m.A,{sx:{height:720},children:(0,ve.jsx)(me,{testCases:$})})]})})]})]})})}},21454:(e,t)=>{t.A={width:24,height:24,body:'<g id="evaFileTextOutline0"><g id="evaFileTextOutline1"><g id="evaFileTextOutline2" fill="currentColor"><path d="M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2Zm-6-2h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2Z"/><path d="m19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67ZM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85Zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5Z"/></g></g></g>'}},23860:(e,t)=>{t.A={width:24,height:24,body:'<g id="evaRefreshFill0"><g id="evaRefreshFill1"><path id="evaRefreshFill2" fill="currentColor" d="M20.3 13.43a1 1 0 0 0-1.25.65A7.14 7.14 0 0 1 12.18 19A7.1 7.1 0 0 1 5 12a7.1 7.1 0 0 1 7.18-7a7.26 7.26 0 0 1 4.65 1.67l-2.17-.36a1 1 0 0 0-1.15.83a1 1 0 0 0 .83 1.15l4.24.7h.17a1 1 0 0 0 .34-.06a.33.33 0 0 0 .1-.06a.78.78 0 0 0 .2-.11l.09-.11c0-.05.09-.09.13-.15s0-.1.05-.14a1.34 1.34 0 0 0 .07-.18l.75-4a1 1 0 0 0-2-.38l-.27 1.45A9.21 9.21 0 0 0 12.18 3A9.1 9.1 0 0 0 3 12a9.1 9.1 0 0 0 9.18 9A9.12 9.12 0 0 0 21 14.68a1 1 0 0 0-.7-1.25Z"/></g></g>'}},36880:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var l=s(53536),i=s(5748),n=s(11892),o=s(96446),d=s(85865),a=s(77739),r=s(17392),u=s(88446),c=s(76412),v=s(70579);function h(e){let{links:t,action:s,heading:h,info:m,moreLink:p=[],sx:f,...x}=e;return(0,v.jsxs)(o.A,{sx:{mb:5,...f},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,v.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,v.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:h}),(0,v.jsx)(a.A,{title:m,placement:"bottom",arrow:!0,children:(0,v.jsx)(r.A,{children:(0,v.jsx)(i.In,{icon:n.A,width:25,height:25})})})]}),(0,v.jsx)(c._5,{links:t,...x})]}),s&&(0,v.jsx)(o.A,{sx:{flexShrink:0},children:s})]}),(0,v.jsx)(o.A,{sx:{mt:2},children:(0,l.isString)(p)?(0,v.jsx)(u.A,{href:p,target:"_blank",variant:"body2",children:p}):p.map(e=>(0,v.jsx)(u.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e))})]})}},66247:(e,t,s)=>{"use strict";function l(){return{chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:"#888"},tooltip:{enabled:!0,style:{fontSize:"12px",fontFamily:void 0}},legend:{show:!0,position:"bottom",fontSize:"14px",markers:{width:12,height:12,radius:12}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},grid:{show:!1},xaxis:{labels:{show:!0,rotate:0,trim:!0}},yaxis:{show:!0}}}s.d(t,{jY:()=>l});s(53536),s(22019),s(70579);s(73338)},83613:(e,t,s)=>{"use strict";s.d(t,{e:()=>d});var l=s(12110),i=s(79958),n=s(96446),o=s(70579);function d(e){let{title:t,sx:s,children:d}=e;return(0,o.jsxs)(l.A,{sx:{overflow:"unset",position:"unset",width:"100%"},children:[t&&(0,o.jsx)(i.A,{title:t}),(0,o.jsx)(n.A,{sx:{p:3,minHeight:400,...s},children:d})]})}}}]);
//# sourceMappingURL=3306.b574b052.chunk.js.map