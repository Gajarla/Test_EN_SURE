(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[510],{18577:(e,t)=>{t.A={width:24,height:24,body:'<g id="evaPlusFill0"><g id="evaPlusFill1"><path id="evaPlusFill2" fill="currentColor" d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z"/></g></g>'}},22623:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ye});var s=i(65043),l=i(73216),n=i(35475),o=(i(1547),i(5748)),d=i(18577),a=i(12110),r=i(19252),u=i(42518),c=i(68903),v=i(88911),h=i(85865),m=i(79958),x=i(96446),p=i(13559),f=i(40626),g=i(34535),A=i(90310),j=i(69525),y=i(33211),C=i(15285),S=i(31802),b=i(8525),k=i(68780),T=i(48407),w=i(11737),I=i(96221),E=i(36880),_=i(83613),N=i(53536),R=i(86178),M=i.n(R),D=i(33691),P=i(77739),F=i(67784),z=i(83462),L=i(26600),O=i(35316),B=i(29347),$=i(94109),U=i(86897),W=i(18205),q=i(92103),H=i(96799),V=i(41028),Y=i(96094),K=i(39155),G=i(86064),X=i(24909),Z=i(59512),J=i(86213),Q=i(80899),ee=i(99144),te=i(80916),ie=i(50467),se=i(17065),le=i(88930),ne=i(5963),oe=i(56635),de=i(77137),ae=i(95683),re=i(70579);const ue=[{id:"UNTESTED",label:"UNTESTED"},{id:"PASSED",label:"PASSED"},{id:"SKIPPED",label:"SKIPPED"},{id:"FAILED",label:"FAILED"}];function ce(e){var t,i;let{testCases:n,page:d,pageSize:a,onPageChange:r,count:c}=e;const{pathname:v}=(0,l.zy)(),m=(0,C.wA)(),{testRunId:p}=(0,l.g)(),f=v.includes("testRuns"),g=v.includes("module"),A=(0,C.d4)(e=>e.testRun),j=null===A||void 0===A?void 0:A.rows,y=((0,C.d4)(e=>e.release),(0,C.d4)(e=>e.user.userList)),S=(0,l.g)(),{pageConfig:b,testCasesConfig:T}=(0,C.d4)(e=>e.role),[w,I]=(0,s.useState)(!1),E={...(0,C.d4)(e=>{var t;return null===(t=e.testRun)||void 0===t?void 0:t.updatedTestCases})},_=(0,C.d4)(e=>e.testRun.testCaseDetails);const R=e=>(0,re.jsx)(P.A,{title:e,children:(0,re.jsx)(h.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem",paddingLeft:"30%",textAlign:"center"},children:e})}),ce=e=>(0,re.jsx)(P.A,{title:e,children:(0,re.jsx)(h.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem",textAlign:"center"},children:e})}),ve=[{field:"id",hide:!0},{field:"testCaseId",headerName:"ID",disableColumnMenu:!0,align:"center",valueGetter:e=>e.getValue(e.id,"testCaseID"),flex:0,renderHeader:()=>R("ID"),renderCell:e=>{const t=e.getValue(e.id,"testCaseID"),i=e.getValue(e.id,"_id");return(0,re.jsx)(h.A,{variant:"body2",sx:{color:"#0045ff",fontWeight:"600",cursor:"pointer"},noWrap:!0,onClick:()=>{Ce(i),Se(i),fe()},children:t})}},{field:"testCaseTitle",headerName:"Test Case",flex:1.25,disableColumnMenu:!0,align:"center",renderHeader:()=>ce("Test Case"),renderCell:e=>{const t=e.getValue(e.id,"testCaseTitle");return(0,re.jsx)(P.A,{title:t,placement:"left-start",children:(0,re.jsxs)(h.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[t," "]})})}},{field:"suiteName",headerName:"Module",flex:1,disableColumnResize:!0,align:"center",renderHeader:()=>(0,re.jsx)(P.A,{title:"Module",children:(0,re.jsx)(h.A,{style:{fontWeight:"600",width:"100%",fontSize:"0.8rem"},children:"Module"})}),disableColumnMenu:!0,renderCell:e=>{const t=e.getValue(e.id,"suiteName");return(0,re.jsx)(P.A,{title:t,placement:"left-start",children:(0,re.jsxs)(h.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[t," "]})})}},{field:"priority",headerName:"Priority",disableColumnMenu:!0,renderHeader:()=>R("Priority"),flex:1,align:"center",renderCell:e=>function(e){return(0,re.jsxs)("div",{sx:{textTransform:"capitalize",mx:"auto"},children:[(0,re.jsx)(o.In,{icon:Z.A,color:("P1"===e?"red":"P2"===e&&"orange")||"green"}),e]})}(e.getValue(e.id,"priority")||(0,N.sample)(["P1","P2","P3"]))},{field:"automationStatus",headerName:"Automated?",flex:1,renderHeader:()=>ce("Automated?"),disableColumnMenu:!0,align:"center",renderCell:e=>e.getValue(e.id,"automationStatus")?(0,re.jsx)(x.A,{component:o.In,icon:ee.A,sx:{width:20,height:20,color:"primary.main"}}):"No"},{field:"status",headerName:"Status",flex:1.25,hide:g,disableColumnMenu:!0,editable:!0,headerAlign:"center",align:"center",renderHeader:()=>R("Status"),renderCell:e=>{const t=e.getValue(e.id,"status"),i=e.getValue(e.id,"id"),s=t!==de.Pm.UNTESTED?(0,re.jsx)(ie.A,{variant:"ghost",color:(t===de.Pm.FAILED?"error":t===de.Pm.SKIPPED&&"warning")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:t}):(0,re.jsx)(ie.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:t});return f&&null!==b&&void 0!==b&&b.edit?(0,re.jsx)(F.A,{select:!0,fullWidth:!0,value:t,SelectProps:{native:!0},onChange:e=>{I(!0),ye(e,i)},sx:{"& fieldset":{border:"0 !important"},"& select":{pl:1,py:.5,pr:"20px !important",typography:"subtitle2"},"& .MuiOutlinedInput-root":{borderRadius:.75,bgcolor:"background.neutral"},"& .MuiNativeSelect-icon":{top:4,right:0,width:20,height:20}},children:ue.map(e=>(0,re.jsx)("option",{value:e.label,children:e.label},e.id))}):s}},{field:"executionDuration",headerName:"Execution Time",renderHeader:()=>ce("Execution Time"),flex:1.25,align:"center",hide:g||(null===j||void 0===j||null===(t=j.filter(e=>e.status===de.Pm.UNTESTED))||void 0===t?void 0:t.length)===(null===j||void 0===j?void 0:j.length)||(null===j||void 0===j||null===(i=j.filter(e=>!1===e.automationStatus))||void 0===i?void 0:i.length)===(null===j||void 0===j?void 0:j.length),disableColumnMenu:!0,renderCell:e=>e.getValue(e.id,"executionDuration")}],[he,me]=(0,s.useState)(!1),[xe,pe]=(0,s.useState)(null),fe=()=>{me(!0)},ge=Q.Ik().shape({status:Q.Yj().required("Status is required"),images:Q.YO().min(1,"Images is required")}),Ae=(0,U.Wx)({enableReinitialize:!0,initialValues:{images:[]},validationSchema:ge,onSubmit:async(e,t)=>{let{setSubmitting:i,resetForm:s,setErrors:l}=t;try{s(),i(!1)}catch(n){console.error(n),i(!1),l(n)}}}),{setFieldValue:je}=Ae,ye=(e,t)=>{const i=j.findIndex(e=>e.id===t),s=j[i];m((0,k.tv)({testcaseevidences:[],testCaseEvidencesFetched:!1})),Se(null===s||void 0===s?void 0:s._id),je("status",null===_||void 0===_?void 0:_.status),m((0,k.N9)({..._,testNodeID:null===s||void 0===s?void 0:s.id,testCaseId:null===s||void 0===s?void 0:s._id,moduleId:null===s||void 0===s?void 0:s.moduleId,screenShotComments:null===s||void 0===s?void 0:s.screenShotComments,status:null===s||void 0===s?void 0:s.status,testCaseResultsFile:null===s||void 0===s?void 0:s.testCaseResultsFile,selectedTestCaseStatus:e.target.value}))},Ce=e=>{const t=null===j||void 0===j?void 0:j.find(t=>t._id===e);pe(t),(0,ae.n5)(de.mc.TESTRUN,de.Rk.SELECTED_TESTCASE,t);m((0,k.tv)({testcaseevidences:[],testCaseEvidencesFetched:!1}))},Se=e=>{var t,i,s,l,o,d,a,r;const u=n.filter(t=>t._id===e),c=j.filter(t=>(null===t||void 0===t?void 0:t._id)===e),v={},h=[];let x,p=null;var f,A,y,C,S;if(m((0,k.h_)({})),m((0,k.Mm)({})),g||null!==(t=u[0])&&void 0!==t&&t.testStepStatuses)x=null===(f=u[0])||void 0===f?void 0:f.testStepStatuses,null===(A=u[0])||void 0===A||null===(y=A.testStepStatuses)||void 0===y||y.forEach(e=>{null!==e&&void 0!==e&&e.testStepLogsFile&&(p=null===e||void 0===e?void 0:e.testStepLogsFile),null!==e&&void 0!==e&&e.testStepResultsFile&&(p=null===e||void 0===e?void 0:e.testStepResultsFile)});else if(null!==(C=u[0])&&void 0!==C&&C.testCaseSteps)if((null===(S=u[0])||void 0===S?void 0:S.testCaseSteps.constructor)===Array){var b;const e=[];null===(b=u[0])||void 0===b||b.testCaseSteps.forEach(t=>{e.push({_id:null===t||void 0===t?void 0:t._id,status:de.Pm.UNTESTED})}),x=e}else{var T,w;x=[{_id:null===(T=u[0])||void 0===T||null===(w=T.testCaseSteps)||void 0===w?void 0:w._id,status:de.Pm.UNTESTED}]}const I=j.findIndex(t=>t._id===e);let N=j[I].testCaseSteps;if(g){var R;if(N)if(N instanceof Array)N=N.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),N.forEach(e=>{h.push({_id:null===e||void 0===e?void 0:e._id,name:Te(e),description:ke(e)})});else if(N=!Object.keys(N).includes("sleep")&&!Object.keys(N).includes("frameSwitch")&&!Object.keys(N).includes("keyBoardEvent")||Object.keys(N).includes("manual")&&N,N)h.push({_id:null===(R=N)||void 0===R?void 0:R._id,name:Te(N),description:ke(N)});m((0,k.ZK)(h))}else{var M,D,P;if(N){var F,z,L;if(N instanceof Array)N=N.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),N.forEach(e=>{var t;const i=null===(t=x)||void 0===t?void 0:t.findIndex(t=>t._id===(null===e||void 0===e?void 0:e._id));if(i||0===i){const t=x[i];h.push({_id:null===e||void 0===e?void 0:e._id,name:Te(e),description:ke(e),status:null===t||void 0===t?void 0:t.status})}});else if(N=!Object.keys(N).includes("sleep")&&!Object.keys(N).includes("frameSwitch")&&!Object.keys(N).includes("keyBoardEvent")||Object.keys(N).includes("manual")&&N,N)h.push({_id:null===(z=N)||void 0===z?void 0:z._id,name:Te(N),description:ke(N),status:null===(L=N)||void 0===L?void 0:L.status});if(h){var O;const e=null===(O=c[0])||void 0===O?void 0:O.testStepStatuses;var B;if(h.constructor===Array)null===(B=Object.keys(e))||void 0===B||B.forEach(t=>{const i=h.findIndex(e=>(null===e||void 0===e?void 0:e._id)===t);i>=0&&(h[i]={...h[i],status:e[t]})})}m((0,k.ZK)(h)),null===(F=x)||void 0===F||F.forEach(e=>{v[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.log}),m((0,k.Mm)(v))}let t,i;var $,U,W;if(null!==(M=u[0])&&void 0!==M&&M.testCaseResultsFile)t=null===($=u[0])||void 0===$?void 0:$.testCaseResultsFile;else E&&E[e]&&(t=E[e]);if(null!==(D=u[0])&&void 0!==D&&D.testCaseLogsFile)i=null===(U=u[0])||void 0===U?void 0:U.testCaseLogsFile;else E&&E[e]&&(i=E[e]);if(null!==(P=u[0])&&void 0!==P&&P.testCaseLogsFile)i=null===(W=u[0])||void 0===W?void 0:W.testCaseLogsFile;if(m((0,k.h_)({})),t)Ie(t),i&&Ee(i);else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};m((0,k.tv)(e))}}if(p){var q;const e=null===(q=p)||void 0===q?void 0:q.split(/[\\/]/),t=e[1],i=e[2],s=e[3];we({jobId:t,moduleId:i,testNodeId:s})}m((0,k.N9)({..._,testNodeID:null===(i=u[0])||void 0===i?void 0:i.id,testCaseId:null===(s=u[0])||void 0===s?void 0:s._id,moduleId:null===(l=u[0])||void 0===l?void 0:l.moduleId,screenShotComments:null===(o=u[0])||void 0===o?void 0:o.screenShotComments,status:null===(d=c[0])||void 0===d?void 0:d.status,testCaseResultsFile:null===(a=u[0])||void 0===a?void 0:a.testCaseResultsFile,dateStatusLastUpdated:null===(r=c[0])||void 0===r?void 0:r.dateStatusLastUpdated}))},be=(e,t)=>{let i;return Object.keys(e).some(s=>s===t?(i=e[s],!0):e[s]&&"object"===typeof e[s]?(i=be(e[s],t),void 0!==i):i),i},ke=e=>{let t;const i=Object.keys(e)[1],s=be(e,"testStepDescription"),l=be(e,"expected");return t=s||(l||i),t},Te=e=>Object.keys(e)[1],we=async e=>{if(e){const o={},d={};m((0,k.ag)(!1));try{var t;const n=await(0,J.A)({method:"post",url:`${le.A.testRun.getTestResultFiles}`,data:e,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}});if(200===(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.status)){var i,s,l;const e=null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.data;null===e||void 0===e||null===(s=e.screens)||void 0===s||s.forEach(e=>{null!==e&&void 0!==e&&e.testscreenshotfile&&(o[null===e||void 0===e?void 0:e.testStepId]=null===e||void 0===e?void 0:e.testscreenshotfile)}),null===e||void 0===e||null===(l=e.logs)||void 0===l||l.forEach(e=>{null!==e&&void 0!==e&&e.testlogfile&&(d[null===e||void 0===e?void 0:e.testStepId]=[null===e||void 0===e?void 0:e.testlogfile])})}0!==(null===o||void 0===o?void 0:o.length)&&m((0,k.h_)(o)),0!==(null===d||void 0===d?void 0:d.length)&&m((0,k.Mm)(d)),m((0,k.ag)(!0))}catch(n){m((0,k.ag)(!0))}}},Ie=async e=>{const t={};if(e)try{var i;const n=await(0,J.A)({method:"get",url:`${le.A.testRun.getTestCaseResults(e)}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}});let o,d,a,r=[];if((null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.length)>0){var s,l;if(o=null===n||void 0===n?void 0:n.data.split("**TestResults**"),o&&(d=o[0].split(" "),d=d.filter(e=>""!==e.trim()),o[1]&&(a=o[1].split("&&"),a=a.filter(e=>""!==e.trim()))),(null===(s=d)||void 0===s?void 0:s.length)>0){r=[],d.forEach(e=>{e.trim()&&r.push(e.trim())});const e={testcaseevidences:r,testCaseEvidencesFetched:!0};m((0,k.tv)(e))}if((null===(l=a)||void 0===l?void 0:l.length)>0){a.filter(e=>""!==e.trim()).forEach(e=>{const i=e.split(" ").filter(e=>""!==e.trim()),s=i[0].trim(),l=i.slice(1).map(e=>e.trim());if(t[s]){if(l.constructor===Array&&t[s].constructor===Array)t[s]=[...t[s],...l];else if(l.constructor===Array&&t[s].constructor!==Array){const e=[...l];e.push(t[s]),t[s]=e}else if(l.constructor!==Array&&t[s].constructor===Array){const e=[...t[s]];e.push(l),t[s]=e}}else t[s]=l}),m((0,k.h_)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};m((0,k.tv)(e))}}catch(n){console.log("error = ",n)}},Ee=async e=>{const t={};if(e)try{var i;const s=await(0,J.A)({method:"get",url:`${le.A.testRun.getTestCaseLogs(e)}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}});let l,n,o,d=[];if((null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.length)>0){if(l=null===s||void 0===s?void 0:s.data.split("**TestResults**"),l&&(n=l[0].split(" "),n=n.filter(e=>""!==e.trim()),l[1]&&(o=l[1].split("&&"),o=o.filter(e=>""!==e.trim()))),n){d=[],n.forEach(e=>{e.trim()&&d.push(e.trim())});const e={testcaseevidences:d,testCaseEvidencesFetched:!0};m((0,k.Mm)(e))}if(o){o.filter(e=>""!==e.trim()).forEach(e=>{const i=e.split(" ").filter(e=>""!==e.trim()),s=i[0].trim(),l=i.slice(1).map(e=>e.trim());if(t[s]){if(l.constructor===Array&&t[s].constructor===Array)t[s]=[...t[s],...l];else if(l.constructor===Array&&t[s].constructor!==Array){const e=[...l];e.push(t[s]),t[s]=e}else if(l.constructor!==Array&&t[s].constructor===Array){const e=[...t[s]];e.push(l),t[s]=e}}else t[s]=l}),m((0,k.Mm)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};m((0,k.tv)(e))}}catch(s){console.log("error = ",s)}};(0,s.useEffect)(()=>{m((0,k.mU)(""))},[m]);const _e=()=>{const[e,t]=(0,s.useState)(!1),[i,l]=(0,s.useState)({includeLogs:!0,includeScreenshots:!0});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(u.A,{onClick:async()=>{let e,s,l,n={};const o=(e=>{const t=[];let i,s,l;for(let f=0;f<e.length;f+=1){var n,o,d,a,r,u,c,v,h;const g=[],A=[],j=[];if(l=0,(null===(n=e[f])||void 0===n?void 0:n.testCaseSteps.length)>0)for(let t=0;t<e[f].testCaseSteps.length;t+=1){var m,x,p;i=be(e[f].testCaseSteps[t],"testStepDescription"),void 0!==i&&(g.push(i),l+=1,j.push(l),(null===(m=e[f])||void 0===m||null===(x=m.testStepStatuses)||void 0===x?void 0:x.length)>0&&null!==(p=e[f].testStepStatuses[t])&&void 0!==p&&p.status&&A.push(e[f].testStepStatuses[t].status))}s={testCaseID:null===(o=e[f])||void 0===o?void 0:o.testCaseID,testCaseTitle:null===(d=e[f])||void 0===d?void 0:d.testCaseTitle,testCaseDescription:null===(a=e[f])||void 0===a?void 0:a.testCaseDescription,suiteName:null===(r=e[f])||void 0===r?void 0:r.suiteName,status:null===(u=e[f])||void 0===u?void 0:u.status,executionDuration:null===(c=e[f])||void 0===c?void 0:c.executionDuration,tags:null===(v=e[f])||void 0===v?void 0:v.tags,automationStatus:null===(h=e[f])||void 0===h?void 0:h.automationStatus,testCaseSteps:g,testStepStatuses:A,stepNumbers:j},t.push(s)}return t})(j);let d="Modules";if(S.releaseId){d="Releases";try{var a,r;const[t,i]=await Promise.all([(0,J.A)({method:"get",url:`${le.A.releases.getExecutingReleasesData(S.releaseId)}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}}),(0,J.A)({method:"get",url:`${le.A.testRun.getLatestTestRunUser(S.releaseId,"release")}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}})]);e=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data[0],s=null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.data,l=e.runningStatus}catch(w){console.log("error = ",w)}}if(S.testRunId){if(d="Test Runs",e=null===A||void 0===A?void 0:A.currentTestRun,e)s=y.find(t=>{var i;return(null===t||void 0===t?void 0:t._id)===(null===(i=e)||void 0===i?void 0:i.createdBy)}),s=`${s.firstName} ${s.lastName}`;else try{var u,c;const[t,i]=await Promise.all([(0,J.A)({method:"get",url:`${le.A.testRun.getJiraJobsStatusUpdate(S.testRunId)}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}}),(0,J.A)({method:"get",url:`${le.A.testRun.getLatestTestRunUser(S.testRunId,"job")}`,headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}})]);e=null===t||void 0===t||null===(u=t.data)||void 0===u?void 0:u.data[0],s=null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.data}catch(w){console.log("error = ",w)}l=e.runningStatus}var v,h,m,x,p,f,g,C,b,k,T;if("Releases"===d||"Test Runs"===d)if(n={releaseName:null===(v=e)||void 0===v?void 0:v.releaseName,testRunName:null===(h=e)||void 0===h?void 0:h.testRun,user:s||"",total:(null===(m=e)||void 0===m?void 0:m.total)||0,passed:(null===(x=e)||void 0===x?void 0:x.passed)||0,failed:(null===(p=e)||void 0===p?void 0:p.failed)||0,untested:(null===(f=e)||void 0===f?void 0:f.untested)||0,skipped:(null===(g=e)||void 0===g?void 0:g.skipped)||0,blocked:(null===(C=e)||void 0===C?void 0:C.blocked)||0,executionDuration:(null===(b=e)||void 0===b?void 0:b.executionDuration)||"",executionStart:M()(null===(k=e)||void 0===k?void 0:k.executionStart).format("MMMM Do YYYY, h:mm:ss A")||"",executionEnd:M()(null===(T=e)||void 0===T?void 0:T.executionEnd).format("MMMM Do YYYY, h:mm:ss A")||"",jobStatus:l},"Completed"===n.jobStatus){const e={details:o,summary:n};(0,te.p3)(e,i,d)}else t(!0);else(0,te.p3)({details:o},"",d)},variant:"text",startIcon:(0,re.jsx)(V.U_,{}),children:"Export"}),(0,re.jsxs)(z.A,{open:e,onClose:()=>t(!1),children:[(0,re.jsx)(L.A,{style:{marginBottom:"16px"},children:"Cannot Download"}),(0,re.jsxs)(O.A,{children:[(0,re.jsx)("span",{role:"img","aria-label":"warning",style:{color:"red",fontWeight:"bold"},children:"\u26a0\ufe0f"})," ",(0,re.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:"Test Run is still under execution. Please wait until it completes."})]}),(0,re.jsx)(B.A,{children:(0,re.jsx)(u.A,{onClick:()=>t(!1),color:"secondary",children:"Ok"})})]})]})};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(X.z,{rows:j,columns:ve,pagination:!0,pageSize:10,components:{Toolbar:()=>(0,re.jsxs)(Y.b,{children:[(0,re.jsx)(K.j,{}),(0,re.jsx)(G.Q,{}),(0,re.jsx)(_e,{})," "]}),Pagination:function(){const e=(0,W.h)(),t=(0,q.N)(e,H.$i),i=(0,q.N)(e,H.ij),s=(0,q.N)(e,H.O),l=e.current.getAllRowIds(),n=new Set;l.forEach(t=>{const i=e.current.getRow(t);null!==i&&void 0!==i&&i.testCaseID&&n.add(i.testCaseID)});const o=n.size;let d=s;return o>0&&(d=Math.ceil(o/i)),(0,re.jsx)(D.A,{color:"primary",count:d,page:t+1,onChange:(t,i)=>e.current.setPage(i-1)})}}}),(0,re.jsx)($.Ay,{open:he,onClose:()=>{me(!1)},anchor:"right",PaperProps:{sx:{width:{xs:1,sm:"60%"}}},children:(0,re.jsx)(se.default,{testCase:xe,testRunId:p,fromModules:g,getTestCaseResults:Ie,setOpenDetails:me,rows:j})}),w&&(0,re.jsx)(oe.A,{open:w,setOpen:I,testCase:xe,getTestCaseResults:Ie,testRunId:p})]})}var ve=i(73338),he=i(32393),me=i(57390);const xe=(0,g.Ay)(p.G)({height:480,flexGrow:1,maxWidth:400}),pe=(0,g.Ay)(a.A)(e=>{let{theme:t}=e;return{boxShadow:"none",textAlign:"center",padding:t.spacing(5,0),color:t.palette.primary.darker,backgroundColor:t.palette.primary.lighter}}),fe=(0,g.Ay)(a.A)(e=>{let{theme:t}=e;return{boxShadow:"none",textAlign:"center",padding:t.spacing(5,0),color:t.palette.primary.darker,backgroundColor:t.palette.info.lighter}}),ge=(0,g.Ay)(a.A)(e=>{let{theme:t}=e;return{padding:t.spacing(2.3,2),backgroundColor:"#f4f6f8"}}),Ae=(0,g.Ay)("div")({display:"flex",justifyContent:"space-between"});const je=(0,g.Ay)(f.y)(e=>{let{theme:t}=e;return{"& .MuiTreeItem-group":{marginLeft:15,paddingLeft:18,borderLeft:`1px dashed ${(0,A.X4)(t.palette.text.primary,.4)}`},"& .MuiTreeItem-label":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"1rem",lineHeight:"2",fontWeight:500}}});function ye(){const{themeStretch:e}=(0,w.A)(),t=(0,C.wA)(),{moduleId:i}=(0,l.g)(),{userList:p,appendUrl:f}=(0,C.d4)(e=>e.user),{currentProject:g}=(0,C.d4)(e=>e.project),{moduleList:A,currentModule:N,fetchModuleData:R,testCasesPageCount:M}=(0,C.d4)(e=>e.module),{pageConfig:D}=(0,C.d4)(e=>e.role),[P,F]=(0,s.useState)([]),[z,L]=(0,s.useState)(null),[O,B]=(0,s.useState)(0),[$,U]=(0,s.useState)(0),[W,q]=(0,s.useState)(1),[H,V]=(0,s.useState)(10),[Y,K]=(0,s.useState)(!0),[G,X]=(0,s.useState)(!1),[Z,J]=(0,s.useState)(!1),Q=e=>f?`${e}?${f}`:e,ee=(0,s.useCallback)(e=>{t((0,k.rT)(e))},[t]),te=(0,s.useCallback)((e,i,s,l)=>{var n;l?X(!0):J(!0);const[o]=null===s||void 0===s?void 0:s.filter(e=>e._id===i);L(o),(0,b.WY)(t,o),B(null===o||void 0===o||null===(n=o.testNodes)||void 0===n?void 0:n.length),q(1),ie(o._id,"1"),l?X(!1):J(!1)},[t]),ie=(0,s.useCallback)(async(e,i,s)=>{try{s?X(!0):J(!0);const l=await(0,ae.Kv)();if(l&&l._id){const s=await(0,y.A)({method:"get",url:le.A.projects.getTestCasesByModuleId(l._id,e,"createdAt","desc",H,i),headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}}),{data:n}=s,o=null===n||void 0===n?void 0:n.response,d=null===o||void 0===o?void 0:o.totalpages,a=null===o||void 0===o?void 0:o.testCaseCount,r=null===o||void 0===o?void 0:o.testStepCount;console.log("module",o),L(o),(0,b.WY)(t,o),(0,b.GH)(t,d);const u=null===o||void 0===o?void 0:o.testNodes,c=null===u||void 0===u?void 0:u.map(e=>({...null===e||void 0===e?void 0:e.testNode[0],suiteName:null===o||void 0===o?void 0:o.suiteName,id:e._id,createdAt:null===o||void 0===o?void 0:o.createdAt,updatedAt:null===o||void 0===o?void 0:o.updatedAt,status:"UNTESTED"}));F(c),ee(c),B(a),U(r)}s?X(!1):J(!1)}catch(l){J(!1)}},[t,ee]),se=(0,s.useCallback)((e,s,l)=>{l?X(!0):K(!0);let n=[];if(s){var o,d;t((0,k.mU)("module")),null===s||void 0===s||s.forEach(e=>{const{testNodes:t}=e,i=null===t||void 0===t?void 0:t.map(t=>({...null===t||void 0===t?void 0:t.testNode[0],suiteName:null===e||void 0===e?void 0:e.suiteName,id:t._id,createdAt:null===e||void 0===e?void 0:e.createdAt,updatedAt:null===e||void 0===e?void 0:e.updatedAt,status:"UNTESTED"}));i&&(n=[...n,...i])});const l=(null===(o=n)||void 0===o?void 0:o.map(e=>{var t;return null===e||void 0===e||null===(t=e.testCaseSteps)||void 0===t?void 0:t.length})).reduce((e,t)=>e+t,0);F(n),ee(n),L(null),B(null===(d=n)||void 0===d?void 0:d.length),U(l),!e&&i&&(K(!0),te("",i,s,!0))}l?X(!1):J(!1)},[t,te,i,ee,U]),oe=(0,s.useCallback)(async e=>{try{if(R){const s=await(0,ae.Kv)();if(s&&s._id){var i;e?X(!0):J(!0);const l=await(0,y.A)({method:"get",url:le.A.projects.getModuleByProjectId(s._id),headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}}),{data:n}=l;null===n||void 0===n||null===(i=n.response)||void 0===i||i.sort((e,t)=>{let i=0;return i=e.createdAt.localeCompare(t.createdAt)?-1:1,i}),(0,b.jX)(t,!1),t((0,b.iN)(null===n||void 0===n?void 0:n.response)),e?X(!1):J(!1)}}}catch(s){J(!1)}},[t,R,se]),ue=((0,s.useCallback)(async()=>{try{if(R){(0,b.jX)(t,!1),Y?X(!0):J(!0);const e=await(0,ae.Kv)();if(e&&e._id){const i=await(0,y.A)({method:"get",url:le.A.projects.getModuleListByProjectId(e._id,"createdAt","desc","10","0"),headers:{Authorization:`Bearer ${(0,ne.qt)("accessToken")}`}}),{data:s}=i,l=null===s||void 0===s?void 0:s.response,n=null===s||void 0===s?void 0:s.totalCount;l.sort((e,t)=>{let i=0;return i=e.createdAt.localeCompare(t.createdAt)?-1:1,i}),(0,b.nK)(t,l),(0,b.iL)(t,n),t((0,b.iN)(l))}Y?X(!1):J(!1)}}catch(e){Y&&X(!1)}},[t,A,R]),(e,t)=>{const i=null===A||void 0===A?void 0:A.find(t=>t._id===e),s=null===p||void 0===p?void 0:p.find(e=>e._id===((null===i||void 0===i?void 0:i.updatedBy)||(null===i||void 0===i?void 0:i.createdBy)));return"name"===t?s?`${s.firstName} ${s.lastName}`:"Unknown User":"date"===t?(0,j.A)(new Date((null===i||void 0===i?void 0:i.updatedAt)||(null===i||void 0===i?void 0:i.createdAt)||Date.now()),"MMM dd yyyy, hh:mm a"):""});return(0,s.useEffect)(()=>{oe(!0),t((0,S.aU)()),K(!0),ie(i,"1",!0)},[t,A,oe,ie]),console.log("moduleList",A),(0,re.jsx)(I.A,{title:"Test Ensure",children:(0,re.jsxs)(r.A,{maxWidth:!e&&"xl",children:[(0,re.jsx)(E.A,{heading:"Test Cases",links:[{name:null===g||void 0===g?void 0:g.name,href:Q(T.nB.module.allModules)},{name:(null===N||void 0===N?void 0:N.suiteName)||"Module Name",href:Q(T.nB.module.allModules)},{name:"Test Cases"}],info:"Test modules help organize test cases in a structured way using folders and subfolders.",action:(null===D||void 0===D?void 0:D.create)&&!de.XQ.includes(null===g||void 0===g?void 0:g.status)&&(0,re.jsx)(u.A,{variant:"contained",component:n.N_,to:T.nB.module.newModule,startIcon:(0,re.jsx)(o.In,{icon:d.A}),children:"New Module"})}),G&&(0,re.jsx)(he.A,{}),!G&&(0,re.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,re.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,re.jsx)(_.e,{title:"Modules",sx:{minHeight:"900px"},children:(0,re.jsx)(c.Ay,{sx:{overflow:"hidden",overflowY:""+((null===A||void 0===A?void 0:A.length)>13?"scroll":"hidden"),scrollbarWidth:""+((null===A||void 0===A?void 0:A.length)>13?"thin":"none")},children:(0,re.jsx)(xe,{defaultExpanded:["1"],defaultSelected:i,style:{minHeight:"850px"},children:(0,re.jsx)(je,{nodeId:"1",label:"All modules",onClick:e=>se(e,A),children:A&&(null===A||void 0===A?void 0:A.map(e=>(0,re.jsx)(je,{nodeId:e._id,label:e.suiteName,onClick:t=>te(t,e._id,A,!0)},e._id)))})})})})}),(0,re.jsxs)(c.Ay,{item:!0,xs:12,md:9,children:[(0,re.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mb:1},children:[(0,re.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,re.jsx)(ge,{children:(0,re.jsxs)(v.A,{spacing:1,children:[(0,re.jsx)(Ae,{children:(0,re.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,re.jsx)(h.A,{variant:"overline",sx:{color:"text.secondary"},children:"Module Name :"}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{textTransform:"capitalize",color:"text.primary",ml:1},children:(null===z||void 0===z?void 0:z.suiteName)||"All Modules"})]})}),(0,re.jsx)(Ae,{children:(0,re.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,re.jsx)(h.A,{variant:"overline",sx:{color:"text.secondary"},children:"Test Data :"}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{color:"text.primary",ml:1},children:null!==z&&void 0!==z&&z.suiteName?`${null===z||void 0===z?void 0:z.suiteName}.xlsx`:"All Modules"})]})}),(0,re.jsx)(Ae,{children:(0,re.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,re.jsx)(h.A,{variant:"overline",sx:{color:"text.secondary"},children:"Last Updated At :"}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{textTransform:"capitalize",color:"text.primary",ml:1},children:ue(null===z||void 0===z?void 0:z._id,"date")})]})}),(0,re.jsx)(Ae,{children:(0,re.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,re.jsx)(h.A,{variant:"overline",sx:{color:"text.secondary"},children:"Last Updated By :"}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{textTransform:"capitalize",color:"text.primary",ml:1},children:ue(null===z||void 0===z?void 0:z._id,"name")})]})})]})})}),(0,re.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,re.jsxs)(pe,{children:[(0,re.jsx)(h.A,{variant:"h3",children:(0,ve.Rn)(O)}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{opacity:.72},children:"Test Cases"})]})}),(0,re.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,re.jsxs)(fe,{children:[(0,re.jsx)(h.A,{variant:"h3",children:(null===z||void 0===z?void 0:z.testStepCount)||(0,ve.Rn)($)}),(0,re.jsx)(h.A,{variant:"subtitle2",sx:{opacity:.72},children:"Test Case Steps"})]})})]}),(0,re.jsxs)(a.A,{sx:{p:1},children:[(0,re.jsx)(m.A,{title:(null===z||void 0===z?void 0:z.suiteName)||"All Modules",sx:{mb:1}}),(0,re.jsxs)(x.A,{sx:{height:720},children:[(0,re.jsx)(me.A,{loading:Z}),P&&(0,re.jsx)(ce,{testCases:P||[],count:M||0,page:W,rowsPerPage:H,onPageChange:(e,t)=>{q(t),J(!0),ie(N._id,t)}})]})]})]})]})]})})}},36880:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var s=i(53536),l=i(5748),n=i(11892),o=i(96446),d=i(85865),a=i(77739),r=i(17392),u=i(88446),c=i(76412),v=i(70579);function h(e){let{links:t,action:i,heading:h,info:m,moreLink:x=[],sx:p,...f}=e;return(0,v.jsxs)(o.A,{sx:{mb:5,...p},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,v.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,v.jsxs)(o.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,v.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:h}),(0,v.jsx)(a.A,{title:m,placement:"bottom",arrow:!0,children:(0,v.jsx)(r.A,{children:(0,v.jsx)(l.In,{icon:n.A,width:25,height:25})})})]}),(0,v.jsx)(c._5,{links:t,...f})]}),i&&(0,v.jsx)(o.A,{sx:{flexShrink:0},children:i})]}),(0,v.jsx)(o.A,{sx:{mt:2},children:(0,s.isString)(x)?(0,v.jsx)(u.A,{href:x,target:"_blank",variant:"body2",children:x}):x.map(e=>(0,v.jsx)(u.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e))})]})}},57390:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});i(65043);var s=i(96446),l=i(81637),n=i(70579);function o(e){let{loading:t}=e;return t?(0,n.jsx)(s.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:e=>e.zIndex.modal+1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(l.A,{size:48})}):null}},83613:(e,t,i)=>{"use strict";i.d(t,{e:()=>d});var s=i(12110),l=i(79958),n=i(96446),o=i(70579);function d(e){let{title:t,sx:i,children:d}=e;return(0,o.jsxs)(s.A,{sx:{overflow:"unset",position:"unset",width:"100%"},children:[t&&(0,o.jsx)(l.A,{title:t}),(0,o.jsx)(n.A,{sx:{p:3,minHeight:400,...i},children:d})]})}}}]);
//# sourceMappingURL=510.3d363d29.chunk.js.map