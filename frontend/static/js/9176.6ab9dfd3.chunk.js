"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[9176],{2990:(e,t,r)=>{r.d(t,{nZ:()=>X,jM:()=>S,_H:()=>E});var i=r(53536),n=r(5748),o=r(89488),a=r(51875),l=r(20901),s=r(23546),c=r(54119),d=r(34535),p=r(90310),x=r(63336),h=r(96446),m=r(85865),u=r(35721),g=r(37918),y=r(2050),j=r(48734),v=r(8266),f=r(67784),b=r(88911),A=r(42518),w=r(73338),C=r(76412),k=r(61882),R=r(99522),I=r(70579);const D=(0,d.Ay)("div")(e=>{let{theme:t}=e;return{outline:"none",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(5,1),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral,border:`1px dashed ${t.palette.grey[50032]}`,"&:hover":{opacity:.72,cursor:"pointer"},[t.breakpoints.up("md")]:{textAlign:"left",flexDirection:"row"}}});function S(e){let{error:t,showPreview:r=!0,files:d,onRemove:S,onRemoveAll:P,sx:B,...U}=e;const z=(null===d||void 0===d?void 0:d.length)>0,{getRootProps:L,getInputProps:W,isDragActive:_,isDragReject:T,fileRejections:$}=(0,o.VB)({multiple:!0,...U}),F="image/*"===(null===U||void 0===U?void 0:U.accept),E=()=>(0,I.jsx)(x.A,{variant:"outlined",sx:{py:1,px:2,mt:3,borderColor:"error.light",bgcolor:e=>(0,p.X4)(e.palette.error.main,.08)},children:$.map(e=>{let{file:t,errors:r}=e;const{path:i,size:n}=t;return(0,I.jsxs)(h.A,{sx:{my:1},children:[(0,I.jsxs)(m.A,{variant:"subtitle2",noWrap:!0,children:[i," - ",(0,w.tm)(n)]}),r.map(e=>(0,I.jsxs)(m.A,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},i)})});return(0,I.jsxs)(h.A,{sx:{width:"100%",...B},children:[(0,I.jsxs)(D,{...L(),sx:{..._&&{opacity:.72},...(T||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,I.jsx)("input",{...W()}),(0,I.jsx)(R.E4,{sx:{width:220}}),(0,I.jsxs)(h.A,{sx:{p:3,ml:{md:2}},children:[(0,I.jsx)(m.A,{gutterBottom:!0,variant:"h5",children:"Drop or Select file"}),(0,I.jsxs)(m.A,{variant:"body2",sx:{color:"text.secondary"},children:["Drop files here or click\xa0",(0,I.jsx)(m.A,{variant:"body2",component:"span",sx:{color:"primary.main",textDecoration:"underline"},children:"browse"}),"\xa0through your machine"]}),F&&(0,I.jsx)(m.A,{variant:"body2",sx:{color:"text.secondary"},children:"Only image files are allowed."})]})]}),$.length>0&&(0,I.jsx)(E,{}),(0,I.jsx)(u.A,{disablePadding:!0,sx:{...z&&{my:3}},children:(0,I.jsx)(s.N,{children:null===d||void 0===d?void 0:d.map(e=>{const{name:t,size:o,preview:s}=e,d=(0,i.isString)(e)?e:t;return r?(0,I.jsxs)(g.Ay,{component:c.P.div,...k.xB,sx:{p:0,m:.5,width:80,height:80,borderRadius:1.5,overflow:"hidden",position:"relative",display:"inline-flex"},children:[(0,I.jsx)(x.A,{variant:"outlined",component:"img",src:(0,i.isString)(e)?e:s,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute"}}),(0,I.jsx)(h.A,{sx:{top:6,right:6,position:"absolute"},children:(0,I.jsx)(C.ZM,{size:"small",onClick:()=>S(e),sx:{p:"2px",color:"common.white",bgcolor:e=>(0,p.X4)(e.palette.grey[900],.72),"&:hover":{bgcolor:e=>(0,p.X4)(e.palette.grey[900],.48)}},children:(0,I.jsx)(n.In,{icon:l.A})})})]},d):(0,I.jsxs)(g.Ay,{component:c.P.div,...k.xB,sx:{my:1,py:.75,px:2,borderRadius:1,border:e=>`solid 1px ${e.palette.divider}`,bgcolor:"background.paper"},children:[(0,I.jsx)(y.A,{children:(0,I.jsx)(n.In,{icon:a.A,width:28,height:28})}),(0,I.jsx)(j.A,{primary:(0,i.isString)(e)?e:t,secondary:(0,i.isString)(e)?"":(0,w.tm)(o),primaryTypographyProps:{variant:"subtitle2"},secondaryTypographyProps:{variant:"caption"}}),(0,I.jsx)(v.A,{children:(0,I.jsx)(C.ZM,{edge:"end",size:"small",onClick:()=>S(e),children:(0,I.jsx)(n.In,{icon:l.A})})})]},d)})})}),z&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.A,{id:"standard-helperText",label:`${null===d||void 0===d?void 0:d.length} files selected`,variant:"standard",disabled:!0,border:"none",sx:{"& fieldset":{border:"none"}}}),(0,I.jsxs)(b.A,{direction:"row",justifyContent:"flex-end",children:[(0,I.jsx)(A.A,{onClick:P,sx:{mr:1.5},children:"Remove all"}),(0,I.jsx)(A.A,{variant:"contained",sx:{display:"none"},children:"Upload files"})]})]})]})}var P=r(83462),B=r(35316),U=r(98533),z=r(29347),L=r(65043),W=r(33211),_=r(60949);const T=(0,d.Ay)("div")(e=>{let{theme:t}=e;return{outline:"none",overflow:"hidden",textAlign:"center",position:"relative",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(0,0),borderRadius:t.shape.borderRadius,transition:t.transitions.create("padding"),backgroundColor:"#edf6fc",boxShadow:"0 0 1px #32749e",opacity:.85,"&:hover":{opacity:1,cursor:"pointer"},[t.breakpoints.up("md")]:{textAlign:"left",flexDirection:"row"}}}),$=(0,d.Ay)("div")(()=>({textAlign:"center",textDecoration:"underline",color:"#fff"})),F=(0,d.Ay)("div")(()=>({display:"flex"}));function E(e){let{error:t,isEdit:r,onDelete:i,onReplace:n,fileType:a,filePath:l,fileName:s,moduleID:c,file:d,sx:p,...x}=e;const[u,g]=(0,L.useState)(!1),{getRootProps:y,getInputProps:j,isDragActive:v,isDragReject:f}=(0,o.VB)({multiple:!1,accept:x.accept,onDrop:x.onDrop}),b=()=>{g(!1)};return(0,I.jsxs)(h.A,{sx:{...p,width:"100%",height:"150px"},children:[(0,I.jsxs)(T,{...y(),sx:{...v&&{opacity:.72},...(f||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[!d&&r&&(0,I.jsx)($,{onClick:e=>{e.stopPropagation(),(async()=>{let e=null;try{if(e=await W.A.get(`${_.A.host}/api/projects/downloadModule/${c}/${a}/`,{responseType:"blob"}),e){const t=new Blob([e.data]),r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download=l,r.click()}}catch(t){console.log(e.data)}})()},children:(0,I.jsx)("span",{children:l})}),(0,I.jsxs)(F,{children:[(0,I.jsx)("input",{...j()}),(0,I.jsx)(R.E4,{sx:{marginLeft:"10px",height:"120px",width:"120px"}}),(0,I.jsx)(h.A,{sx:{p:2,ml:{md:2},paddingLeft:"0px",width:"100%",height:"140px",display:"flex",alignItems:"center",justifyContent:"center"},children:d||s?(0,I.jsxs)("div",{style:{width:"100%",padding:"10px 0px 0px 0px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsx)("filePath",{children:(null===d||void 0===d?void 0:d.name)||s}),(0,I.jsxs)("div",{style:{paddingTop:"20px",width:"150px",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,I.jsx)(A.A,{sx:{backgroundColor:"#32749e",height:"28px",padding:"5px 10px",color:"#fff"},onClick:e=>{e.stopPropagation(),n()},children:"Replace"}),null!==d&&void 0!==d&&d.name||s?(0,I.jsx)(A.A,{sx:{backgroundColor:"#32749e",height:"28px",padding:"5px 10px",color:"#fff"},onClick:e=>{e.stopPropagation(),g(!0)},children:"Delete"}):null]})]}):(0,I.jsxs)(m.A,{variant:"body2",sx:{color:"#000",fontSize:"16px",fontWeight:"bold"},children:["Drop files here OR click\xa0",(0,I.jsx)(m.A,{variant:"body2",component:"span",sx:{color:"#000",fontWeight:"bold",textDecoration:"underline"},children:"Browse"})]})})]})]}),(0,I.jsxs)(P.A,{open:u,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,I.jsx)(B.A,{children:(0,I.jsxs)(U.A,{id:"alert-dialog-description",children:[(0,I.jsx)("br",{}),"Are you sure want to delete this file ?"]})}),(0,I.jsxs)(z.A,{children:[(0,I.jsx)(A.A,{onClick:()=>{i(),g(!1)},children:"Yes"}),(0,I.jsx)(A.A,{onClick:b,children:"No"})]})]})]})}var V=r(45518);const O=(0,d.Ay)("div")(e=>{let{theme:t}=e;return{width:144,height:144,margin:"auto",borderRadius:"50%",padding:t.spacing(1),border:`1px dashed ${t.palette.grey[50032]}`}}),M=(0,d.Ay)("div")({zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","& > *":{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}}}),N=(0,d.Ay)("div")(e=>{var t;let{theme:r}=e;return{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:null===(t=r.palette)||void 0===t?void 0:t.text.secondary,backgroundColor:r.palette.background.neutral,transition:r.transitions.create("opacity",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.shorter}),"&:hover":{opacity:.72}}});function X(e){let{error:t,file:r,caption:a,sx:l,...s}=e;const{getRootProps:c,getInputProps:d,isDragActive:u,isDragReject:g,fileRejections:y}=(0,o.VB)({multiple:!1,...s}),j=()=>(0,I.jsx)(x.A,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,p.X4)(e.palette.error.main,.08)},children:y.map(e=>{let{file:t,errors:r}=e;const{path:i,size:n}=t;return(0,I.jsxs)(h.A,{sx:{my:1},children:[(0,I.jsxs)(m.A,{variant:"subtitle2",noWrap:!0,children:[i," - ",(0,w.tm)(n)]}),r.map(e=>(0,I.jsxs)(m.A,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},i)})});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O,{sx:l,children:(0,I.jsxs)(M,{...c(),sx:{...u&&{opacity:.72},...(g||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,I.jsx)("input",{...d()}),r&&(0,I.jsx)(h.A,{component:"img",alt:"avatar",src:(0,i.isString)(r)?r:r.preview,sx:{zIndex:8,objectFit:"cover"}}),(0,I.jsxs)(N,{className:"placeholder",sx:{...r&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}},children:[(0,I.jsx)(h.A,{component:n.In,icon:V.A,sx:{width:24,height:24,mb:1}}),(0,I.jsx)(m.A,{variant:"caption",children:r?"Update photo":"Upload photo"})]})]})}),a,y.length>0&&(0,I.jsx)(j,{})]})}},36880:(e,t,r)=>{r.d(t,{A:()=>h});var i=r(53536),n=r(5748),o=r(11892),a=r(96446),l=r(85865),s=r(77739),c=r(17392),d=r(88446),p=r(76412),x=r(70579);function h(e){let{links:t,action:r,heading:h,info:m,moreLink:u=[],sx:g,...y}=e;return(0,x.jsxs)(a.A,{sx:{mb:5,...g},children:[(0,x.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,x.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,x.jsxs)(a.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,x.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:h}),(0,x.jsx)(s.A,{title:m,placement:"bottom",arrow:!0,children:(0,x.jsx)(c.A,{children:(0,x.jsx)(n.In,{icon:o.A,width:25,height:25})})})]}),(0,x.jsx)(p._5,{links:t,...y})]}),r&&(0,x.jsx)(a.A,{sx:{flexShrink:0},children:r})]}),(0,x.jsx)(a.A,{sx:{mt:2},children:(0,i.isString)(u)?(0,x.jsx)(d.A,{href:u,target:"_blank",variant:"body2",children:u}):u.map(e=>(0,x.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e))})]})}},50467:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(34535),n=r(90310),o=r(70579);const a=(0,i.Ay)("span")(e=>{var t,r,i;let{theme:o,styleProps:a}=e;const l="light"===o.palette.mode,{color:s,variant:c}=a;return{height:22,minWidth:22,lineHeight:0,borderRadius:8,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:o.spacing(0,1),color:o.palette.grey[800],fontSize:o.typography.pxToRem(12),fontFamily:o.typography.fontFamily,backgroundColor:o.palette.grey[300],fontWeight:o.typography.fontWeightBold,..."default"!==s?{..."filled"===c&&{...(e=>({color:o.palette[e].contrastText,backgroundColor:o.palette[e].main}))(s)},..."outlined"===c&&{...(e=>({color:o.palette[e].main,backgroundColor:"transparent",border:`1px solid ${o.palette[e].main}`}))(s)},..."ghost"===c&&{...(e=>({color:o.palette[e][l?"dark":"light"],backgroundColor:(0,n.X4)(o.palette[e].main,.16)}))(s)}}:{..."outlined"===c&&{backgroundColor:"transparent",color:null===(t=o.palette)||void 0===t||null===(r=t.text)||void 0===r?void 0:r.primary,border:`1px solid ${o.palette.grey[50032]}`},..."ghost"===c&&{color:l?null===(i=o.palette)||void 0===i?void 0:i.text.secondary:o.palette.common.white,backgroundColor:o.palette.grey[50016]}}}});function l(e){let{color:t="default",variant:r="ghost",children:i,...n}=e;return(0,o.jsx)(a,{styleProps:{color:t,variant:r},...n,children:i})}},73338:(e,t,r)=>{r.d(t,{IG:()=>a,Rn:()=>s,kB:()=>l,pA:()=>d,tm:()=>c});var i=r(53536),n=r(79328),o=r.n(n);function a(e){return o()(e/100).format("0.0%")}function l(e){return o()(e).format()}function s(e){return(0,i.replace)(o()(e).format("0.00a"),".00","")}function c(e){return o()(e).format("0.0 b")}function d(e,t){return o()(e/t).format("0.0%")}},89176:(e,t,r)=>{r.r(t),r.d(t,{default:()=>$});var i=r(65043),n=r(67457),o=r(73216),a=r(19252),l=r(15285),s=r(31802),c=r(81398),d=r(48407),p=r(11737),x=r(96221),h=r(36880),m=r(80899),u=r(46987),g=r(86897),y=r(72812),j=r(68903),v=r(12110),f=r(96446),b=r(85865),A=r(81673),w=r(74605),C=r(19042),k=r(88911),R=r(67784),I=r(83462),D=r(26600),S=r(35316),P=r(98533),B=r(29347),U=r(42518),z=r(73338),L=r(50467),W=r(2990),_=r(70579);function T(e){let{isEdit:t,currentCompany:r}=e;const n=(0,o.Zp)(),{enqueueSnackbar:a}=(0,u.dh)(),s=(0,l.wA)(),{appendUrl:p}=(0,l.d4)(e=>e.user),{companyList:x}=(0,l.d4)(e=>e.company),[h,T]=(0,i.useState)(""),[$,F]=(0,i.useState)(!1),E=e=>{n((e=>{let t=e;return p&&(t=`${e}?${p}`),t})(e))},V=()=>{F(!1)},O=m.Ik().shape({company:m.Yj().required("Company is required")}),M=async()=>{const e=null===x||void 0===x?void 0:x.find(e=>e.company.toLowerCase()===Z.company.toLowerCase());e&&!t?(T(`Company with [${Z.company}] already exists!!`),F(!0)):t?t&&await(0,c.Yg)(s,Z,null===e||void 0===e?void 0:e._id):await(0,c.MI)(s,Z)},N=(0,g.Wx)({enableReinitialize:!0,initialValues:{company:(null===r||void 0===r?void 0:r.company)||"",description:(null===r||void 0===r?void 0:r.description)||"",avatarUrl:(null===r||void 0===r?void 0:r.avatarUrl)||null,code:(null===r||void 0===r?void 0:r.code)||""},validationSchema:O,onSubmit:async(e,r)=>{let{setSubmitting:i,resetForm:n,setErrors:o}=r;try{await M(),i(!1);(null===x||void 0===x?void 0:x.find(t=>t.company.toLowerCase()===e.company.toLowerCase()))&&!t||(n(),a(t?"Update success":"Create success",{variant:"success"}),E(d.nB.company.allCompanies))}catch(l){i(!1),o(l)}}}),{errors:X,values:Z,touched:q,handleSubmit:Y,isSubmitting:G,setFieldValue:H,getFieldProps:K}=N,Q=(0,i.useCallback)(e=>{const t=e[0];t&&H("avatarUrl",{...t,preview:URL.createObjectURL(t)})},[H]);return(0,_.jsx)(g.QI,{value:N,children:(0,_.jsx)(g.lV,{noValidate:!0,autoComplete:"off",onSubmit:Y,children:(0,_.jsxs)(j.Ay,{container:!0,spacing:3,children:[(0,_.jsx)(j.Ay,{item:!0,xs:12,md:4,children:(0,_.jsxs)(v.A,{sx:{py:10,px:3},children:[t&&(0,_.jsx)(L.A,{color:"active"!==Z.status?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:Z.status}),(0,_.jsxs)(f.A,{sx:{mb:5},children:[(0,_.jsx)(W.nZ,{accept:"image/*",file:Z.avatarUrl,maxSize:3145728,onDrop:Q,error:Boolean(q.avatarUrl&&X.avatarUrl),caption:(0,_.jsxs)(b.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,_.jsx)("br",{})," max size of ",(0,z.tm)(3145728)]})}),(0,_.jsx)(A.A,{error:!0,sx:{px:2,textAlign:"center"},children:q.avatarUrl&&X.avatarUrl})]}),t&&(0,_.jsx)(w.A,{labelPlacement:"start",control:(0,_.jsx)(C.A,{onChange:e=>H("status",e.target.checked?"banned":"active"),checked:"active"!==Z.status}),label:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,_.jsx)(b.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,_.jsx)(j.Ay,{item:!0,xs:12,md:8,children:(0,_.jsxs)(v.A,{sx:{p:3},children:[(0,_.jsxs)(k.A,{spacing:3,children:[(0,_.jsxs)(k.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:[(0,_.jsx)(R.A,{fullWidth:!0,label:"Company",...K("company"),disabled:t,error:Boolean(q.company&&X.company),helperText:q.company&&X.company}),(0,_.jsx)(R.A,{fullWidth:!0,label:"Description",...K("description"),error:Boolean(q.description&&X.description),helperText:q.description&&X.description})]}),(0,_.jsx)(k.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:(0,_.jsx)(R.A,{fullWidth:!0,label:"Code",...K("code"),SelectProps:{native:!0},error:Boolean(q.code&&X.code),helperText:q.code&&X.code})}),(0,_.jsx)(f.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,_.jsx)(y.A,{type:"submit",variant:"contained",loading:G,children:t?"Save Changes":"Create Company"})})]}),(0,_.jsxs)(I.A,{open:$,onClose:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,_.jsx)(D.A,{id:"alert-dialog-title",children:"Company Info"}),(0,_.jsx)(S.A,{children:(0,_.jsxs)(P.A,{id:"alert-dialog-description",children:[(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),h,(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),"Please change"]})}),(0,_.jsx)(B.A,{children:(0,_.jsx)(U.A,{autoFocus:!0,onClick:V,children:"OK"})})]})]})})]})})})}function $(){const{themeStretch:e}=(0,p.A)(),t=(0,l.wA)(),{pathname:r}=(0,o.zy)(),{companyId:m}=(0,o.g)(),{userList:u}=(0,l.d4)(e=>e.user),{companyList:g}=(0,l.d4)(e=>e.company),y=r.includes("edit"),j=g.find(e=>(0,n.kW)(e._id)===m);return(0,i.useEffect)(()=>{u||t((0,s.aU)()),g||t((0,c.i9)())},[t,g,u]),(0,_.jsx)(x.A,{title:"TestEnsure: Create a new Company",children:(0,_.jsxs)(a.A,{maxWidth:!e&&"xl",children:[(0,_.jsx)(h.A,{heading:y?"Edit company":"Create a new company",links:[{name:"All Companies",href:d.nB.company.allCompanies},{name:y?`${null===j||void 0===j?void 0:j.company}`:"New company"}]}),(0,_.jsx)(T,{isEdit:y,currentCompany:j})]})})}}}]);
//# sourceMappingURL=9176.6ab9dfd3.chunk.js.map