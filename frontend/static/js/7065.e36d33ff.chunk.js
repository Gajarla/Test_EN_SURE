"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[7065],{2990:(e,t,o)=>{o.d(t,{nZ:()=>H,jM:()=>R,_H:()=>z});var s=o(53536),i=o(5748),l=o(89488),n=o(51875),r=o(20901),a=o(23546),d=o(54119),c=o(34535),u=o(90310),p=o(63336),h=o(96446),v=o(85865),x=o(35721),m=o(37918),g=o(2050),b=o(48734),f=o(8266),j=o(67784),A=o(88911),y=o(42518),S=o(73338),w=o(76412),k=o(61882),q=o(99522),C=o(70579);const E=(0,c.Ay)("div")(e=>{let{theme:t}=e;return{outline:"none",display:"flex",textAlign:"center",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(5,1),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral,border:`1px dashed ${t.palette.grey[50032]}`,"&:hover":{opacity:.72,cursor:"pointer"},[t.breakpoints.up("md")]:{textAlign:"left",flexDirection:"row"}}});function R(e){let{error:t,showPreview:o=!0,files:c,onRemove:R,onRemoveAll:T,sx:D,...N}=e;const I=(null===c||void 0===c?void 0:c.length)>0,{getRootProps:_,getInputProps:F,isDragActive:U,isDragReject:P,fileRejections:L}=(0,l.VB)({multiple:!0,...N}),O="image/*"===(null===N||void 0===N?void 0:N.accept),z=()=>(0,C.jsx)(p.A,{variant:"outlined",sx:{py:1,px:2,mt:3,borderColor:"error.light",bgcolor:e=>(0,u.X4)(e.palette.error.main,.08)},children:L.map(e=>{let{file:t,errors:o}=e;const{path:s,size:i}=t;return(0,C.jsxs)(h.A,{sx:{my:1},children:[(0,C.jsxs)(v.A,{variant:"subtitle2",noWrap:!0,children:[s," - ",(0,S.tm)(i)]}),o.map(e=>(0,C.jsxs)(v.A,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},s)})});return(0,C.jsxs)(h.A,{sx:{width:"100%",...D},children:[(0,C.jsxs)(E,{..._(),sx:{...U&&{opacity:.72},...(P||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,C.jsx)("input",{...F()}),(0,C.jsx)(q.E4,{sx:{width:220}}),(0,C.jsxs)(h.A,{sx:{p:3,ml:{md:2}},children:[(0,C.jsx)(v.A,{gutterBottom:!0,variant:"h5",children:"Drop or Select file"}),(0,C.jsxs)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:["Drop files here or click\xa0",(0,C.jsx)(v.A,{variant:"body2",component:"span",sx:{color:"primary.main",textDecoration:"underline"},children:"browse"}),"\xa0through your machine"]}),O&&(0,C.jsx)(v.A,{variant:"body2",sx:{color:"text.secondary"},children:"Only image files are allowed."})]})]}),L.length>0&&(0,C.jsx)(z,{}),(0,C.jsx)(x.A,{disablePadding:!0,sx:{...I&&{my:3}},children:(0,C.jsx)(a.N,{children:null===c||void 0===c?void 0:c.map(e=>{const{name:t,size:l,preview:a}=e,c=(0,s.isString)(e)?e:t;return o?(0,C.jsxs)(m.Ay,{component:d.P.div,...k.xB,sx:{p:0,m:.5,width:80,height:80,borderRadius:1.5,overflow:"hidden",position:"relative",display:"inline-flex"},children:[(0,C.jsx)(p.A,{variant:"outlined",component:"img",src:(0,s.isString)(e)?e:a,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute"}}),(0,C.jsx)(h.A,{sx:{top:6,right:6,position:"absolute"},children:(0,C.jsx)(w.ZM,{size:"small",onClick:()=>R(e),sx:{p:"2px",color:"common.white",bgcolor:e=>(0,u.X4)(e.palette.grey[900],.72),"&:hover":{bgcolor:e=>(0,u.X4)(e.palette.grey[900],.48)}},children:(0,C.jsx)(i.In,{icon:r.A})})})]},c):(0,C.jsxs)(m.Ay,{component:d.P.div,...k.xB,sx:{my:1,py:.75,px:2,borderRadius:1,border:e=>`solid 1px ${e.palette.divider}`,bgcolor:"background.paper"},children:[(0,C.jsx)(g.A,{children:(0,C.jsx)(i.In,{icon:n.A,width:28,height:28})}),(0,C.jsx)(b.A,{primary:(0,s.isString)(e)?e:t,secondary:(0,s.isString)(e)?"":(0,S.tm)(l),primaryTypographyProps:{variant:"subtitle2"},secondaryTypographyProps:{variant:"caption"}}),(0,C.jsx)(f.A,{children:(0,C.jsx)(w.ZM,{edge:"end",size:"small",onClick:()=>R(e),children:(0,C.jsx)(i.In,{icon:r.A})})})]},c)})})}),I&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.A,{id:"standard-helperText",label:`${null===c||void 0===c?void 0:c.length} files selected`,variant:"standard",disabled:!0,border:"none",sx:{"& fieldset":{border:"none"}}}),(0,C.jsxs)(A.A,{direction:"row",justifyContent:"flex-end",children:[(0,C.jsx)(y.A,{onClick:T,sx:{mr:1.5},children:"Remove all"}),(0,C.jsx)(y.A,{variant:"contained",sx:{display:"none"},children:"Upload files"})]})]})]})}var T=o(83462),D=o(35316),N=o(98533),I=o(29347),_=o(65043),F=o(33211),U=o(60949);const P=(0,c.Ay)("div")(e=>{let{theme:t}=e;return{outline:"none",overflow:"hidden",textAlign:"center",position:"relative",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:t.spacing(0,0),borderRadius:t.shape.borderRadius,transition:t.transitions.create("padding"),backgroundColor:"#edf6fc",boxShadow:"0 0 1px #32749e",opacity:.85,"&:hover":{opacity:1,cursor:"pointer"},[t.breakpoints.up("md")]:{textAlign:"left",flexDirection:"row"}}}),L=(0,c.Ay)("div")(()=>({textAlign:"center",textDecoration:"underline",color:"#fff"})),O=(0,c.Ay)("div")(()=>({display:"flex"}));function z(e){let{error:t,isEdit:o,onDelete:s,onReplace:i,fileType:n,filePath:r,fileName:a,moduleID:d,file:c,sx:u,...p}=e;const[x,m]=(0,_.useState)(!1),{getRootProps:g,getInputProps:b,isDragActive:f,isDragReject:j}=(0,l.VB)({multiple:!1,accept:p.accept,onDrop:p.onDrop}),A=()=>{m(!1)};return(0,C.jsxs)(h.A,{sx:{...u,width:"100%",height:"150px"},children:[(0,C.jsxs)(P,{...g(),sx:{...f&&{opacity:.72},...(j||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[!c&&o&&(0,C.jsx)(L,{onClick:e=>{e.stopPropagation(),(async()=>{let e=null;try{if(e=await F.A.get(`${U.A.host}/api/projects/downloadModule/${d}/${n}/`,{responseType:"blob"}),e){const t=new Blob([e.data]),o=document.createElement("a");o.href=window.URL.createObjectURL(t),o.download=r,o.click()}}catch(t){console.log(e.data)}})()},children:(0,C.jsx)("span",{children:r})}),(0,C.jsxs)(O,{children:[(0,C.jsx)("input",{...b()}),(0,C.jsx)(q.E4,{sx:{marginLeft:"10px",height:"120px",width:"120px"}}),(0,C.jsx)(h.A,{sx:{p:2,ml:{md:2},paddingLeft:"0px",width:"100%",height:"140px",display:"flex",alignItems:"center",justifyContent:"center"},children:c||a?(0,C.jsxs)("div",{style:{width:"100%",padding:"10px 0px 0px 0px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,C.jsx)("filePath",{children:(null===c||void 0===c?void 0:c.name)||a}),(0,C.jsxs)("div",{style:{paddingTop:"20px",width:"150px",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,C.jsx)(y.A,{sx:{backgroundColor:"#32749e",height:"28px",padding:"5px 10px",color:"#fff"},onClick:e=>{e.stopPropagation(),i()},children:"Replace"}),null!==c&&void 0!==c&&c.name||a?(0,C.jsx)(y.A,{sx:{backgroundColor:"#32749e",height:"28px",padding:"5px 10px",color:"#fff"},onClick:e=>{e.stopPropagation(),m(!0)},children:"Delete"}):null]})]}):(0,C.jsxs)(v.A,{variant:"body2",sx:{color:"#000",fontSize:"16px",fontWeight:"bold"},children:["Drop files here OR click\xa0",(0,C.jsx)(v.A,{variant:"body2",component:"span",sx:{color:"#000",fontWeight:"bold",textDecoration:"underline"},children:"Browse"})]})})]})]}),(0,C.jsxs)(T.A,{open:x,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,C.jsx)(D.A,{children:(0,C.jsxs)(N.A,{id:"alert-dialog-description",children:[(0,C.jsx)("br",{}),"Are you sure want to delete this file ?"]})}),(0,C.jsxs)(I.A,{children:[(0,C.jsx)(y.A,{onClick:()=>{s(),m(!1)},children:"Yes"}),(0,C.jsx)(y.A,{onClick:A,children:"No"})]})]})]})}var B=o(45518);const $=(0,c.Ay)("div")(e=>{let{theme:t}=e;return{width:144,height:144,margin:"auto",borderRadius:"50%",padding:t.spacing(1),border:`1px dashed ${t.palette.grey[50032]}`}}),M=(0,c.Ay)("div")({zIndex:0,width:"100%",height:"100%",outline:"none",display:"flex",overflow:"hidden",borderRadius:"50%",position:"relative",alignItems:"center",justifyContent:"center","& > *":{width:"100%",height:"100%"},"&:hover":{cursor:"pointer","& .placeholder":{zIndex:9}}}),W=(0,c.Ay)("div")(e=>{var t;let{theme:o}=e;return{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",color:null===(t=o.palette)||void 0===t?void 0:t.text.secondary,backgroundColor:o.palette.background.neutral,transition:o.transitions.create("opacity",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.shorter}),"&:hover":{opacity:.72}}});function H(e){let{error:t,file:o,caption:n,sx:r,...a}=e;const{getRootProps:d,getInputProps:c,isDragActive:x,isDragReject:m,fileRejections:g}=(0,l.VB)({multiple:!1,...a}),b=()=>(0,C.jsx)(p.A,{variant:"outlined",sx:{py:1,px:2,my:2,borderColor:"error.light",bgcolor:e=>(0,u.X4)(e.palette.error.main,.08)},children:g.map(e=>{let{file:t,errors:o}=e;const{path:s,size:i}=t;return(0,C.jsxs)(h.A,{sx:{my:1},children:[(0,C.jsxs)(v.A,{variant:"subtitle2",noWrap:!0,children:[s," - ",(0,S.tm)(i)]}),o.map(e=>(0,C.jsxs)(v.A,{variant:"caption",component:"p",children:["- ",e.message]},e.code))]},s)})});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)($,{sx:r,children:(0,C.jsxs)(M,{...d(),sx:{...x&&{opacity:.72},...(m||t)&&{color:"error.main",borderColor:"error.light",bgcolor:"error.lighter"}},children:[(0,C.jsx)("input",{...c()}),o&&(0,C.jsx)(h.A,{component:"img",alt:"avatar",src:(0,s.isString)(o)?o:o.preview,sx:{zIndex:8,objectFit:"cover"}}),(0,C.jsxs)(W,{className:"placeholder",sx:{...o&&{opacity:0,color:"common.white",bgcolor:"grey.900","&:hover":{opacity:.72}}},children:[(0,C.jsx)(h.A,{component:i.In,icon:B.A,sx:{width:24,height:24,mb:1}}),(0,C.jsx)(v.A,{variant:"caption",children:o?"Update photo":"Upload photo"})]})]})}),n,g.length>0&&(0,C.jsx)(b,{})]})}},17065:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Te});var s=o(65043),i=o(19252),l=o(68903),n=o(73216),r=o(33211),a=o(11737),d=o(15285),c=o(31802),u=o(68780),p=o(49849),h=o(96221),v=o(88911),x=o(42518),m=o(85865),g=o(12110),b=o(96446),f=o(63336),j=o(43845),A=o(67784),y=o(81637),S=o(90889),w=o(86605),k=o(40710),q=o(73395),C=o(34535),E=o(26240),R=o(35475),T=o(53536),D=o(58293),N=o(92382),I=o(86178),_=o.n(I),F=o(48407),U=o(50467);o(90029);const P=e=>{const t=new Image;t.src=e;window.open("").document.write(t.outerHTML)};var L=o(56635),O=o(77137),z=o(95683),B=o(1068),$=o(5963),M=o(70579);const W={p:1,display:"flex",alignItems:"center",flexWrap:"wrap",bgcolor:"#edeff1","& > *":{m:"3px !important"},minHeight:"50px"},H=(0,C.Ay)("div")({display:"flex",justifyContent:"space-between"}),K=[{id:"UNTESTED",label:"UNTESTED"},{id:"PASSED",label:"PASSED"},{id:"SKIPPED",label:"SKIPPED"},{id:"FAILED",label:"FAILED"}];function V(e){const{className:t,style:o,onClick:s}=e;return(0,M.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}function J(e){const{className:t,style:o,onClick:s}=e;return(0,M.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}const Z={dots:!1,autoplay:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,appendDots:e=>(0,M.jsx)("ul",{children:e}),nextArrow:(0,M.jsx)(V,{}),prevArrow:(0,M.jsx)(J,{})};function G(e){var t,o,i,r;let{testCase:a,testRunId:c,moduleId:h,setSelectedTestCase:C,getTestCaseResults:I,getTestStepResults:V,setDefaultStepStatus:J}=e;const{pathname:G}=(0,n.zy)(),X=(0,d.wA)(),Y=G.includes("testCaseDetails"),{appendUrl:Q}=(0,d.d4)(e=>e.user),ee=(0,d.d4)(e=>e.testRun.testCaseEvidences),te=(0,d.d4)(e=>e.testRun.testCaseDetails),{roleConfig:oe,pageConfig:se,testCasesConfig:ie}=(0,d.d4)(e=>e.role),[le,ne]=(0,s.useState)(!1),re=(0,d.d4)(e=>e.testRun.testCaseEvidencesFetched),ae=(0,d.d4)(e=>e.testRun.currentFunction),de=(0,d.d4)(e=>e.testRun.testCaseEvidencesFetched),ce=G.includes("module")||ae.includes("module"),[ue,pe]=(0,s.useState)(),[he,ve]=(0,s.useState)(),xe="light"===(0,E.A)().palette.mode,[me,ge]=(0,s.useState)(""),[be,fe]=(0,s.useState)(!1),je=e=>{let t=e;return Q&&(t=`${e}?${Q}`),t},[Ae,ye]=(0,s.useState)();(0,s.useEffect)(()=>{ne(re)},[re]),(0,s.useEffect)(()=>{(async()=>{if(0===me.length){const e=await(0,z.fF)(O.mc.MODULE,O.Rk.CURRENT_MODULE)||JSON.parse((0,$.qt)(O.Rk.CURRENT_MODULE));e&&(ge(`${F.nB.testCase.testCasesByModule}/module/${e._id}`),se||((0,p.Cr)(X,null===oe||void 0===oe?void 0:oe.projectModules),(0,p.mj)(X,null)));const t=await(0,z.fF)(O.mc.RELEASE,O.Rk.CURRENT_RELEASE)||JSON.parse((0,$.qt)(O.Rk.CURRENT_RELEASE));t&&(pe(t),ge(`${F.nB.release.root}/release/${t._id}/testCases`),se||((0,p.Cr)(X,null===oe||void 0===oe?void 0:oe.releases),(0,p.mj)(X,null===oe||void 0===oe?void 0:oe.releaseTestCases)));const o=await(0,z.fF)(O.mc.TESTRUN,O.Rk.CURRENT_TESTRUN)||JSON.parse((0,$.qt)(O.Rk.CURRENT_TESTRUN));o&&(ve(o),ge(`${F.nB.testRuns.root}/testRuns/${o._id}/testCases`),se||((0,p.Cr)(X,null===oe||void 0===oe?void 0:oe.testRuns),(0,p.mj)(X,null===oe||void 0===oe?void 0:oe.testRunsTestCases)))}})()},[me,oe]),(0,s.useEffect)(()=>{ye(null===te||void 0===te?void 0:te.status)},[null===te||void 0===te?void 0:te.status]),(0,s.useEffect)(()=>{I((null===a||void 0===a?void 0:a.testCaseResultsFile)||(null===te||void 0===te?void 0:te.testCaseResultsFile))},[I,a,te]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,M.jsx)(x.A,{size:"small",variant:"outlined",color:"primary",component:R.N_,to:je(`${F.nB.testCase.testcaseDetails}/${null===a||void 0===a?void 0:a._id}`),children:null===a||void 0===a?void 0:a.testCaseID}),(0,M.jsx)(v.A,{direction:"row",spacing:1,justifyContent:"flex-start",flexGrow:1,sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,M.jsx)(m.A,{variant:"h6",sx:{color:"text?.primary",paddingLeft:"1rem",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:null===a||void 0===a?void 0:a.testCaseTitle})}),Y&&(0,M.jsx)(v.A,{direction:"row",alignItems:"center",children:(0,M.jsx)(x.A,{size:"small",variant:"contained",color:"primary",component:R.N_,to:je(me),onClick:()=>(0,B.UE)(X,!0),children:"Back"})})]})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsx)(g.A,{sx:{p:3,bgcolor:"#fff",borderRadius:"5px"},children:(0,M.jsxs)(v.A,{spacing:2,children:[(0,M.jsxs)(H,{children:[(0,M.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"Priority :"}),(0,M.jsx)(b.A,{sx:{mr:1,ml:1,width:14,height:14,borderRadius:.5,bgcolor:"error.main"}}),(0,M.jsx)(m.A,{variant:"subtitle2",sx:{textTransform:"capitalize",color:"text?.primary"},children:(0,T.sample)(["P1","P2","P3"])})]}),(0,M.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,M.jsxs)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:["Last Updated : ",(0,M.jsx)("span",{children:"\xa0"})]}),(0,M.jsx)(m.A,{variant:"subtitle2",sx:{color:"text?.primary"},children:ce?_()((null===a||void 0===a?void 0:a.updatedAt)||(null===a||void 0===a?void 0:a.createdAt)).format("MMM DD yyyy, hh:mm a"):_()((null===a||void 0===a?void 0:a.executionEnd)>(null===te||void 0===te?void 0:te.dateStatusLastUpdated)&&(null===a||void 0===a?void 0:a.executionEnd)||(null===te||void 0===te?void 0:te.dateStatusLastUpdated)>(null===a||void 0===a?void 0:a.executionEnd)&&(null===te||void 0===te?void 0:te.dateStatusLastUpdated)||(null===a||void 0===a?void 0:a.createdAt)).format("MMM DD yyyy, hh:mm a")})]})]}),(0,M.jsx)(H,{children:(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"Tags"})}),(0,M.jsx)(f.A,{sx:W,children:null===a||void 0===a||null===(t=a.tags)||void 0===t?void 0:t.map((e,t)=>(0,M.jsx)(j.A,{label:e,icon:(0,M.jsx)(q.A,{})},t))},"tag")]})}),(0,M.jsx)(H,{children:(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"Automated?"})}),(0,M.jsx)(f.A,{sx:W,children:null!==a&&void 0!==a&&a.automationStatus?"Yes":"No"})]})}),!ce&&(0,M.jsxs)(H,{children:[(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"STATUS"})}),(0,M.jsxs)(f.A,{sx:W,children:[(ue||!(null!==oe&&void 0!==oe&&null!==(o=oe.testRuns)&&void 0!==o&&o.edit))&&"UNTESTED"!==(null===a||void 0===a?void 0:a.status)&&(0,M.jsx)(U.A,{variant:xe?"ghost":"filled",color:("FAILED"===(null===a||void 0===a?void 0:a.status)?"error":"SKIPPED"===(null===a||void 0===a?void 0:a.status)&&"skipped")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:null===a||void 0===a?void 0:a.status}),(ue||!(null!==oe&&void 0!==oe&&null!==(i=oe.testRuns)&&void 0!==i&&i.edit))&&"UNTESTED"===(null===a||void 0===a?void 0:a.status)&&(0,M.jsx)(U.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:null===a||void 0===a?void 0:a.status}),he&&(null===oe||void 0===oe||null===(r=oe.testRuns)||void 0===r?void 0:r.edit)&&(0,M.jsx)(A.A,{select:!0,value:Ae||(null===a||void 0===a?void 0:a.status),SelectProps:{native:!0},onChange:e=>{fe(!0),(e=>{const t=e.target.value,o={...te,selectedTestCaseStatus:t};X((0,u.N9)(o))})(e),null!==a&&void 0!==a&&a.testCaseResultsFile&&I(null===a||void 0===a?void 0:a.testCaseResultsFile)},sx:{"& fieldset":{border:"0 !important"},"& select":{pl:1,py:.5,pr:"20px !important",typography:"subtitle2"},"& .MuiOutlinedInput-root":{borderRadius:.75,bgcolor:"background.neutral"},"& .MuiNativeSelect-icon":{top:4,right:0,width:20,height:20}},name:"status",id:"status",children:K.map(e=>(0,M.jsx)("option",{value:e.label,children:e.label},e.id))})]})]}),(null===a||void 0===a?void 0:a.executionDuration)&&(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"Execution duration"})}),(0,M.jsx)(f.A,{sx:W,children:null===a||void 0===a?void 0:a.executionDuration})]})]})]})})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsxs)(v.A,{spacing:2,sx:{width:1},children:[(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:"Description"}),(0,M.jsx)(m.A,{variant:"body2",sx:{color:"text?.primary"},children:null===a||void 0===a?void 0:a.testCaseDescription})]})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:ce||null===ie||void 0===ie||!ie.screenshots||de?!ce&&!(null!==ie&&void 0!==ie&&ie.screenshots)&&0!==(null===ee||void 0===ee?void 0:ee.length)&&(0,M.jsx)("div",{children:(0,M.jsxs)(S.A,{children:[(0,M.jsxs)(w.A,{expandIcon:(0,M.jsx)(D.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[!de&&(0,M.jsx)(b.A,{sx:{display:"flex"},children:(0,M.jsx)(y.A,{children:"Test Case Execution Evidence"})}),de&&(null===ee||void 0===ee?void 0:ee.length)>0&&(0,M.jsx)(m.A,{children:"Test Case Execution Evidence"}),de&&0===(null===ee||void 0===ee?void 0:ee.length)&&""]}),(0,M.jsxs)(k.A,{children:[!le&&(0,M.jsx)(b.A,{sx:{display:"flex"},children:(0,M.jsx)(y.A,{})}),le&&(null===ee||void 0===ee?void 0:ee.length)>0&&(0,M.jsx)(N.A,{...Z,children:ee.map((e,t)=>(0,M.jsx)(f.A,{elevation:5,children:(0,M.jsx)("img",{src:e,alt:" ",style:{objectFit:"contain",objectPosition:"center",zIndex:2,cursor:"pointer"},onClick:()=>P(e),role:"presentation"})},t))}),le&&0===(null===ee||void 0===ee?void 0:ee.length)&&"No evidence found"]})]})}):(0,M.jsx)(b.A,{sx:{display:"flex"},children:(0,M.jsx)(y.A,{})})})]}),(0,M.jsx)(L.A,{testRunId:c,testCase:a,getTestCaseResults:I,setSelectedTestCase:C,open:be,setOpen:fe})]})}var X=o(76839),Y=o(25078),Q=o(12299),ee=o(25754),te=o(60587),oe=o(88446);function se(){const e=(0,d.wA)(),[t,o]=(0,s.useState)(!1),[i,r]=(0,s.useState)("Show more ..."),a=(0,d.d4)(e=>e.testRun.testStepEvidences),c=(0,d.d4)(e=>e.testRun.testCaseEvidencesFetched),{testCaseEvidencesFetched:p}=(0,d.d4)(e=>e.testRun),h=(0,d.d4)(e=>e.testRun.testStepDetails),x=(0,d.d4)(e=>e.testRun.testStepLogs),g=(0,d.d4)(e=>e.testRun.currentFunction),{testCasesConfig:f}=(0,d.d4)(e=>e.role),{pathname:j}=(0,n.zy)(),A=j.includes("testCaseDetails"),q=j.includes("module")||g.includes("module")||(0,$.qt)(O.Rk.CURRENT_MODULE);return(0,s.useEffect)(()=>{(async()=>{if(!a)if(c)0!==(null===a||void 0===a?void 0:a.length)&&(0,z.n5)(O.mc.TESTRUN,O.Rk.TESTSTEP_RESULTS,a),(0,z.n5)(O.mc.TESTRUN,O.Rk.EVIDENCES_FETCHED,c),0!==(null===h||void 0===h?void 0:h.length)&&(0,z.n5)(O.mc.TESTRUN,O.Rk.TESTSTEP_DETAILS,h),0!==(null===x||void 0===x?void 0:x.length)&&(0,z.n5)(O.mc.TESTRUN,O.Rk.TESTSTEP_LOGS,x),(0,z.n5)(O.mc.TESTRUN,O.Rk.CURRENT_FUNCTION,g),(0,z.n5)(O.mc.TESTRUN,O.Rk.TESTCASE_EVIDENCES_FECTHED,p);else if(A){const t=await(0,z.fF)(O.mc.TESTRUN,O.Rk.TESTSTEP_RESULTS);t&&e((0,u.h_)(t)),await(0,z.fF)(O.mc.TESTRUN,O.Rk.EVIDENCES_FETCHED);const o=await(0,z.fF)(O.mc.TESTRUN,O.Rk.TESTSTEP_DETAILS);o&&e((0,u.ZK)(o));const s=await(0,z.fF)(O.mc.TESTRUN,O.Rk.TESTSTEP_LOGS);s&&e((0,u.Mm)(s));const i=await(0,z.fF)(O.mc.TESTRUN,O.Rk.CURRENT_FUNCTION);i&&e((0,u.mU)(i));const l={testcaseevidences:[],testCaseEvidencesFetched:!0};e((0,u.tv)(l))}})()},[e,g,A,h,c,p,x,a]),(null===h||void 0===h?void 0:h.length)>0&&(0,M.jsx)(l.Ay,{container:!0,spacing:3,children:(0,M.jsxs)(l.Ay,{item:!0,xs:12,md:12,children:[(0,M.jsxs)(v.A,{spacing:2,sx:{width:1},direction:"row",style:{paddingBottom:"3%"},children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},children:(0,M.jsx)(m.A,{spacing:2,variant:"overline",sx:{color:"text.secondary"},children:"Steps"})}),!q&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.A,{spacing:2,sx:{width:1},style:{paddingLeft:"60%"},children:(0,M.jsx)(m.A,{spacing:2,variant:"overline",sx:{color:"text.secondary"},children:"Status"})}),(0,M.jsx)(v.A,{spacing:1,sx:{width:1},style:{paddingLeft:"3%"},children:(0,M.jsx)(m.A,{spacing:2,variant:"overline",sx:{color:"text.secondary"}})}),(null===f||void 0===f?void 0:f.screenshots)&&(0,M.jsx)(v.A,{spacing:1,sx:{width:1},children:(0,M.jsx)(m.A,{spacing:2,variant:"overline",sx:{color:"text.secondary"},children:"Screenshot"})})]})]}),(0,M.jsx)(v.A,{children:(0,M.jsxs)(v.A,{spacing:1,alignItems:"flex-start",children:[(0,M.jsxs)(X.A,{orientation:"vertical",sx:{width:"100%"},children:[!t&&q&&h.slice(0,5).map((e,t)=>{var o;return(0,M.jsx)(Y.A,{active:!0,children:(0,M.jsx)(Q.A,{children:(0,M.jsxs)(v.A,{direction:"row",children:[(0,M.jsx)(v.A,{sx:{margin:1.1},style:{width:"70%"},children:e.description}),!q&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.A,{sx:{margin:1.5},children:e.status&&"UNTESTED"!==e.status?(0,M.jsx)(U.A,{variant:"ghost",color:("FAILED"===e.status?"error":"SKIPPED"===e.status&&"warning")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:e.status||"UNTESTED"}):(0,M.jsx)(U.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:e.status||"UNTESTED"})}),(null===f||void 0===f?void 0:f.screenshots)&&(0,M.jsx)(v.A,{style:{paddingLeft:e.status===O.Pm.SKIPPED?"18%":"13%"},children:(0,M.jsx)(ee.A,{max:4,sx:{"& .MuiAvatar-root":{width:32,height:32}},style:{flexDirection:"row"},children:null===(o=a[e._id])||void 0===o?void 0:o.map(e=>(0,M.jsx)(te.A,{alt:"image",src:e,onClick:()=>P(e)},"image"))})})]})]})})},t)}),!t&&!q&&h.slice(0,5).map((e,t)=>{var o;return(0,M.jsx)(Y.A,{active:!0,children:(0,M.jsxs)(S.A,{children:[(0,M.jsx)(w.A,{expandIcon:(0,M.jsx)(D.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,M.jsx)(Q.A,{style:{width:"100%",height:"20px"},children:(0,M.jsxs)(v.A,{direction:"row",children:[(0,M.jsx)(v.A,{sx:{margin:1.1},style:{width:"70%"},children:e.description}),!q&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.A,{sx:{margin:1.5},children:e.status&&"UNTESTED"!==e.status?(0,M.jsx)(U.A,{variant:"ghost",color:("FAILED"===e.status?"error":"SKIPPED"===e.status&&"warning")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:e.status||"UNTESTED"}):(0,M.jsx)(U.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:e.status||"UNTESTED"})}),(null===f||void 0===f?void 0:f.screenshots)&&(0,M.jsx)(v.A,{style:{paddingLeft:e.status===O.Pm.SKIPPED?"18%":"13%"},children:(0,M.jsx)(ee.A,{max:4,sx:{"& .MuiAvatar-root":{width:32,height:32}},style:{flexDirection:"row"},children:null===(o=a[e._id])||void 0===o?void 0:o.map(e=>(0,M.jsx)(te.A,{alt:"image",src:e,onClick:()=>P(e)},"image"))})})]})]})})}),(0,M.jsxs)(k.A,{children:[" ",!c&&(0,M.jsx)(b.A,{sx:{display:"flex"},children:(0,M.jsx)(y.A,{})}),c&&a[e._id]&&(null===f||void 0===f?void 0:f.logs)&&(0,M.jsx)(M.Fragment,{children:x[e._id]&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("div",{style:{boxSizing:"border-box",width:"100%",fontFamily:"'Public Sans', sans-serif",fontSize:"0.9rem",fontWeight:"400",lineHeight:"1.5",padding:"8px 12px",borderRadius:"8px",scrollbarWidth:"none",resize:"vertical",color:"#1C2025",background:"#fff",border:"1px solid #DAE2ED",boxShadow:"0px 2px 2px #F3F6F9",overflowY:"scroll",height:"250px"},children:x[e._id].join(" ").split("\n").map(t=>O.Zt.find(e=>t.toLowerCase().includes(e.toLowerCase()))?(0,M.jsx)(v.A,{style:{color:"PASSED"===e.status?"#229A16":"FAILED"===e.status&&"#B72103",backgroundColor:"PASSED"===e.status?"#e4f8dd":"FAILED"===e.status&&"#ffe2e1",fontWeight:"500"},children:t}):(0,M.jsx)(v.A,{children:t}))})})}),c&&!a[e._id]&&"No evidence found"]})]})},t)}),t&&q&&(null===h||void 0===h?void 0:h.map((e,t)=>{var o;return(0,M.jsx)(Y.A,{active:!0,children:(0,M.jsx)(Q.A,{children:(0,M.jsxs)(v.A,{direction:"row",children:[(0,M.jsx)(v.A,{sx:{margin:1.1},style:{width:"70%"},children:e.description}),!q&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.A,{sx:{margin:1.5},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:e.status||"UNTESTED"})}),(0,M.jsx)(v.A,{style:{paddingLeft:"5%"},children:(0,M.jsx)(ee.A,{max:4,sx:{"& .MuiAvatar-root":{width:32,height:32}},style:{flexDirection:"row"},children:null===(o=a[e._id])||void 0===o?void 0:o.map(e=>(0,M.jsx)(te.A,{alt:"image",src:e,onClick:()=>P(e)},"image"))})})]})]})})},t)})),t&&!q&&(null===h||void 0===h?void 0:h.map((e,t)=>{var o;return(0,M.jsx)(Y.A,{active:!0,children:(0,M.jsxs)(S.A,{children:[(0,M.jsx)(w.A,{expandIcon:(0,M.jsx)(D.A,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,M.jsx)(Q.A,{style:{width:"100%",height:"20px"},children:(0,M.jsxs)(v.A,{direction:"row",children:[(0,M.jsx)(v.A,{sx:{margin:1.1},style:{width:"70%"},children:e.description}),!q&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.A,{sx:{margin:1.5},children:(0,M.jsx)(m.A,{variant:"overline",sx:{color:"text.secondary"},children:e.status&&"UNTESTED"!==e.status?(0,M.jsx)(U.A,{variant:"ghost",color:("FAILED"===e.status?"error":"SKIPPED"===e.status&&"warning")||"success",sx:{textTransform:"capitalize",mx:"auto"},children:e.status||"UNTESTED"}):(0,M.jsx)(U.A,{variant:"ghost",sx:{textTransform:"capitalize",mx:"auto"},style:{backgroundColor:"#9A9B9C"},children:e.status||"UNTESTED"})})}),(null===f||void 0===f?void 0:f.screenshots)&&(0,M.jsx)(v.A,{style:{paddingLeft:e.status===O.Pm.SKIPPED?"18%":"13%"},children:(0,M.jsx)(ee.A,{max:4,sx:{"& .MuiAvatar-root":{width:32,height:32}},style:{flexDirection:"row"},children:null===(o=a[e._id])||void 0===o?void 0:o.map(e=>(0,M.jsx)(te.A,{alt:"image",src:e,onClick:()=>P(e)},"image"))})})]})]})})}),(0,M.jsxs)(k.A,{children:[!c&&(0,M.jsx)(b.A,{sx:{display:"flex"},children:(0,M.jsx)(y.A,{})}),c&&a[e._id]&&(null===f||void 0===f?void 0:f.logs)&&(0,M.jsx)(M.Fragment,{children:x[e._id]&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("div",{style:{boxSizing:"border-box",width:"100%",fontFamily:"'Public Sans', sans-serif",fontSize:"0.9rem",fontWeight:"400",lineHeight:"1.5",padding:"8px 12px",borderRadius:"8px",scrollbarWidth:"none",resize:"vertical",color:"#1C2025",background:"#fff",border:"1px solid #DAE2ED",boxShadow:"0px 2px 2px #F3F6F9",overflowY:"scroll",height:"250px"},children:x[e._id].join(" ").split("\n").map(t=>O.Zt.find(e=>t.toLowerCase().includes(e.toLowerCase()))?(0,M.jsx)(v.A,{style:{color:"PASSED"===e.status?"#229A16":"FAILED"===e.status&&"#B72103",backgroundColor:"PASSED"===e.status?"#e4f8dd":"FAILED"===e.status&&"#ffe2e1",fontWeight:"500"},children:t}):(0,M.jsx)(v.A,{children:t}))})})}),c&&!a[e._id]&&"No evidence found"]})]})},t)}))]}),(null===h||void 0===h?void 0:h.length)>5&&(0,M.jsx)(oe.A,{style:{cursor:"pointer"},onClick:()=>{o(!t),r(t?"Show More ...":"Show Less ...")},children:i})]})})]})})}var ie=o(39336),le=o(24056),ne=o(22016),re=o(34230),ae=o(86506),de=o(5748),ce=o(37354),ue=o(17392),pe=o(58769),he=o(69525);function ve(e){var t,o;let{posts:i}=e;const[l,n]=(0,s.useState)(""),r=(0,s.useRef)(null);return(0,M.jsxs)(v.A,{spacing:3,sx:{p:3},children:[(0,M.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,M.jsx)(pe.A,{}),(0,M.jsx)(A.A,{multiline:!0,maxRows:3,fullWidth:!0,size:"small",value:l,inputRef:r,placeholder:"Write a comment\u2026",onChange:e=>{n(e.target.value)},sx:{ml:2,mr:1,"& fieldset":{borderWidth:"1px !important",borderColor:e=>`${e.palette.grey[50032]} !important`}}}),(0,M.jsx)(ue.A,{children:(0,M.jsx)(de.In,{icon:ce.A,width:24,height:24})})]}),(0,M.jsx)(v.A,{spacing:1.5,children:null===(t=i[1])||void 0===t||null===(o=t.comments)||void 0===o?void 0:o.map(e=>{return(0,M.jsxs)(v.A,{direction:"row",spacing:2,children:[(0,M.jsx)(te.A,{alt:e.author.name,src:e.author.avatarUrl}),(0,M.jsxs)(f.A,{sx:{p:1.5,flexGrow:1,bgcolor:"background.neutral"},children:[(0,M.jsxs)(v.A,{direction:{xs:"column",sm:"row"},alignItems:{sm:"center"},justifyContent:"space-between",sx:{mb:.5},children:[(0,M.jsx)(m.A,{variant:"subtitle2",children:e.author.name}),(0,M.jsx)(m.A,{variant:"caption",sx:{color:"text.disabled"},children:(t=e.createdAt,(0,he.A)(new Date(t),"dd MMMM yyyy"))})]}),(0,M.jsx)(m.A,{variant:"body2",sx:{color:"text.secondary"},children:e.message})]})]},e.id);var t})})]})}var xe=o(79650),me=o(71806),ge=o(84882),be=o(28076),fe=o(10039),je=o(73460),Ae=o(83003),ye=o(67457),Se=o(22038),we=o(69092);function ke(e){let{setOpenDetails:t}=e;const o=(0,E.A)(),s=(0,Ae.wA)(),i="light"===o.palette.mode,l=(0,n.Zp)(),{appendUrl:r}=(0,Ae.d4)(e=>e.user),{runHistory:a}=(0,Ae.d4)(e=>e.testRun.testCaseDetails),d=e=>{l((e=>{let t=e;return r&&(t=`${e}?${r}`),t})(e))};return(0,M.jsx)(v.A,{spacing:3,sx:{p:2},children:(0,M.jsxs)(v.A,{spacing:1.5,children:[(0,M.jsx)(we.A,{children:(0,M.jsx)(xe.A,{sx:{minWidth:720},children:(0,M.jsxs)(me.A,{size:"small",children:[(0,M.jsx)(ge.A,{children:(0,M.jsxs)(be.A,{children:[(0,M.jsx)(fe.A,{sx:{minWidth:240},children:"Release"}),(0,M.jsx)(fe.A,{sx:{minWidth:160},children:"Result"}),(0,M.jsx)(fe.A,{sx:{minWidth:160},children:"Version"}),(0,M.jsx)(fe.A,{sx:{minWidth:120},children:"# Run"}),(0,M.jsx)(fe.A,{sx:{minWidth:200},children:"Ran On"}),(0,M.jsx)(fe.A,{})]})}),(0,M.jsx)(je.A,{children:a&&a.map(e=>(0,M.jsxs)(be.A,{children:[(0,M.jsx)(fe.A,{children:(0,M.jsx)(v.A,{direction:"row",alignItems:"center",spacing:2,children:(0,M.jsx)(x.A,{size:"small",variant:"outlined",color:"primary",sx:{border:"none",background:"none",padding:0},onClick:()=>{return o=e.releaseID,t(!1),(0,B.UE)(s,!0),void d(`${F.nB.release.root}/release/${o}/testCases`);var o},children:`${e.releaseName}_${e.jenkinsJobID}`})})}),(0,M.jsx)(fe.A,{children:(0,M.jsx)(U.A,{variant:i?"ghost":"filled",color:("PASSED"===e.result.toUpperCase()?"success":"SKIPPED"===e.result.toUpperCase()&&"skipped")||"error",children:(0,ye.o3)(e.result)})}),(0,M.jsx)(fe.A,{children:" V1 "}),(0,M.jsx)(fe.A,{children:e.jenkinsJobID}),(0,M.jsx)(fe.A,{children:(0,he.A)(new Date(e.dateStatusLastUpdated),"MMM dd yyyy, hh:mm a")})]},e.id))})]})})}),(0,M.jsx)(ie.A,{}),(0,M.jsx)(b.A,{sx:{p:2,textAlign:"right"},children:(0,M.jsx)(x.A,{to:"#",size:"small",color:"inherit",component:R.N_,endIcon:(0,M.jsx)(de.In,{icon:Se.A}),children:"View All"})})]})})}var qe=o(77739);function Ce(e){let{testCase:t}=e;const o="light"===(0,E.A)().palette.mode,{defectList:i}=(0,Ae.d4)(e=>e.defect),[l,n]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!l){const e=null===i||void 0===i?void 0:i.filter(e=>e.testCaseId===(null===t||void 0===t?void 0:t._id)||e.testNodeId===(null===t||void 0===t?void 0:t._id));n(e)}},[i,null===t||void 0===t?void 0:t._id,l]),(0,M.jsx)(v.A,{spacing:3,sx:{p:2},children:(0,M.jsxs)(v.A,{spacing:1.5,children:[(0,M.jsx)(we.A,{children:(0,M.jsx)(xe.A,{sx:{minWidth:720},children:(0,M.jsxs)(me.A,{size:"small",children:[(0,M.jsx)(ge.A,{children:(0,M.jsxs)(be.A,{children:[(0,M.jsx)(fe.A,{sx:{minWidth:140},children:"Defect"}),(0,M.jsx)(fe.A,{sx:{minWidth:280},children:"Title"}),(0,M.jsx)(fe.A,{sx:{minWidth:140},children:"Status"}),(0,M.jsx)(fe.A,{sx:{minWidth:80},children:"Raised By"}),(0,M.jsx)(fe.A,{sx:{minWidth:140},children:"Raised On"}),(0,M.jsx)(fe.A,{})]})}),(0,M.jsx)(je.A,{children:l&&0!==(null===l||void 0===l?void 0:l.length)&&l.map(e=>{var t,s,i,l,n,r,a,d,c,u;return(0,M.jsxs)(be.A,{children:[(0,M.jsx)(fe.A,{children:(0,M.jsx)(v.A,{direction:"row",alignItems:"center",spacing:2,children:(0,M.jsx)(x.A,{size:"small",variant:"outlined",color:"primary",sx:{border:"none",background:"none",padding:0},onClick:()=>{return t=null===e||void 0===e?void 0:e.defectUrl,void window.open(t,"_blank");var t},children:`${null===e||void 0===e||null===(t=e.defectTrack)||void 0===t?void 0:t.key}`})})}),(0,M.jsx)(fe.A,{children:`${null===e||void 0===e?void 0:e.summary}`}),(0,M.jsx)(fe.A,{children:(0,M.jsx)(U.A,{variant:o?"ghost":"filled",color:("To Do"===e.defectStatus?"info":"In Progress"===e.defectStatus&&"warning")||"success",children:e.defectStatus})}),(0,M.jsx)(fe.A,{children:(0,M.jsx)(qe.A,{title:`${null===e||void 0===e||null===(s=e.createdBy)||void 0===s?void 0:s.firstName} ${null===e||void 0===e||null===(i=e.createdBy)||void 0===i?void 0:i.lastName}`,children:(0,M.jsx)(te.A,{alt:null===e||void 0===e||null===(a=e.createdBy)||void 0===a?void 0:a.firstName,src:(null===e||void 0===e||null===(d=e.createdBy)||void 0===d?void 0:d.avatarUrl)||(null===e||void 0===e||null===(c=e.createdBy)||void 0===c?void 0:c.firstName)},null===e||void 0===e||null===(r=e.createdBy)||void 0===r?void 0:r.firstName)},`${null===e||void 0===e||null===(l=e.createdBy)||void 0===l?void 0:l.firstName} ${null===e||void 0===e||null===(n=e.createdBy)||void 0===n?void 0:n.lastName}`)}),(0,M.jsx)(fe.A,{children:(u=e.createdAt,new Date(u).toLocaleDateString("en-ZA",{day:"numeric",month:"long",year:"numeric"}))})]},e.id)})})]})})}),(0,M.jsx)(ie.A,{}),(0,M.jsx)(b.A,{sx:{p:2,textAlign:"right"},children:(0,M.jsx)(x.A,{to:"#",size:"small",color:"inherit",component:R.N_,endIcon:(0,M.jsx)(de.In,{icon:Se.A}),children:"View All"})})]})})}function Ee(e){let{posts:t,setOpenDetails:o,testCase:i}=e;const[n,r]=(0,s.useState)("1"),a=(0,d.wA)(),{roleConfig:c,testCasesConfig:u}=(0,d.d4)(e=>e.role),h=(0,$.qt)(O.Rk.CURRENT_MODULE);return console.log("isModule",h),console.log("testCasesConfig:",u),console.log("Card, Grid, Tab, Box, Divider",g.A),console.log("Card, Grid, Tab, Box, Divider",l.Ay),console.log("Card, Grid, Tab, Box, Divider",b.A),console.log("Card, Grid, Tab, Box, Divider",ie.A),console.log("TabContext, TabList, TabPanel",ne.Ay),console.log("TabContext, TabList, TabPanel",re.A),console.log("TabContext, TabList, TabPanel",ae.A),(0,s.useEffect)(()=>{(async()=>{if(!u){await(0,z.fF)(O.mc.RELEASE,O.Rk.CURRENT_RELEASE)&&((0,p.Cr)(a,null===c||void 0===c?void 0:c.releases),(0,p.mj)(a,null===c||void 0===c?void 0:c.releaseTestCases));await(0,z.fF)(O.mc.TESTRUN,O.Rk.CURRENT_TESTRUN)&&((0,p.Cr)(a,null===c||void 0===c?void 0:c.testRuns),(0,p.mj)(a,null===c||void 0===c?void 0:c.testRunsTestCases))}})()},[a,u]),(0,M.jsx)(l.Ay,{container:!0,spacing:3,children:(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsx)(g.A,{children:(0,M.jsxs)(ne.Ay,{value:n,children:[(0,M.jsx)(b.A,{sx:{px:3,bgcolor:"background.neutral"},children:(0,M.jsxs)(re.A,{onChange:(e,t)=>{r(t)},children:[(h||(null===u||void 0===u?void 0:u.comments))&&(0,M.jsx)(le.A,{disableRipple:!0,value:"1",label:"Comments"}),(h||(null===u||void 0===u?void 0:u.runHistory))&&(0,M.jsx)(le.A,{disableRipple:!0,value:"2",label:"Run History"}),(h||(null===u||void 0===u?void 0:u.changeLog))&&(0,M.jsx)(le.A,{disableRipple:!0,value:"3",label:"Change Log"}),(h||(null===u||void 0===u?void 0:u.issues))&&(0,M.jsx)(le.A,{disableRipple:!0,value:"4",label:"Issues"})]})}),(0,M.jsx)(ie.A,{}),(h||(null===u||void 0===u?void 0:u.comments))&&(0,M.jsx)(ae.A,{value:"1",children:(0,M.jsx)(b.A,{sx:{p:2},children:(0,M.jsx)(ve,{posts:t})})}),(h||(null===u||void 0===u?void 0:u.runHistory))&&(0,M.jsx)(ae.A,{value:"2",children:(0,M.jsx)(b.A,{sx:{p:2},children:(0,M.jsx)(ke,{posts:t,setOpenDetails:o})})}),(h||(null===u||void 0===u?void 0:u.changeLog))&&(0,M.jsx)(ae.A,{value:"3",children:(0,M.jsx)(b.A,{sx:{p:3},children:"Change Log"})}),(h||(null===u||void 0===u?void 0:u.issues))&&(0,M.jsx)(ae.A,{value:"4",children:(0,M.jsx)(b.A,{sx:{p:3},children:(0,M.jsx)(Ce,{posts:t,setOpenDetails:o,testCase:i})})})]})})})})}var Re=o(88930);function Te(e){let{testCase:t,testRunId:o,moduleId:v,setOpenDetails:x}=e;const{pathname:m}=(0,n.zy)(),{themeStretch:g}=(0,a.A)(),b=(0,d.wA)(),{posts:f}=(0,d.d4)(e=>e.user),{testCaseId:j}=(0,n.g)(),A=m.includes("module"),{rows:y}=(0,d.d4)(e=>e.testRun),[S,w]=(0,s.useState)(null),{testCasesConfig:k}=(0,d.d4)(e=>e.role),{roleConfig:q}=(0,d.d4)(e=>e.role),C=(0,d.d4)(e=>e.testRun.allTestRuns),E=(0,d.d4)(e=>e.testRun.testCaseDetails),R=(0,d.d4)(e=>e.testRun.currentTestRun),T={...(0,d.d4)(e=>{var t;return null===(t=e.testRun)||void 0===t?void 0:t.updatedTestCases})},D=null===R||void 0===R?void 0:R._id,N=(0,s.useCallback)(async()=>{const e=null===y||void 0===y?void 0:y.find(e=>e._id===j);if(w(e),!e){const e=await(0,z.fF)(O.mc.TESTRUN,O.Rk.SELECTED_TESTCASE);w(e)}if(e&&(0,$.ou)("selectedTestCase",JSON.stringify(e)),!e){const e=JSON.parse((0,$.qt)("selectedTestCase"));w(e),U(null===e||void 0===e?void 0:e._id,[e])}},[y,j]),I=(0,s.useCallback)(()=>{try{var e;if(null===E||void 0===E||!E.runHistory||null!==E&&void 0!==E&&E.runHistory&&E.testNodeID!==(null===E||void 0===E||null===(e=E.runHistory[0])||void 0===e?void 0:e.testNodeID)){const e=[];null===C||void 0===C||C.forEach((o,s)=>{if(parseInt(s,10)<=C.length){const{releaseID:s,releaseName:i,jenkinsJobID:l,moduleID:n,testNodes:r,updatedAt:a,createdAt:d}=o,c=r.findIndex(e=>e.testNodeID===(null===t||void 0===t?void 0:t.id));if(parseInt(c,10)>=0){const t=r[c],{testNodeID:o,status:p,dateStatusLastUpdated:h}=t;null===e||void 0===e||e.push({releaseID:s,releaseName:i,jenkinsJobID:l,moduleID:n,testNodeID:o,result:p,dateStatusLastUpdated:h||a||d});const v={...E};v.runHistory=e,(0,u.hF)(b,v)}}})}}catch(o){console.error("error",o)}},[b,C,null===t||void 0===t?void 0:t.id,E]),_=e=>{let t;const o=Object.keys(e)[1],s=L(e,"testStepDescription"),i=L(e,"expected");return t=s||(i||o),t},F=e=>Object.keys(e)[1],U=(e,t)=>{var o,s,i,l,n,r,a,d;const c=y.filter(t=>(null===t||void 0===t?void 0:t._id)===e),p={},h=[];let v,x=null;var m,g,f,j,S;if(b((0,u.h_)({})),b((0,u.Mm)({})),A||null!==(o=t[0])&&void 0!==o&&o.testStepStatuses)v=null===(m=t[0])||void 0===m?void 0:m.testStepStatuses,null===(g=t[0])||void 0===g||null===(f=g.testStepStatuses)||void 0===f||f.forEach(e=>{null!==e&&void 0!==e&&e.testStepLogsFile&&(x=null===e||void 0===e?void 0:e.testStepLogsFile),null!==e&&void 0!==e&&e.testStepResultsFile&&(x=null===e||void 0===e?void 0:e.testStepResultsFile)});else if(null!==(j=t[0])&&void 0!==j&&j.testCaseSteps)if((null===(S=t[0])||void 0===S?void 0:S.testCaseSteps.constructor)===Array){var w;const e=[];null===(w=t[0])||void 0===w||w.testCaseSteps.forEach(t=>{e.push({_id:null===t||void 0===t?void 0:t._id,status:O.Pm.UNTESTED})}),v=e}else{var k,q;v=[{_id:null===(k=t[0])||void 0===k||null===(q=k.testCaseSteps)||void 0===q?void 0:q._id,status:O.Pm.UNTESTED}]}let C=t[0].testCaseSteps;if(A){var R;if(C)if(C instanceof Array)C=C.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),C.forEach(e=>{h.push({_id:null===e||void 0===e?void 0:e._id,name:F(e),description:_(e)})});else if(C=!Object.keys(C).includes("sleep")&&!Object.keys(C).includes("frameSwitch")&&!Object.keys(C).includes("keyBoardEvent")||Object.keys(C).includes("manual")&&C,C)h.push({_id:null===(R=C)||void 0===R?void 0:R._id,name:F(C),description:_(C)});b((0,u.ZK)(h))}else{var D,N,I;if(C){var U,L,z;if(C instanceof Array)C=C.filter(e=>!Object.keys(e).includes("sleep")&&!Object.keys(e).includes("frameSwitch")&&!Object.keys(e).includes("keyBoardEvent")||Object.keys(e).includes("manual")),C.forEach(e=>{var t;const o=null===(t=v)||void 0===t?void 0:t.findIndex(t=>t._id===(null===e||void 0===e?void 0:e._id));if(o||0===o){const t=v[o];h.push({_id:null===e||void 0===e?void 0:e._id,name:F(e),description:_(e),status:null===t||void 0===t?void 0:t.status})}});else if(C=!Object.keys(C).includes("sleep")&&!Object.keys(C).includes("frameSwitch")&&!Object.keys(C).includes("keyBoardEvent")||Object.keys(C).includes("manual")&&C,C)h.push({_id:null===(L=C)||void 0===L?void 0:L._id,name:F(C),description:_(C),status:null===(z=C)||void 0===z?void 0:z.status});if(h){var $;const e=null===($=t[0])||void 0===$?void 0:$.testStepStatuses;var M;if(e&&h.constructor===Array)null===(M=Object.keys(e))||void 0===M||M.forEach(t=>{const o=h.findIndex(e=>(null===e||void 0===e?void 0:e._id)===t);o>=0&&(h[o]={...h[o],status:e[t]})})}b((0,u.ZK)(h)),null===(U=v)||void 0===U||U.forEach(e=>{p[null===e||void 0===e?void 0:e._id]=null===e||void 0===e?void 0:e.log}),b((0,u.Mm)(p))}let o,s;var H,K,V;if(null!==(D=t[0])&&void 0!==D&&D.testCaseResultsFile)o=null===(H=t[0])||void 0===H?void 0:H.testCaseResultsFile;else T&&T[e]&&(o=T[e]);if(null!==(N=t[0])&&void 0!==N&&N.testCaseLogsFile)s=null===(K=t[0])||void 0===K?void 0:K.testCaseLogsFile;else T&&T[e]&&(s=T[e]);if(null!==(I=t[0])&&void 0!==I&&I.testCaseLogsFile)s=null===(V=t[0])||void 0===V?void 0:V.testCaseLogsFile;if(b((0,u.h_)({})),o)W(o),s&&P(s);else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};b((0,u.tv)(e))}}if(x){var J;const e=null===(J=x)||void 0===J?void 0:J.split("/"),t=e[1],o=e[2],s=e[3];B({jobId:t,moduleId:o,testNodeId:s})}b((0,u.N9)({...E,testNodeID:null===(s=t[0])||void 0===s?void 0:s.id,testCaseId:null===(i=t[0])||void 0===i?void 0:i._id,moduleId:null===(l=t[0])||void 0===l?void 0:l.moduleId,screenShotComments:null===(n=t[0])||void 0===n?void 0:n.screenShotComments,status:null===(r=c[0])||void 0===r?void 0:r.status,testCaseResultsFile:null===(a=t[0])||void 0===a?void 0:a.testCaseResultsFile,dateStatusLastUpdated:null===(d=c[0])||void 0===d?void 0:d.dateStatusLastUpdated}))},P=async e=>{const t={};if(e)try{var o;const s=await(0,r.A)({method:"get",url:`${Re.A.testRun.getTestCaseLogs(e)}`,headers:{Authorization:`Bearer ${(0,$.qt)("accessToken")}`}});let i,l,n,a=[];if((null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.length)>0){if(i=null===s||void 0===s?void 0:s.data.split("**TestResults**"),i&&(l=i[0].split(" "),l=l.filter(e=>""!==e.trim()),i[1]&&(n=i[1].split("&&"),n=n.filter(e=>""!==e.trim()))),l){a=[],l.forEach(e=>{e.trim()&&a.push(e.trim())});const e={testcaseevidences:a,testCaseEvidencesFetched:!0};b((0,u.Mm)(e))}if(n){n.filter(e=>""!==e.trim()).forEach(e=>{const o=e.split(" ").filter(e=>""!==e.trim()),s=o[0].trim(),i=o.slice(1).map(e=>e.trim());if(t[s]){if(i.constructor===Array&&t[s].constructor===Array)t[s]=[...t[s],...i];else if(i.constructor===Array&&t[s].constructor!==Array){const e=[...i];e.push(t[s]),t[s]=e}else if(i.constructor!==Array&&t[s].constructor===Array){const e=[...t[s]];e.push(i),t[s]=e}}else t[s]=i}),b((0,u.Mm)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};b((0,u.tv)(e))}}catch(s){console.log("error = ",s)}},L=(e,t)=>{let o;return Object.keys(e).some(s=>s===t?(o=e[s],!0):e[s]&&"object"===typeof e[s]?(o=L(e[s],t),void 0!==o):o),o},B=async e=>{if(e){const n={},a={};b((0,u.ag)(!1));try{var t;const l=await(0,r.A)({method:"post",url:`${Re.A.testRun.getTestResultFiles}`,data:e,headers:{Authorization:`Bearer ${(0,$.qt)("accessToken")}`}});if(200===(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.status)){var o,s,i;const e=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.data;null===e||void 0===e||null===(s=e.screens)||void 0===s||s.forEach(e=>{null!==e&&void 0!==e&&e.testscreenshotfile&&(n[null===e||void 0===e?void 0:e.testStepId]=null===e||void 0===e?void 0:e.testscreenshotfile)}),null===e||void 0===e||null===(i=e.logs)||void 0===i||i.forEach(e=>{null!==e&&void 0!==e&&e.testlogfile&&(a[null===e||void 0===e?void 0:e.testStepId]=[null===e||void 0===e?void 0:e.testlogfile])})}n&&b((0,u.h_)(n)),a&&b((0,u.Mm)(a)),b((0,u.ag)(!0))}catch(l){b((0,u.ag)(!0))}}},W=(0,s.useCallback)(async e=>{const t={};if(e)try{var o;const s=await(0,r.A)({method:"get",url:`${Re.A.testRun.getTestCaseResults(e)}`,headers:{Authorization:`Bearer ${(0,$.qt)("accessToken")}`}});let i,l,n,a=[];if((null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.length)>0){if(i=null===s||void 0===s?void 0:s.data.split("**TestResults**"),i&&(l=i[0].split(" "),l=l.filter(e=>""!==e.trim()),i[1]&&(n=i[1].split("&&"),n=n.filter(e=>""!==e.trim()))),l){a=[],l.forEach(e=>{e.trim()&&a.push(e.trim())});const e={testcaseevidences:a,testCaseEvidencesFetched:!0};b((0,u.tv)(e))}if(n){n.filter(e=>""!==e.trim()).forEach(e=>{const o=e.split(" ").filter(e=>""!==e.trim()),s=o[0].trim(),i=o.slice(1).map(e=>e.trim());if(t[s]){if(i.constructor===Array&&t[s].constructor===Array)t[s]=[...t[s],...i];else if(i.constructor===Array&&t[s].constructor!==Array){const e=[...i];e.push(t[s]),t[s]=e}else if(i.constructor!==Array&&t[s].constructor===Array){const e=[...t[s]];e.push(i),t[s]=e}}else t[s]=i}),b((0,u.h_)(t))}}else{const e={testcaseevidences:[],testCaseEvidencesFetched:!0};b((0,u.tv)(e))}}catch(s){console.error("error = ",s)}},[b]);return(0,s.useEffect)(()=>((0,c.hv)(b),t?w(t):N(),()=>{}),[b,t,N]),(0,s.useEffect)(()=>(I(),()=>{}),[I]),(0,s.useEffect)(()=>{(async()=>{if(!k){await(0,z.fF)(O.mc.RELEASE,O.Rk.CURRENT_RELEASE)&&((0,p.Cr)(b,null===q||void 0===q?void 0:q.releases),(0,p.mj)(b,null===q||void 0===q?void 0:q.releaseTestCases),console.log("Updated testCasesConfig:",null===q||void 0===q?void 0:q.releaseTestCases));await(0,z.fF)(O.mc.TESTRUN,O.Rk.CURRENT_TESTRUN)&&(b((0,p.Cr)(null===q||void 0===q?void 0:q.testRuns)),b((0,p.mj)(null===q||void 0===q?void 0:q.testRunsTestCases)),console.log("Updated testCasesConfig from testRun:",null===q||void 0===q?void 0:q.testRunsTestCases))}})()},[b,q,k]),(0,M.jsx)(h.A,{title:"TestEnsure",children:(0,M.jsx)(i.A,{maxWidth:!g&&"xl",children:(0,M.jsxs)(l.Ay,{container:!0,spacing:4,sx:{pt:2},children:[(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsx)(G,{testCase:S,testRunId:o||D,moduleId:v,setSelectedTestCase:w,getTestCaseResults:W,getTestStepResults:B,setDefaultStepStatus:U})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsx)(se,{testCase:S})}),(0,M.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,M.jsx)(Ee,{posts:f,setOpenDetails:x,testCase:S})})]})})})}},50467:(e,t,o)=>{o.d(t,{A:()=>r});var s=o(34535),i=o(90310),l=o(70579);const n=(0,s.Ay)("span")(e=>{var t,o,s;let{theme:l,styleProps:n}=e;const r="light"===l.palette.mode,{color:a,variant:d}=n;return{height:22,minWidth:22,lineHeight:0,borderRadius:8,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:l.spacing(0,1),color:l.palette.grey[800],fontSize:l.typography.pxToRem(12),fontFamily:l.typography.fontFamily,backgroundColor:l.palette.grey[300],fontWeight:l.typography.fontWeightBold,..."default"!==a?{..."filled"===d&&{...(e=>({color:l.palette[e].contrastText,backgroundColor:l.palette[e].main}))(a)},..."outlined"===d&&{...(e=>({color:l.palette[e].main,backgroundColor:"transparent",border:`1px solid ${l.palette[e].main}`}))(a)},..."ghost"===d&&{...(e=>({color:l.palette[e][r?"dark":"light"],backgroundColor:(0,i.X4)(l.palette[e].main,.16)}))(a)}}:{..."outlined"===d&&{backgroundColor:"transparent",color:null===(t=l.palette)||void 0===t||null===(o=t.text)||void 0===o?void 0:o.primary,border:`1px solid ${l.palette.grey[50032]}`},..."ghost"===d&&{color:r?null===(s=l.palette)||void 0===s?void 0:s.text.secondary:l.palette.common.white,backgroundColor:l.palette.grey[50016]}}}});function r(e){let{color:t="default",variant:o="ghost",children:s,...i}=e;return(0,l.jsx)(n,{styleProps:{color:t,variant:o},...i,children:s})}},56635:(e,t,o)=>{o.d(t,{A:()=>de});var s=o(85865),i=o(83462),l=o(26600),n=o(35316),r=o(98533),a=o(88911),d=o(67784),c=o(29347),u=o(42518),p=o(63336),h=o(96446),v=o(81637),x=o(17392),m=o(99109),g=o(18921),b=o(65043),f=o(92382),j=o(57488),A=(o(2574),o(86897)),y=o(80899),S=o(73216),w=o(34535),k=o(54410),q=o(33211),C=o(15285),E=o(68780),R=o(1068),T=o(92823);o(5748),o(6562),o(28296);(0,w.Ay)("div")(e=>{var t,o,s,i,l,n,r,a,d,c,u,p,h,v,x,m,g;let{theme:b}=e;const f="rtl"===b.direction;return{"& .ql-snow.ql-toolbar button:hover .ql-fill, .ql-snow .ql-toolbar button:hover .ql-fill, .ql-snow.ql-toolbar button:focus .ql-fill, .ql-snow .ql-toolbar button:focus .ql-fill, .ql-snow.ql-toolbar button.ql-active .ql-fill, .ql-snow .ql-toolbar button.ql-active .ql-fill, .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill, .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill, .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill, .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill, .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill, .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill, .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill, .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill, .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill, .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill, .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill, .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill, .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill, .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill, .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill, .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill, .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill, .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill, .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill, .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill, .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill, .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill":{fill:null===(t=b.palette)||void 0===t?void 0:t.primary.main},"& .ql-snow.ql-toolbar button:hover, .ql-snow .ql-toolbar button:hover, .ql-snow.ql-toolbar button:focus, .ql-snow .ql-toolbar button:focus, .ql-snow.ql-toolbar button.ql-active, .ql-snow .ql-toolbar button.ql-active, .ql-snow.ql-toolbar .ql-picker-label:hover, .ql-snow .ql-toolbar .ql-picker-label:hover, .ql-snow.ql-toolbar .ql-picker-label.ql-active, .ql-snow .ql-toolbar .ql-picker-label.ql-active, .ql-snow.ql-toolbar .ql-picker-item:hover, .ql-snow .ql-toolbar .ql-picker-item:hover, .ql-snow.ql-toolbar .ql-picker-item.ql-selected, .ql-snow .ql-toolbar .ql-picker-item.ql-selected":{color:null===(o=b.palette)||void 0===o?void 0:o.primary.main},"& .ql-snow.ql-toolbar button:hover .ql-stroke, .ql-snow .ql-toolbar button:hover .ql-stroke, .ql-snow.ql-toolbar button:focus .ql-stroke, .ql-snow .ql-toolbar button:focus .ql-stroke, .ql-snow.ql-toolbar button.ql-active .ql-stroke, .ql-snow .ql-toolbar button.ql-active .ql-stroke, .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke, .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke, .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke, .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke, .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke, .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke, .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke, .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke, .ql-snow.ql-toolbar button:hover .ql-stroke-miter, .ql-snow .ql-toolbar button:hover .ql-stroke-miter, .ql-snow.ql-toolbar button:focus .ql-stroke-miter, .ql-snow .ql-toolbar button:focus .ql-stroke-miter, .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter, .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter, .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter, .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter, .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter, .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter, .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter, .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter, .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter, .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter":{stroke:null===(s=b.palette)||void 0===s?void 0:s.primary.main},"& .ql-stroke":{stroke:null===(i=b.palette)||void 0===i||null===(l=i.text)||void 0===l?void 0:l.primary},"& .ql-fill, .ql-stroke.ql-fill":{fill:null===(n=b.palette)||void 0===n||null===(r=n.text)||void 0===r?void 0:r.primary},"& .ql-picker, .ql-picker-options, .ql-picker-item, .ql-picker-label, button":{"&:focus":{outline:"none"}},"& .ql-toolbar.ql-snow":{border:"none",borderBottom:`solid 1px ${b.palette.grey[50032]}`,"& .ql-formats":{"&:not(:last-of-type)":{marginRight:b.spacing(2)}},"& button":{padding:0,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,color:null===(a=b.palette)||void 0===a||null===(d=a.text)||void 0===d?void 0:d.primary},"& button svg, span svg":{width:20,height:20},"& .ql-picker-label":{...b.typography.subtitle2,color:null===(c=b.palette)||void 0===c||null===(u=c.text)||void 0===u?void 0:u.primary,"& .ql-stroke":{stroke:null===(p=b.palette)||void 0===p||null===(h=p.text)||void 0===h?void 0:h.primary}},"& .ql-picker-label svg":{...f&&{right:"0 !important",left:"auto !important"}},"& .ql-color,& .ql-background,& .ql-align ":{"& .ql-picker-label":{padding:0,display:"flex",alignItems:"center",justifyContent:"center"}},"& .ql-expanded":{"& .ql-picker-label":{borderRadius:4,color:null===(v=b.palette)||void 0===v?void 0:v.text.disabled,borderColor:"transparent !important",backgroundColor:b.palette.action.focus,"& .ql-stroke":{stroke:null===(x=b.palette)||void 0===x?void 0:x.text.disabled}},"& .ql-picker-options":{padding:0,marginTop:4,border:"none",maxHeight:200,overflow:"auto",boxShadow:b.customShadows.z20,borderRadius:b.shape.borderRadius,backgroundColor:b.palette.background.paper},"& .ql-picker-item":{color:null===(m=b.palette)||void 0===m||null===(g=m.text)||void 0===g?void 0:g.primary},"&.ql-align":{"& .ql-picker-options":{padding:0,display:"flex"},"& .ql-picker-item":{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center"}},"&.ql-color, &.ql-background":{"& .ql-picker-options":{padding:8},"& .ql-picker-item":{margin:3,borderRadius:4,"&.ql-selected":{border:"solid 1px black"}}},"&.ql-font, &.ql-size, &.ql-header":{"& .ql-picker-options":{padding:b.spacing(1,0)},"& .ql-picker-item":{padding:b.spacing(.5,1.5)}}}}}});var D=o(70579);const N=["Arial","Tahoma","Georgia","Impact","Verdana"],I=["8px","9px","10px","12px","14px","16px","20px","24px","32px","42px","54px","68px","84px","98px"];const _=T.Quill.import("attributors/style/size");_.whitelist=I,T.Quill.register(_,!0);const F=T.Quill.import("attributors/style/font");F.whitelist=N,T.Quill.register(F,!0);(0,w.Ay)("div")(e=>{var t;let{theme:o}=e;return{borderRadius:o.shape.borderRadius,border:`solid 1px ${o.palette.grey[50032]}`,"& .ql-container.ql-snow":{borderColor:"transparent",...o.typography.body1,fontFamily:o.typography.fontFamily},"& .ql-editor":{minHeight:200,"&.ql-blank::before":{fontStyle:"normal",color:null===(t=o.palette)||void 0===t?void 0:t.text.disabled},"& pre.ql-syntax":{...o.typography.body2,padding:o.spacing(2),borderRadius:o.shape.borderRadius,backgroundColor:o.palette.grey[900]}}}});var U=o(77275);const P={inline:{bold:{icon:"/static/icons/editor/inline_bold.svg",className:"toggle"},italic:{icon:"/static/icons/editor/inline_italic.svg",className:"toggle"},underline:{icon:"/static/icons/editor/inline_underline.svg",className:"toggle"},strikethrough:{icon:"/static/icons/editor/inline_strikethrough.svg",className:"toggle"},monospace:{icon:"/static/icons/editor/monospace.svg",className:"toggle"},superscript:{icon:"/static/icons/editor/superscript.svg",className:"toggle"},subscript:{icon:"/static/icons/editor/subscript.svg",className:"toggle"}},blockType:{className:"dropdown",dropdownClassName:"dropdown__option"},fontSize:{className:"dropdown",dropdownClassName:"dropdown__option"},list:{unordered:{icon:"/static/icons/editor/list_unordered.svg",className:"toggle"},ordered:{icon:"/static/icons/editor/list_ordered.svg",className:"toggle"},indent:{icon:"/static/icons/editor/list_indent.svg",className:"toggle"},outdent:{icon:"/static/icons/editor/list_outdent.svg",className:"toggle"}},textAlign:{left:{icon:"/static/icons/editor/align_left.svg",className:"toggle"},center:{icon:"/static/icons/editor/align_center.svg",className:"toggle"},right:{icon:"/static/icons/editor/align_right.svg",className:"toggle"},justify:{icon:"/static/icons/editor/align_justify.svg",className:"toggle"}},fontFamily:{className:"dropdown",dropdownClassName:"dropdown__option"},colorPicker:{icon:"/static/icons/editor/colorpicker.svg",className:"toggle",popupClassName:"popup popup__colorpicker"},link:{popupClassName:"popup popup__link",link:{icon:"/static/icons/editor/link.svg",className:"toggle"},unlink:{icon:"/static/icons/editor/unlink.svg",className:"toggle"}},emoji:{icon:"/static/icons/editor/emoji.svg",className:"toggle",popupClassName:"popup popup__emoji"},embedded:{icon:"/static/icons/editor/embedded.svg",className:"toggle",popupClassName:"popup popup__embedded"},image:{icon:"/static/icons/editor/image.svg",className:"toggle",popupClassName:"popup popup__image",uploadCallback:function(e){return new Promise((t,o)=>{const s=new XMLHttpRequest;s.open("POST","https://api.imgur.com/3/image"),s.setRequestHeader("Authorization","Client-ID XXXXX");const i=new FormData;i.append("image",e),s.send(i),s.addEventListener("load",()=>{const e=JSON.parse(s.responseText);t(e)}),s.addEventListener("error",()=>{const e=JSON.parse(s.responseText);o(e)})})},alt:{present:!0,mandatory:!0}},remove:{icon:"/static/icons/editor/remove.svg",className:"toggle"},history:{undo:{icon:"/static/icons/editor/history_undo.svg",className:"toggle"},redo:{icon:"/static/icons/editor/history_redo.svg",className:"toggle"}}},L={...P,options:["inline","blockType","list","textAlign","link","image","remove"],inline:{...P.inline,options:["bold","italic","underline"]},blockType:{...P.blockType,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote"]},list:{...P.list,options:["unordered","ordered"]}};const O=(0,w.Ay)("div")(e=>{var t,o,s,i,l,n,r,a,d,c,u,p,h,v,x,m,g;let{theme:b}=e;const f="light"===b.palette.mode,j="rtl"===b.direction;return{borderRadius:b.shape.borderRadius,border:`solid 1px ${b.palette.grey[50032]}`,"& .toggle":{border:"none",borderRadius:6,background:"transparent","&.rdw-option-disabled":{opacity:b.palette.action.disabledOpacity},"& img":{width:16,height:16,filter:f?"none":"invert(100%)"},'&[aria-selected="true"]':{boxShadow:"none",background:b.palette.action.selected},"&:hover":{boxShadow:"none",background:b.palette.action.hover}},"& .dropdown":{minWidth:56,borderRadius:6,boxShadow:"none",background:"transparent",border:`solid 1px ${b.palette.grey[50032]}`,"&:hover":{boxShadow:"none",background:b.palette.action.hover},"& .rdw-dropdown-selectedtext":{color:null===(t=b.palette)||void 0===t||null===(o=t.text)||void 0===o?void 0:o.primary},"& .rdw-dropdown-carettoopen":{right:j&&"10%",left:j&&"auto",borderTopColor:null===(s=b.palette)||void 0===s||null===(i=s.text)||void 0===i?void 0:i.primary},"& .rdw-dropdown-carettoclose":{right:j&&"10%",left:j&&"auto",borderBottomColor:null===(l=b.palette)||void 0===l||null===(n=l.text)||void 0===n?void 0:n.primary}},"& .dropdown__option":{width:"100%",border:"none",marginTop:b.spacing(1),padding:b.spacing(1,0),boxShadow:b.customShadows.z20,borderRadius:b.shape.borderRadius,background:b.palette.background.paper,"& .rdw-dropdownoption-default":{fontSize:14,minHeight:"auto",padding:b.spacing(.5,2)},"& .rdw-dropdownoption-active":{background:b.palette.action.selected},"& .rdw-dropdownoption-highlighted":{background:b.palette.action.hover}},"& .popup":{right:0,padding:0,left:"auto",border:"none",overflow:"hidden",boxShadow:b.customShadows.z20,borderRadius:b.shape.borderRadius,background:b.palette.background.paper,"& .rdw-link-modal-buttonsection, .rdw-embedded-modal-btn-section, .rdw-image-modal-btn-section":{margin:0,display:"flex",marginTop:b.spacing(2),justifyContent:"space-between","& button":{margin:0,fontSize:13,border:"none",fontWeight:"bold",width:"calc(50% - 4px)",color:b.palette.common.white,background:null===(r=b.palette)||void 0===r?void 0:r.primary.main,borderRadius:b.shape.borderRadius,"&:disabled":{color:b.palette.action.disabled,background:b.palette.action.disabledBackground},"&:last-of-type":{background:"transparent",color:null===(a=b.palette)||void 0===a||null===(d=a.text)||void 0===d?void 0:d.primary},"&:hover":{boxShadow:"none"},"&:active":{boxShadow:"none"}}},"& input":{height:26,fontSize:14,background:"transparent",padding:b.spacing(0,1.5),color:null===(c=b.palette)||void 0===c||null===(u=c.text)||void 0===u?void 0:u.primary,borderRadius:b.shape.borderRadius,border:`solid 1px ${b.palette.grey[50032]}`}},"& .popup__colorpicker":{padding:0,"& .rdw-colorpicker-modal-header":{padding:b.spacing(1),background:b.palette.grey[50012],"& .rdw-colorpicker-modal-style-label":{fontSize:13,padding:b.spacing(.75,0),color:null===(p=b.palette)||void 0===p?void 0:p.text.secondary,borderRadius:b.shape.borderRadius,fontWeight:b.typography.fontWeightMedium},"& .rdw-colorpicker-modal-style-label-active":{borderBottom:"none",boxShadow:b.customShadows.z8,color:null===(h=b.palette)||void 0===h||null===(v=h.text)||void 0===v?void 0:v.primary,background:b.palette.common.white}},"& .rdw-colorpicker-modal-options":{margin:0,padding:b.spacing(1.5)},"& .rdw-colorpicker-option":{margin:4,width:20,height:20,minWidth:20,borderRadius:6,overflow:"hidden",position:"relative","&:hover":{boxShadow:"none"},"&:before":{zIndex:9,fontSize:0,width:"100%",height:"100%",display:"flex",borderRadius:6,content:'"\\2713"',position:"absolute",alignItems:"center",justifyContent:"center",color:b.palette.common.white,fontWeight:b.typography.fontWeightBold,boxShadow:"inset 0 0 3px 0 rgba(0,0,0,0.12)"},'&[aria-selected="true"]':{boxShadow:"none",borderRadius:"50%","&:before":{fontSize:12}}},"& .rdw-colorpicker-cube":{border:"none"}},"& .popup__link":{height:"auto",padding:b.spacing(2),"& .rdw-link-modal-label":{fontSize:13,fontWeight:b.typography.fontWeightMedium},"& .rdw-link-modal-input":{marginTop:4,marginBottom:12},"& .rdw-link-modal-target-option":{display:"flex",marginBottom:0,alignItems:"center","& > span":{fontSize:14,marginLeft:b.spacing(1)}}},"& .popup__emoji":{overflow:"auto",padding:b.spacing(1)},"& .popup__embedded":{height:"auto","& .rdw-embedded-modal-header":{padding:b.spacing(1),background:b.palette.grey[50012],"& .rdw-embedded-modal-header-label":{display:"none"},"& .rdw-embedded-modal-header-option":{fontSize:13,padding:b.spacing(.75,0),color:null===(x=b.palette)||void 0===x?void 0:x.text.secondary,borderRadius:b.shape.borderRadius,fontWeight:b.typography.fontWeightMedium}},"& .rdw-embedded-modal-link-section":{padding:b.spacing(2,2,0)},"& .rdw-embedded-modal-btn-section":{padding:b.spacing(0,2,2)}},"& .popup__image":{padding:0,"& .rdw-image-modal-header":{margin:0,zIndex:9,fontSize:13,padding:b.spacing(1),background:b.palette.grey[50012],fontWeight:b.typography.fontWeightMedium,"& .rdw-image-modal-header-option":{position:"relative",padding:b.spacing(.75,0)},"& .rdw-image-modal-header-label":{margin:0,width:"100%",height:"100%",border:"none",position:"absolute",background:"transparent"},"& .rdw-image-modal-header-label-highlighted":{zIndex:-1,boxShadow:b.customShadows.z8,background:b.palette.common.white,borderRadius:b.shape.borderRadius}},"& .rdw-image-modal-upload-option":{margin:0,outline:"none",background:"none",padding:b.spacing(2)},"& .rdw-image-modal-upload-option-label":{fontSize:13,textAlign:"center",color:null===(m=b.palette)||void 0===m?void 0:m.text.disabled,borderRadius:b.shape.borderRadius,border:`dashed 1px ${b.palette.grey[50032]}`},"& .rdw-image-modal-btn-section":{padding:b.spacing(0,2,2)},"& .rdw-image-modal-size, .rdw-image-modal-url-section":{padding:b.spacing(0,2)}},"& .rdw-editor-toolbar":{border:"none",marginBottom:0,background:"transparent",borderBottom:`solid 1px ${b.palette.grey[50032]}`},"& .rdw-editor-main":{minHeight:200,padding:b.spacing(0,2),"& .public-DraftEditorPlaceholder-root":{color:null===(g=b.palette)||void 0===g?void 0:g.text.disabled}}}});function z(e){let{simple:t=!1,error:o,sx:s,...i}=e;return(0,D.jsx)(O,{sx:{...o&&{border:e=>`solid 1px ${e.palette.error.main}`},...s},children:(0,D.jsx)(U.Editor,{toolbar:t?L:P,placeholder:"Write something awesome...",...i})})}var B=o(2990),$=o(76839),M=o(25078),W=o(12299),H=o(39336),K=(o(90029),0),V={};const J=[{id:"UNTESTED",label:"UNTESTED"},{id:"PASSED",label:"PASSED"},{id:"SKIPPED",label:"SKIPPED"},{id:"FAILED",label:"FAILED"}],Z=(0,w.Ay)(s.A)(e=>{var t;let{theme:o}=e;return{...o.typography.subtitle2,color:null===(t=o.palette)||void 0===t?void 0:t.text.secondary,marginBottom:o.spacing(1)}}),G={dots:!1,autoplay:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,appendDots:e=>(0,D.jsx)("ul",{children:e}),nextArrow:(0,D.jsx)(X,{}),prevArrow:(0,D.jsx)(Y,{})};function X(e){const{className:t,style:o,onClick:s}=e;return(0,D.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}function Y(e){const{className:t,style:o,onClick:s}=e;return(0,D.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}function Q(e){let{testStepsToDelete:t,setTestStepsToDelete:o,testStepScreenShots:r,setTestStepScreenShots:j,setTestStepStatus:w,testStepStatus:k,caseEvidencesFetched:q,updatedTestStepStatus:E,setTestCaseStatus:R,setEdited:T}=e;const N=(0,C.d4)(e=>e.testRun.testStepDetails),[I,_]=(0,b.useState)(!1),[F,U]=(0,b.useState)(),[P,L]=(0,b.useState)({}),O=(0,C.d4)(e=>e.testRun.testStepEvidences),{pathname:z}=(0,S.zy)(),X=(0,C.d4)(e=>e.testRun.currentFunction),Y=z.includes("module")||X.includes("module"),Q=y.Ik().shape({images:y.YO().max(2,"maximum of 15 screenshots per test case")}),ee=(0,A.Wx)({enableReinitialize:!0,initialValues:{images:[],testCaseScreenshots:[]},validationSchema:Q,onSubmit:async(e,t)=>{let{setSubmitting:o,resetForm:s,setErrors:i}=t;try{s(),o(!1)}catch(l){console.error(l),o(!1),i(l)}}}),{errors:te,values:oe,touched:se,setFieldValue:ie}=ee,le=e=>{e.preventDefault(),L({...P,testStepScreenshotsError:null}),_(!1),ie("images",[]),o({})},ne=e=>{let t=!1;const o=Object.keys(e).filter(t=>"PASSED"!==e[t]);return 0===(null===o||void 0===o?void 0:o.length)&&(t=!0),t},re=(0,b.useCallback)(e=>{T(!0),V[K]=e,(null===e||void 0===e?void 0:e.length)>5?L({...P,testStepScreenshotsError:"maximum of 5 screenshots per test step "}):L({...P,testStepScreenshotsError:null}),j(V),ie("images",e.map(e=>(Object.assign(e,{preview:URL.createObjectURL(e)}),e)))},[P,T,ie,j]);return(0,b.useEffect)(()=>{const e={};N&&(null===N||void 0===N?void 0:N.length)>0&&(N.forEach(t=>{e[null===t||void 0===t?void 0:t._id]=null===t||void 0===t?void 0:t.status}),w(e))},[N,w]),(0,b.useEffect)(()=>{const e={};E&&(null===E||void 0===E?void 0:E.length)>0&&(E.forEach(t=>{e[null===t||void 0===t?void 0:t._id]=null===t||void 0===t?void 0:t.status}),w(e))},[E,w]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(a.A,{children:[(0,D.jsx)(Z,{children:"Steps"}),(0,D.jsx)($.A,{orientation:"vertical",sx:{width:"100%"},children:N.map((e,t)=>{var o,i,l,n,c;return(0,D.jsxs)(M.A,{active:!0,children:[(0,D.jsx)(W.A,{}),(0,D.jsx)(p.A,{variant:"outlined",elevation:10,children:(0,D.jsxs)(a.A,{active:!0,direction:"row",spacing:2,marginTop:2,divider:(0,D.jsx)(H.A,{orientation:"vertical",flexItem:!0}),children:[(0,D.jsxs)(a.A,{sx:{width:"50%",height:"100px",overflow:"hidden"},children:[(0,D.jsx)(s.A,{children:null===(o=N[t])||void 0===o?void 0:o.name}),(0,D.jsx)(s.A,{children:null===(i=N[t])||void 0===i?void 0:i.description})]}),(0,D.jsxs)(a.A,{sx:{width:"25%",height:"100px",overflow:"hidden"},children:["Status",(0,D.jsx)(d.A,{select:!0,width:"50%",id:"testStepStatus",name:"testStepStatus",SelectProps:{native:!0},onChange:t=>{((e,t)=>{T(!0);const o=t._id,s=e.target.value,i={...k};i[o]=s,w(i),"FAILED"===s&&R("FAILED"),ne(i)&&R("PASSED")})(t,e)},sx:{"& fieldset":{border:"0 !important"},"& select":{pl:1,py:.5,pr:"20px !important",typography:"subtitle2"},"& .MuiOutlinedInput-root":{borderRadius:.75,bgcolor:"background.neutral"},"& .MuiNativeSelect-icon":{top:4,right:0,width:20,height:20}},value:k&&e._id&&k[e._id],children:N&&N[t]&&J.map(e=>{var o;return(0,D.jsx)("option",{value:e.label,defaultValue:null===(o=N[t])||void 0===o?void 0:o.status,children:e.label},e.id)})})]}),(0,D.jsxs)(a.A,{sx:{width:"25%",height:"100px",overflow:"hidden",justifyContent:"flex-start",alignItems:"flex-start"},children:["Screenshots",(0,D.jsx)(m.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>{var e,o;o=null===(e=N[t])||void 0===e?void 0:e._id,K=o,U(o),L({...P,testStepScreenshotsError:null}),_(!0)}}),(0,D.jsx)("input",{type:"text",id:"uploaded",value:`Uploaded : ${(null===(l=r[e._id])||void 0===l?void 0:l.length)||0}`,readOnly:!0,style:{border:"none",paddingTop:"6px"},disabled:!0}),(0,D.jsx)("input",{type:"text",id:"total",value:`Total         : ${(null===(n=O[null===(c=N[t])||void 0===c?void 0:c._id])||void 0===n?void 0:n.length)||0}`,readOnly:!0,style:{border:"none"},disabled:!0})]})]},t)})]},t)})})]}),(0,D.jsxs)(i.A,{open:I,onClose:le,children:[(0,D.jsx)(l.A,{children:"Add Results"}),(0,D.jsxs)(n.A,{children:[(0,D.jsxs)(a.A,{direction:"column",spacing:6,alignContent:"center",justifyContent:"center",children:[(0,D.jsx)(a.A,{children:(0,D.jsx)(B.jM,{showPreview:!0,maxSize:3145728,accept:"image/*",files:oe.images,onDrop:re,onRemove:e=>{T(!0);const t=oe.images.filter(t=>t!==e);V[K]=t,j(V),ie("images",t),t.length>5?L({...P,testStepScreenshotsError:"maximum of 5 screenshots per test step "}):L({...P,testStepScreenshotsError:null})},onRemoveAll:()=>{T(!0),L({...P,testStepScreenshotsError:null}),ie("images",[]),j({})},error:Boolean(se.images&&te.images),name:"testStepScreenshots"})}),P.testStepScreenshotsError?(0,D.jsx)("div",{className:"error",children:P.testStepScreenshotsError}):null]}),!Y&&(0,D.jsx)(a.A,{children:(0,D.jsxs)(p.A,{variant:"outlined",sx:{alignContent:"center",justifyContent:"center"},children:[!q&&(0,D.jsx)(h.A,{sx:{display:"flex"},children:(0,D.jsx)(v.A,{})}),q&&O[F]&&(0,D.jsx)(f.A,{...G,children:O[F].map((e,s)=>!((e,o)=>{let s=!1;return t[e]&&(t[e].constructor===Array?t[e].includes(o)&&(s=!0):Number(t[e])===o&&(s=!0)),s})(F,s)&&(0,D.jsxs)(p.A,{elevation:5,children:[(0,D.jsx)("div",{children:(0,D.jsx)(x.A,{onClick:()=>((e,s)=>{T(!0);const i={...t};if(i[e])i[e]=[...i[e],s],o(i);else{const t=[];t.push(s),i[e]=t,o(i)}})(F,s),sx:{float:"right"},children:(0,D.jsx)(g.A,{})})},s),(0,D.jsx)("img",{src:e,alt:" ",style:{objectFit:"contain",objectPosition:"center"}})]}))}),!r[F]&&q&&!O[F]&&"No evidence found"]})})]}),(0,D.jsxs)(c.A,{children:[(0,D.jsx)(u.A,{onClick:le,color:"inherit",children:"Cancel"}),(0,D.jsx)(u.A,{onClick:e=>(e=>{e.preventDefault(),L({...P,testStepScreenshotsError:null}),_(!1),ie("images",[])})(e),variant:"contained",disabled:P.testStepScreenshotsError,children:"Save"})]})]})]})}var ee=o(88930),te=o(5963),oe=o(95683),se=o(80916);const ie=[{id:"UNTESTED",label:"UNTESTED"},{id:"PASSED",label:"PASSED"},{id:"SKIPPED",label:"SKIPPED"},{id:"FAILED",label:"FAILED"}],le=(0,w.Ay)(s.A)(e=>{var t;let{theme:o}=e;return{...o.typography.subtitle2,color:null===(t=o.palette)||void 0===t?void 0:t.text.secondary,marginBottom:o.spacing(1)}}),ne={dots:!1,autoplay:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,appendDots:e=>(0,D.jsx)("ul",{children:e}),nextArrow:(0,D.jsx)(re,{}),prevArrow:(0,D.jsx)(ae,{})};function re(e){const{className:t,style:o,onClick:s}=e;return(0,D.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}function ae(e){const{className:t,style:o,onClick:s}=e;return(0,D.jsx)("div",{className:t,style:{...o,display:"block",background:"grey"},onClick:s})}function de(e){let{testCase:t,testRunId:o,getTestCaseResults:s,open:w,setOpen:T}=e;const N=(0,C.wA)(),I=null===t||void 0===t?void 0:t.moduleId,[_,F]=(0,b.useState)(!1),{pathname:U}=(0,S.zy)(),P=(0,C.d4)(e=>e.testRun.currentFunction),L=U.includes("module")||P.includes("module"),[O,$]=(0,b.useState)(!1),M=(0,C.d4)(e=>e.testRun.testCaseEvidencesFetched),W=(0,C.d4)(e=>e.testRun.testCaseEvidences),H=(0,C.d4)(e=>e.testRun.testStepDetails),K=(0,C.d4)(e=>e.testRun.testCaseDetails),[V,J]=(0,b.useState)([]),[Z,G]=(0,b.useState)(!1),[X,Y]=(0,b.useState)({}),[re,ae]=(0,b.useState)([]),[de,ce]=(0,b.useState)(),[ue,pe]=(0,b.useState)({}),[he,ve]=(0,b.useState)({}),[xe,me]=(0,b.useState)(k.EditorState.createEmpty()),[ge,be]=(0,b.useState)({}),fe=(0,C.d4)(e=>e.testRun.rows),je=(0,C.d4)(e=>e.release.graphTestCasesCounts),Ae=(0,C.d4)(e=>e.release.moduleData),[ye,Se]=(0,b.useState)(),[we,ke]=(0,b.useState)(!1);let qe,Ce,Ee,Re;const Te=new FormData,De=y.Ik().shape({images:y.YO().max(2,"maximum of 15 screenshots per test case")}),Ne=(0,A.Wx)({enableReinitialize:!0,initialValues:{images:[],testCaseScreenshots:[]},validationSchema:De,onSubmit:async(e,t)=>{let{setSubmitting:o,resetForm:s,setErrors:i}=t;try{s(),o(!1)}catch(l){console.error(l),o(!1),i(l)}}}),{values:Ie,setFieldValue:_e}=Ne,Fe=()=>{T(!1),J([]),Se([]),ae([]),ae({}),Le()},Ue=()=>{if(G(!1),Y({...X,testCaseScreenshotsError:null}),_e("images",[]),J([]),Se([]),V.constructor===Array){const e=V.filter((e,t,o)=>o.indexOf(e)===t);J(e)}},Pe=async()=>{qe=j.oR.loading("Test case update in progress"),N((0,E.tv)({testCaseEvidencesFetched:!1})),$(!1),N((0,E.GZ)(!1)),Re=I||(null===K||void 0===K?void 0:K.moduleId),Ee=null!==t&&void 0!==t&&t.id?null===t||void 0===t?void 0:t.id:null===K||void 0===K?void 0:K.testNodeID,Ce=null!==t&&void 0!==t&&t._id?null===t||void 0===t?void 0:t._id:null===K||void 0===K?void 0:K.testCaseId;try{const e=await(0,oe.uV)();Te.append("email",e.email),Te.append("company",e.company),await(0,q.A)({method:"patch",url:`${ee.A.testRun.testCaseUpdate(o,Re,Ee,Ce)}`,headers:{Authorization:`Bearer ${(0,te.qt)("accessToken")}`,"Content-Type":"multipart/form-data"},data:Te}),(0,se.zn)(N,null,o)}catch(e){j.oR.update(qe,{render:"Error in updating the test case",type:j.oR.TYPE.ERROR,autoClose:5e3,isLoading:!1}),console.log("error = ",e)}},Le=(0,b.useCallback)(()=>{if(null!==K&&void 0!==K&&K.screenShotComments){const e=k.EditorState.createWithContent((0,k.convertFromRaw)(JSON.parse(null===K||void 0===K?void 0:K.screenShotComments)));me(e)}else me(k.EditorState.createEmpty())},[K]),Oe=async e=>{e.preventDefault(),re&&(null===re||void 0===re?void 0:re.length)>0&&(null===re||void 0===re||re.forEach(e=>{Te.append("testCaseScreenshots",e)})),Object.keys(he).constructor===Array?Object.keys(he).forEach(e=>{he[e].constructor===Array?he[e].forEach(t=>{Te.append(e,t)}):Te.append(e,he[e])}):Te.append(Object.keys(he),Object.values(he)),Te.append("testResultsToDelete",V),Object.keys(ue).forEach(e=>{Te.append("testStepsToDelete",`${e}_${ue[e]}`)}),Te.append("testCaseStatus",de),Object.keys(ge).forEach(e=>{Te.append("stepStatus",`${e}_${ge[e]}`)}),xe&&Te.append("screenShotComments",JSON.stringify((0,k.convertToRaw)(xe.getCurrentContent()))),T(!1),ke(!1),await Pe(),j.oR.update(qe,{render:"Test case updated successfully",type:j.oR.TYPE.SUCCESS,autoClose:5e3,isLoading:!1}),N((0,E.tv)({testCaseEvidencesFetched:!1})),await(async()=>{try{var e,t,i;const l=(await(0,q.A)({method:"get",url:`${ee.A.testRun.getJobById(o)}`,headers:{Authorization:`Bearer ${(0,te.qt)("accessToken")}`}})).data.testRun.filter(e=>e.moduleID===Re)[0].testNodes,n=l.findIndex(e=>(null===e||void 0===e?void 0:e.testNodeID)===Ee),r=l[n];N((0,E.N9)({...K,screenShotComments:null===r||void 0===r?void 0:r.screenShotComments,status:null===r||void 0===r?void 0:r.status,testCaseResultsFile:null===r||void 0===r?void 0:r.testCaseResultsFile,dateStatusLastUpdated:null===r||void 0===r?void 0:r.dateStatusLastUpdated}));const a=r.testCaseSteps,d=fe.findIndex(e=>(null===e||void 0===e?void 0:e.id)===Ee),c={...fe[d],status:null===r||void 0===r?void 0:r.status,dateStatusLastUpdated:null===r||void 0===r?void 0:r.dateStatusLastUpdated},u=[...fe],p={};a&&(a.constructor===Array?a.forEach(e=>{p[null===e||void 0===e?void 0:e._id]=e.status}):p[a._id]=a.status);const h=[...H];Object.keys(p).forEach(e=>{const t=h.findIndex(t=>(null===t||void 0===t?void 0:t._id)===e);t>=0&&(h[t]={...h[t],status:p[e]})}),null!==c&&void 0!==c&&c.testStepStatuses&&(c.testStepStatuses=p),u[d]=c,N((0,E.rT)(u)),N((0,E.ZK)(h)),null!==r&&void 0!==r&&r.testCaseResultsFile&&(await s(r.testCaseResultsFile),$(!0));const v=[...je],x=v.findIndex(e=>(null===e||void 0===e?void 0:e.jobId)===o&&(null===e||void 0===e?void 0:e.id)===Ee);v[x]={...v[x],status:null===r||void 0===r?void 0:r.status},N((0,R.ir)(v)),N((0,R.aK)(v));const m=[...Ae],g=m.findIndex(e=>(null===e||void 0===e?void 0:e._id)===(null===c||void 0===c?void 0:c.moduleId)),b=null===(e=m[g])||void 0===e||null===(t=e.testNodes)||void 0===t?void 0:t.findIndex(e=>(null===e||void 0===e?void 0:e.id)===Ee),f={...m[g].testNodes[b],status:null===r||void 0===r?void 0:r.status},j=[...null===(i=m[g])||void 0===i?void 0:i.testNodes];j[b]=f,m[g]={...m[g],testNodes:j},N((0,R.ih)(m))}catch(l){console.log("error = ",l)}})().then(()=>{}),ae([]),ve({}),J([]),pe({}),J([])},ze=(0,b.useCallback)(()=>{if(null!==K&&void 0!==K&&K.selectedTestCaseStatus){if(ce(null===K||void 0===K?void 0:K.selectedTestCaseStatus),"PASSED"===(null===K||void 0===K?void 0:K.selectedTestCaseStatus)||"FAILED"===(null===K||void 0===K?void 0:K.selectedTestCaseStatus)){let e;H&&(null===H||void 0===H?void 0:H.length)>0&&(e=[...H],H.forEach((t,o)=>{e[o]={...e[o],status:null===K||void 0===K?void 0:K.selectedTestCaseStatus}})),Se(e)}}else ce(null===K||void 0===K?void 0:K.status)},[K,H]),Be=(0,b.useCallback)(e=>{const t=e.filter(e=>e.type.startsWith("image/"));F(!0),ae(t),(null===t||void 0===t?void 0:t.length)>15?Y({...X,testCaseScreenshotsError:"maximum of 15 screenshots per test case "}):Y({...X,testCaseScreenshotsError:null}),_e("images",t.map(e=>(Object.assign(e,{preview:URL.createObjectURL(e)}),e)))},[_e,X]),$e=()=>{ke(!1)};return(0,b.useEffect)(()=>{M&&$(M)},[M]),(0,b.useEffect)(()=>{Le()},[w,Le]),(0,b.useEffect)(()=>{ze()},[K,ze]),(0,b.useEffect)(()=>{ae([]),ve({})},[]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(i.A,{open:w,onClose:Fe,children:[(0,D.jsx)(l.A,{children:"Add Results"}),(0,D.jsxs)(n.A,{children:[(0,D.jsx)(r.A,{children:(0,D.jsxs)(a.A,{direction:"row",spacing:6,paddingTop:2,paddingBottom:2,children:[(0,D.jsx)(a.A,{children:"Test Case Status"}),(0,D.jsx)(a.A,{children:(0,D.jsx)(d.A,{select:!0,fullWidth:!0,id:"testCaseStatus",name:"testCaseStatus",value:de,SelectProps:{native:!0},onChange:e=>{(e=>{if(F(!0),ce(e.target.value),"PASSED"===e.target.value||"FAILED"===e.target.value){let t;H&&(null===H||void 0===H?void 0:H.length)>0&&(t=[...H],H.forEach((o,s)=>{t[s]={...t[s],status:e.target.value}})),Se(t)}_e("testCaseStatus",e.target.value)})(e)},sx:{"& fieldset":{border:"0 !important"},"& select":{pl:1,py:.5,pr:"20px !important",typography:"subtitle2"},"& .MuiOutlinedInput-root":{borderRadius:.75,bgcolor:"background.neutral"},"& .MuiNativeSelect-icon":{top:4,right:0,width:20,height:20}},children:ie.map(e=>(0,D.jsx)("option",{value:e.label,children:e.label},e.id))})})]})}),(0,D.jsxs)(a.A,{direction:"column",spacing:6,alignContent:"center",justifyContent:"center",children:[(0,D.jsxs)(a.A,{children:[(0,D.jsx)(le,{children:"Comments"}),(0,D.jsx)(z,{editorState:xe,simple:!0,placeholder:"Write something awesome...",onEditorStateChange:e=>{F(!0),me(e)}})]}),(0,D.jsxs)(a.A,{children:[(0,D.jsx)(le,{children:"Add Screenshots"}),(0,D.jsx)(m.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>{F(!0),G(!0)}}),(0,D.jsx)(d.A,{disabled:!0,id:"outlined-disabled",label:`Uploaded : ${(null===re||void 0===re?void 0:re.length)||0}`,border:"none",sx:{"& fieldset":{border:"none"}}}),(0,D.jsx)(d.A,{disabled:!0,id:"outlined-disabled",label:`Total : ${(null===W||void 0===W?void 0:W.length)||0}`,border:"none",sx:{"& fieldset":{border:"none"}}})]})]}),(0,D.jsx)(Q,{testStepScreenShots:he,setTestStepScreenShots:ve,setTestStepsToDelete:pe,setTestStepStatus:be,testStepStatus:ge,caseEvidencesFetched:O,testStepsToDelete:ue,updatedTestStepStatus:ye,setTestCaseStatus:ce,setEdited:F})]}),(0,D.jsxs)(c.A,{children:[(0,D.jsx)(u.A,{onClick:Fe,color:"inherit",children:"Cancel"}),(0,D.jsx)(u.A,{onClick:async e=>{0===Object.values(he).reduce((e,t)=>e+t,0)&&0===(null===re||void 0===re?void 0:re.length)?ke(!0):Oe(e)},variant:"contained",type:"submit",disabled:!_,children:"Save"})]})]}),(0,D.jsxs)(i.A,{open:Z,onClose:Ue,children:[(0,D.jsx)(l.A,{children:"Add Results"}),(0,D.jsxs)(n.A,{children:[(0,D.jsx)(a.A,{direction:"column",spacing:6,alignContent:"center",justifyContent:"center",children:(0,D.jsx)(a.A,{children:(0,D.jsx)(B.jM,{showPreview:!0,maxSize:3145728,accept:"image/*",files:Ie.images,onDrop:Be,onRemove:e=>{F(!0);const t=Ie.images.filter(t=>t!==e);ae(t),_e("images",t),t.length>15?Y({...X,testCaseScreenshotsError:"maximum of 15 screenshots per test case "}):Y({...X,testCaseScreenshotsError:null})},onRemoveAll:()=>{ae([]),F(!0),_e("images",[]),Y({...X,testCaseScreenshotsError:null})},name:"testCaseScreenShots"})})}),(0,D.jsx)(a.A,{mt:2,sx:{width:500,height:50,paddingLeft:5},children:!L&&(0,D.jsxs)(p.A,{variant:"outlined",sx:{height:15,alignContent:"center",justifyContent:"center"},children:[!O&&(0,D.jsx)(h.A,{sx:{display:"flex"},children:(0,D.jsx)(v.A,{})}),O&&(null===W||void 0===W?void 0:W.length)>0&&(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(f.A,{...ne,children:W.map((e,t)=>!(e=>{let t=!1;return V&&(V.constructor===Array?V.includes(e)&&(t=!0):Number(V)===e&&(t=!0)),t})(t)&&(0,D.jsxs)(p.A,{elevation:5,children:[(0,D.jsx)("div",{children:(0,D.jsx)(x.A,{onClick:()=>(e=>{if(F(!0),V.constructor===Array)J([...V,e]);else{const t=[];t.push(e),J(t)}})(t),sx:{float:"right"},children:(0,D.jsx)(g.A,{})})},t),(0,D.jsx)("img",{src:e,alt:" ",style:{objectFit:"contain",objectPosition:"center"}})]}))})}),0===(null===re||void 0===re?void 0:re.length)&&O&&0===(null===W||void 0===W?void 0:W.length)&&"No screenshots found"]})})]}),(0,D.jsxs)(c.A,{children:[(0,D.jsx)(u.A,{onClick:Ue,color:"inherit",children:"Cancel"}),(0,D.jsx)(u.A,{onClick:e=>(G(!1),Y({...X,testCaseScreenshotsError:null}),void _e("images",[])),variant:"contained",children:"Save"})]})]}),(0,D.jsxs)(i.A,{open:we,onClose:$e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,D.jsx)(l.A,{id:"alert-dialog-title",children:"No evidences modified.Do you want to proceed?"}),(0,D.jsx)(n.A,{children:(0,D.jsxs)(r.A,{id:"alert-dialog-description",children:[(0,D.jsx)("br",{}),"No evidences modified"]})}),(0,D.jsxs)(c.A,{children:[(0,D.jsx)(u.A,{onClick:e=>{$e(),Oe(e)},children:"Yes"}),(0,D.jsx)(u.A,{onClick:()=>{$e()},autoFocus:!0,children:"No"})]})]})]})}},73338:(e,t,o)=>{o.d(t,{IG:()=>n,Rn:()=>a,kB:()=>r,pA:()=>c,tm:()=>d});var s=o(53536),i=o(79328),l=o.n(i);function n(e){return l()(e/100).format("0.0%")}function r(e){return l()(e).format()}function a(e){return(0,s.replace)(l()(e).format("0.00a"),".00","")}function d(e){return l()(e).format("0.0 b")}function c(e,t){return l()(e/t).format("0.0%")}},90029:()=>{}}]);
//# sourceMappingURL=7065.e36d33ff.chunk.js.map