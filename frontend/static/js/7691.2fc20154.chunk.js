(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[7691],{11892:(e,t)=>{t.A={width:24,height:24,body:'<g id="evaInfoOutline0"><g id="evaInfoOutline1"><g id="evaInfoOutline2" fill="currentColor"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8a8 8 0 0 1-8 8Z"/><circle cx="12" cy="8" r="1"/><path d="M12 10a1 1 0 0 0-1 1v5a1 1 0 0 0 2 0v-5a1 1 0 0 0-1-1Z"/></g></g></g>'}},36880:(e,t,l)=>{"use strict";l.d(t,{A:()=>x});var r=l(53536),i=l(5748),n=l(11892),o=l(96446),s=l(85865),a=l(77739),c=l(17392),d=l(88446),u=l(76412),h=l(70579);function x(e){let{links:t,action:l,heading:x,info:m,moreLink:p=[],sx:f,...A}=e;return(0,h.jsxs)(o.A,{sx:{mb:5,...f},children:[(0,h.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,h.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,h.jsxs)(o.A,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,h.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:x}),(0,h.jsx)(a.A,{title:m,placement:"bottom",arrow:!0,children:(0,h.jsx)(c.A,{children:(0,h.jsx)(i.In,{icon:n.A,width:25,height:25})})})]}),(0,h.jsx)(u._5,{links:t,...A})]}),l&&(0,h.jsx)(o.A,{sx:{flexShrink:0},children:l})]}),(0,h.jsx)(o.A,{sx:{mt:2},children:(0,r.isString)(p)?(0,h.jsx)(d.A,{href:p,target:"_blank",variant:"body2",children:p}):p.map(e=>(0,h.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e))})]})}},67457:(e,t,l)=>{"use strict";l.d(t,{kW:()=>h,o3:()=>x});const r=/([\p{Ll}\d])(\p{Lu})/gu,i=/(\p{Lu})([\p{Lu}][\p{Ll}])/gu,n=/(\d)\p{Ll}|(\p{L})\d/u,o=/[^\p{L}\d]+/giu,s="$1\0$2",a="";function c(e){let t=e.trim();t=t.replace(r,s).replace(i,s),t=t.replace(o,"\0");let l=0,n=t.length;for(;"\0"===t.charAt(l);)l++;if(l===n)return[];for(;"\0"===t.charAt(n-1);)n--;return t.slice(l,n).split(/\0/g)}function d(e){const t=c(e);for(let l=0;l<t.length;l++){const e=t[l],r=n.exec(e);if(r){const i=r.index+(r[1]??r[2]).length;t.splice(l,1,e.slice(0,i),e.slice(i))}}return t}function u(e,t){const[l,r,i]=A(e,t);return l+r.map(m(t?.locale)).join(t?.delimiter??" ")+i}function h(e,t){return u(e,{delimiter:"-",...t})}function x(e,t){const[l,r,i]=A(e,t),n=m(t?.locale),o=p(t?.locale),s=f(n,o);return l+r.map((e,t)=>0===t?s(e):n(e)).join(t?.delimiter??" ")+i}function m(e){return!1===e?e=>e.toLowerCase():t=>t.toLocaleLowerCase(e)}function p(e){return!1===e?e=>e.toUpperCase():t=>t.toLocaleUpperCase(e)}function f(e,t){return l=>`${t(l[0])}${e(l.slice(1))}`}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=t.split??(t.separateNumbers?d:c),r=t.prefixCharacters??a,i=t.suffixCharacters??a;let n=0,o=e.length;for(;n<e.length;){const t=e.charAt(n);if(!r.includes(t))break;n++}for(;o>n;){const t=o-1,l=e.charAt(t);if(!i.includes(l))break;o=t}return[e.slice(0,n),l(e.slice(n,o)),e.slice(o)]}},97691:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>E});var r=l(65043),i=l(67457),n=l(73216),o=l(19252),s=l(15285),a=l(31802),c=l(49849),d=l(81398),u=l(48407),h=l(11737),x=l(96221),m=l(36880),p=l(80899),f=l(46987),A=l(86897),v=l(72812),g=l(68903),j=l(12110),b=l(88911),w=l(67784),C=l(96446),y=l(83462),I=l(26600),k=l(35316),L=l(98533),R=l(29347),N=l(42518),S=l(70370),D=l(70579);const _={projects:{view:!0,create:!1,edit:!1,delete:!1},projectModules:{view:!0,create:!1,edit:!1,delete:!1},releases:{view:!0,create:!1,edit:!1,delete:!1,clone:!1,run:!1},testRuns:{view:!0,create:!1,edit:!1,delete:!1}};function $(e){let{isEdit:t,currentRole:l}=e;const i=(0,n.Zp)(),{enqueueSnackbar:o}=(0,f.dh)(),a=(0,s.wA)(),{appendUrl:d}=(0,s.d4)(e=>e.user),{rolesList:h,roleConfig:x}=(0,s.d4)(e=>e.role),[m,$]=(0,r.useState)(""),[E,M]=(0,r.useState)(),[T,U]=(0,r.useState)(!1),W=e=>{i((e=>{let t=e;return d&&(t=`${e}?${d}`),t})(e))},q=()=>{U(!1)},B=p.Ik().shape({roleID:p.Yj().required("Role ID is required"),roleName:p.Yj().required("Role is required")}),O=async()=>{const e=null===h||void 0===h?void 0:h.find(e=>e.roleID.toLowerCase()===Z.roleID.toLowerCase()||e.roleName.toLowerCase()===Z.roleName.toLowerCase()),l={...Z,components:[x]};e&&!t?($(`Role with [${Z.roleName}] already exists!!`),U(!0)):t?t&&await(0,c.jE)(a,l,null===e||void 0===e?void 0:e._id):await(0,c.bG)(a,l)},F=(0,r.useCallback)(async()=>{var e;let t=null===h||void 0===h?void 0:h.length;if(0===(null===h||void 0===h?void 0:h.length)){const e=await(0,S.Up)();t=e.length,(0,c.qs)(a,e)}const l=`R${null===(e=parseInt(t+1,10))||void 0===e?void 0:e.toString().padStart(4,0)}`;M(()=>l)},[a,h]),P=(0,A.Wx)({enableReinitialize:!0,initialValues:{roleID:(null===l||void 0===l?void 0:l.roleID)||E,roleName:(null===l||void 0===l?void 0:l.roleName)||""},validationSchema:B,onSubmit:async(e,l)=>{let{setSubmitting:r,resetForm:i,setErrors:n}=l;try{await O(),r(!1);(null===h||void 0===h?void 0:h.find(t=>t.roleName.toLowerCase()===e.roleName.toLowerCase()))&&!t||(i(),o(t?"Update success":"Create success",{variant:"success"}),W(u.nB.role.allRoles))}catch(s){r(!1),n(s)}}}),{errors:V,values:Z,touched:z,handleSubmit:G,isSubmitting:Y,getFieldProps:H}=P;return(0,r.useEffect)(()=>{var e;F(),(0,c.H1)(a,t&&null!==l&&void 0!==l&&l.components&&0!==(null===l||void 0===l||null===(e=l.components)||void 0===e?void 0:e.length)?null===l||void 0===l?void 0:l.components[0]:_)},[a,F,t,l]),(0,D.jsx)(A.QI,{value:P,children:(0,D.jsx)(A.lV,{noValidate:!0,autoComplete:"off",onSubmit:G,children:(0,D.jsx)(g.Ay,{container:!0,spacing:3,children:(0,D.jsx)(g.Ay,{item:!0,xs:12,md:12,children:(0,D.jsxs)(j.A,{sx:{p:3},children:[(0,D.jsxs)(b.A,{spacing:3,children:[(0,D.jsx)(b.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:(0,D.jsx)(w.A,{fullWidth:!0,label:"Role Id",id:"outlined-read-only-input",defaultValue:" ",disabled:!0,...H("roleID"),InputProps:{readOnly:!0},error:Boolean(z.roleID&&V.roleID),helperText:z.roleID&&V.roleID})}),(0,D.jsx)(b.A,{direction:{xs:"column",sm:"row"},spacing:{xs:3,sm:2},children:(0,D.jsx)(w.A,{fullWidth:!0,label:"Role",...H("roleName"),error:Boolean(z.roleName&&V.roleName),helperText:z.roleName&&V.roleName})}),(0,D.jsx)(C.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,D.jsx)(v.A,{type:"submit",variant:"contained",loading:Y,children:t?"Save Changes":"Create Role"})})]}),(0,D.jsxs)(y.A,{open:T,onClose:q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,D.jsx)(I.A,{id:"alert-dialog-title",children:"Role Info"}),(0,D.jsx)(k.A,{children:(0,D.jsxs)(L.A,{id:"alert-dialog-description",children:[(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),m,(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),"Please change"]})}),(0,D.jsx)(R.A,{children:(0,D.jsx)(N.A,{autoFocus:!0,onClick:q,children:"OK"})})]})]})})})})})}function E(){const{themeStretch:e}=(0,h.A)(),t=(0,s.wA)(),{pathname:l}=(0,n.zy)(),{roleId:p}=(0,n.g)(),{rolesList:f}=(0,s.d4)(e=>e.role),A=l.includes("edit"),v=f.find(e=>(0,i.kW)(e._id)===p);return(0,r.useEffect)(()=>{t((0,a.aU)()),t((0,c.Up)()),t((0,d.i9)())},[t]),(0,D.jsx)(x.A,{title:"TestEnsure: Create a new Role",children:(0,D.jsxs)(o.A,{maxWidth:!e&&"xl",children:[(0,D.jsx)(m.A,{heading:A?"Edit role":"Create a new role",links:[{name:"All Roles",href:u.nB.role.allRoles},{name:A?`${null===v||void 0===v?void 0:v.roleName}`:"New Role"}]}),(0,D.jsx)($,{isEdit:A,currentRole:v})]})})}},98533:(e,t,l)=>{"use strict";l.d(t,{A:()=>v});var r=l(98587),i=l(58168),n=l(65043),o=l(58387),s=l(98610),a=l(34535),c=l(61475),d=l(98206),u=l(85865),h=l(92532),x=l(72372);function m(e){return(0,x.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var p=l(70579);const f=["children","className"],A=(0,a.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v=n.forwardRef(function(e,t){const l=(0,d.b)({props:e,name:"MuiDialogContentText"}),{className:n}=l,a=(0,r.A)(l,f),c=(e=>{const{classes:t}=e,l=(0,s.A)({root:["root"]},m,t);return(0,i.A)({},t,l)})(a);return(0,p.jsx)(A,(0,i.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:a,className:(0,o.A)(c.root,n)},l,{classes:c}))})}}]);
//# sourceMappingURL=7691.2fc20154.chunk.js.map